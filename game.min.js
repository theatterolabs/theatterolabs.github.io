/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Object.defineProperty(Array.prototype,'erase',{value:function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;}});Object.defineProperty(Array.prototype,'random',{value:function(item){return this[Math.floor(Math.random()*this.length)];}});Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.24',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar]+this.letterSpacing;}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=(this.height-2)*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.height=image.height-1;this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentChar=0;var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentChar++;currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}
if(ig.Sound.enabled&&ig.Sound.useWebAudio){this.audioContext=new AudioContext();this.boundWebAudioUnlock=this.unlockWebAudio.bind(this);document.addEventListener('touchstart',this.boundWebAudioUnlock,false);}},unlockWebAudio:function(){document.removeEventListener('touchstart',this.boundWebAudioUnlock,false);var buffer=this.audioContext.createBuffer(1,1,22050);var source=this.audioContext.createBufferSource();source.buffer=buffer;source.connect(this.audioContext.destination);source.start(0);},load:function(path,multiChannel,loadCallback){if(multiChannel&&ig.Sound.useWebAudio){return this.loadWebAudio(path,multiChannel,loadCallback);}
else{return this.loadHTML5Audio(path,multiChannel,loadCallback);}},loadWebAudio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){return this.clips[path];}
var audioSource=new ig.Sound.WebAudioSource()
this.clips[path]=audioSource;var request=new XMLHttpRequest();request.open('GET',realPath,true);request.responseType='arraybuffer';var that=this;request.onload=function(ev){that.audioContext.decodeAudioData(request.response,function(buffer){audioSource.buffer=buffer;loadCallback(path,true,ev);},function(ev){loadCallback(path,false,ev);});};request.onerror=function(ev){loadCallback(path,false,ev);};request.send();return audioSource;},loadHTML5Audio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(this.clips[path]instanceof ig.Sound.WebAudioSource){return this.clips[path];}
if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){if(ig.ua.mobile){setTimeout(function(){loadCallback(path,true,null);},0);}
else{clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];if(channels&&channels instanceof ig.Sound.WebAudioSource){return channels;}
for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);if(track instanceof ig.Sound.WebAudioSource){ig.system.stopRunLoop();throw("Sound '"+path+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)");}
track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this.fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,_loop:false,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load();},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;if(this.currentClip){this.currentClip.loop=loop;}},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.loop=this._loop;this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:false,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});},play:function(){if(!this.buffer){return;}
var source=ig.soundManager.audioContext.createBufferSource();source.buffer=this.buffer;source.connect(this.gain);source.loop=this._loop;var that=this;this.sources.push(source);source.onended=function(){that.sources.erase(source);}
source.start(0);},pause:function(){for(var i=0;i<this.sources.length;i++){try{this.sources[i].stop();}catch(err){}}},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;for(var i=0;i<this.sources.length;i++){this.sources[i].loop=loop;}},getVolume:function(){return this.gain.gain.value;},setVolume:function(volume){this.gain.gain.value=volume;}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;ig.normalizeVendorAttribute(window,'AudioContext');ig.Sound.useWebAudio=!!window.AudioContext;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SUBPIXEL;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(code<0&&!ig.ua.mobile){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});ig.global={};

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.frame=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f-0.0001);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim){this.currentAnim.update();}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(totalWidth,totalHeight),this.chunkSize);var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);var screenContext=ig.system.context;ig.system.context=chunkContext;for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=screenContext;return chunk;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX+=this.chunkSize-chunk.width;maxChunkX++;}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY+=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/gamewheel/helpers/util.js
ig.baked=true;ig.module('gamewheel.helpers.util').requires('impact.system').defines(function(){"use strict";if(!ig.util){ig.util={};}
ig.util.locationToPos=function(location,size){var pos={x:0,y:0};size=size||{x:0,y:0};if('x'in location){location.left=location.x;}
if('left'in location){if(location.left=='center'||location.left=='centre'||location.left=='middle'){pos.x=(ig.system.width/2)-(size.x/2);}else{pos.x=location.left;}}
else if('right'in location){if(location.right=='center'||location.right=='centre'||location.right=='middle'){pos.x=(ig.system.width/2)-(size.x/2);}else{pos.x=ig.system.width-location.right-size.x;}}
if('y'in location){location.top=location.y;}
if('top'in location){if(location.top=='center'||location.top=='centre'||location.top=='middle'){pos.y=(ig.system.height/2)-(size.y/2);}else{pos.y=location.top;}}
else if('bottom'in location){if(location.bottom=='center'||location.bottom=='centre'||location.bottom=='middle'){pos.y=(ig.system.height/2)-(size.y/2);}else{pos.y=ig.system.height-location.bottom-size.y;}}
return pos;};ig.util.randomInt=function(minValue,maxValue){if(maxValue==null){maxValue=minValue;minValue=0;}
return minValue+Math.floor(Math.random()*(maxValue-minValue+1));};ig.util.randomFloat=function(minValue,upperBound){if(upperBound==null){upperBound=minValue;minValue=0;}
return(Math.random()*(upperBound-minValue))+minValue;};ig.util.rangedFloat=function(base,range){return base+ig.util.randomFloat(-range/2,range/2);};ig.util.randomBool=function(){return Math.floor(Math.random()*2)==0;};ig.util.shuffledList=function(list){return ig.util.shuffleListInPlace(ig.copy(list));};ig.util.shuffleListInPlace=function(list){var i,j,t;for(i=1;i<list.length;i++){j=Math.floor(Math.random()*(1+i));if(j!=i){t=list[i];list[i]=list[j];list[j]=t;}}
return list;};ig.util.insertionSort=function(list,compareFunction){for(var i=1;i<list.length;i++){var x=list[i];var j=i-1;while(j>=0&&compareFunction(list[j],x)>0){list[j+1]=list[j];j=j-1;}
list[j+1]=x;}
return list;};ig.util.objectByString=function(object,propPath){propPath=propPath.replace(/\[(\w+)\]/g,'.$1');propPath=propPath.replace(/^\./,'');var a=propPath.split('.');for(var i=0,n=a.length;i<n;++i){var k=a[i];if(k in object){object=object[k];}else{return;}}
return object;};ig.util.setObjectByString=function(object,propPath,val){propPath=propPath.replace(/\[(\w+)\]/g,'.$1');propPath=propPath.replace(/^\./,'');var props=propPath.split('.');for(var i=0,n=props.length-1;i<n;++i){if(props[i]in object){object=object[props[i]];}else{return;}}
if(props.length&&props[props.length-1]in object){object[props[props.length-1]]=val;return true;}
return false;};});

// lib/gamewheel/core/game.js
ig.baked=true;ig.module('gamewheel.core.game').requires('impact.game','gamewheel.helpers.util').defines(function(){"use strict";ig.Game.inject({pushEntity:function(entity){this.entities.push(entity);if(entity.name){this.namedEntities[entity.name]=entity;}},ending:function(){},sortEntities:function(){return ig.util.insertionSort(this.entities,this.sortBy);},spawnConfigEntity:function(key,settingsOverride,entityTypeOverride){var entityData=ig.config.entities[key];if(entityData){return this.spawnEntityWithSetup(entityData,settingsOverride,entityTypeOverride);}else{console.log('No entity information defined for '+key);}},spawnEntityWithSetup:function(setupData,settingsOverride,entityType,doNotAdd){var settings=this._genAnimationSettings(setupData);if(setupData.settings){ig.merge(settings,setupData.settings);}
if(settingsOverride){ig.merge(settings,settingsOverride);}
var pos={x:0,y:0};if(setupData.location){pos=ig.util.locationToPos(setupData.location,settings.size);}
var type=entityType||setupData['type']||ig.Entity;return this.spawnEntity(type,pos.x,pos.y,settings);},_genAnimationSettings:function(entityData){var settings={};if(entityData.image){settings.anims={};settings.currentAnim=null;var image=ig.content.imageNamed(entityData.image);settings.animSheet=new ig.AnimationSheet(image.path,image.width,image.height);if(entityData.animated){settings.animSheet.width=entityData.animated['frameSize'].x;settings.animSheet.height=entityData.animated['frameSize'].y;var animDefs=entityData.animated['animations'];for(var key in animDefs){if(animDefs.hasOwnProperty(key)){var anim=animDefs[key];var a=new ig.Animation(settings.animSheet,anim.frameTime,anim.frames,!anim.loop);settings.anims[key]=a;if(!settings.currentAnim){settings.currentAnim=a;}}}}else{var idle=new ig.Animation(settings.animSheet,1,[0],false);settings.anims['idle']=idle;settings.currentAnim=idle;}
settings.size={x:settings.animSheet.width,y:settings.animSheet.height};}
return settings;}});});

// lib/gamewheel/core/googleFonts.js
ig.baked=true;ig.module('gamewheel.core.googleFonts').defines(function(){"use strict";ig.GoogleFonts=ig.Class.extend({fonts:{families:[]},loaded:false,path:'googleFonts',failed:false,loadCallback:null,staticInstantiate:function(fonts){return ig.GoogleFonts.instance||null;},init:function(fonts){this.fonts=fonts;this.load();ig.GoogleFonts.instance=this;},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;window.WebFont.load({google:this.fonts,active:this.onLoad.bind(this),inactive:this.onError.bind(this),timeout:2000});}
else{ig.addResource(this);}},onError:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,true);}},onLoad:function(event){this.loaded=true;if(this.loadCallback){this.loadCallback(this.path,true);}}});});(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function n(a,b,c){n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return n.apply(null,arguments)}var p=Date.now||function(){return+new Date};function r(a,b){this.F=a;this.k=b||a;this.H=this.k.document}var ca=!!window.FontFace;r.prototype.createElement=function(a,b,c){a=this.H.createElement(a);if(b)for(var d in b)b.hasOwnProperty(d)&&("style"==d?a.style.cssText=b[d]:a.setAttribute(d,b[d]));c&&a.appendChild(this.H.createTextNode(c));return a};function s(a,b,c){a=a.H.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}
function t(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function u(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}
function v(a){if("string"===typeof a.fa)return a.fa;var b=a.k.location.protocol;"about:"==b&&(b=a.F.location.protocol);return"https:"==b?"https:":"http:"}function x(a,b,c){function d(){l&&e&&f&&(l(g),l=null)}b=a.createElement("link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,l=c||null;ca?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error("Stylesheet failed to load");d()}):setTimeout(function(){e=!0;d()},0);s(a,"head",b)}
function y(a,b,c,d){var e=a.H.getElementsByTagName("head")[0];if(e){var f=a.createElement("script",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5E3);return f}return null};function z(){this.S=0;this.K=null}function A(a){a.S++;return function(){a.S--;B(a)}}function C(a,b){a.K=b;B(a)}function B(a){0==a.S&&a.K&&(a.K(),a.K=null)};function D(a){this.ea=a||"-"}D.prototype.d=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.ea)};function E(a,b){this.Q=a;this.M=4;this.L="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.L=c[1],this.M=parseInt(c[2],10))}E.prototype.getName=function(){return this.Q};function da(a){return F(a)+" "+(a.M+"00")+" 300px "+G(a.Q)}function G(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function I(a){return a.L+a.M}
function F(a){var b="normal";"o"===a.L?b="oblique":"i"===a.L&&(b="italic");return b}function ea(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function fa(a,b){this.a=a;this.j=a.k.document.documentElement;this.O=b;this.f="wf";this.e=new D("-");this.da=!1!==b.events;this.u=!1!==b.classes}function ga(a){a.u&&t(a.j,[a.e.d(a.f,"loading")]);J(a,"loading")}function K(a){if(a.u){var b=u(a.j,a.e.d(a.f,"active")),c=[],d=[a.e.d(a.f,"loading")];b||c.push(a.e.d(a.f,"inactive"));t(a.j,c,d)}J(a,"inactive")}function J(a,b,c){if(a.da&&a.O[b])if(c)a.O[b](c.getName(),I(c));else a.O[b]()};function ha(){this.t={}}function ia(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.t[e];f&&d.push(f(b[e],c))}return d};function L(a,b){this.a=a;this.h=b;this.m=this.a.createElement("span",{"aria-hidden":"true"},this.h)}function M(a,b){var c=a.m,d;d="display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+G(b.Q)+";"+("font-style:"+F(b)+";font-weight:"+(b.M+"00")+";");c.style.cssText=d}function N(a){s(a.a,"body",a.m)}L.prototype.remove=function(){var a=this.m;a.parentNode&&a.parentNode.removeChild(a)};function O(a,b,c,d,e,f){this.G=a;this.J=b;this.g=d;this.a=c;this.v=e||3E3;this.h=f||void 0}O.prototype.start=function(){function a(){p()-d>=c.v?c.J(c.g):b.fonts.load(da(c.g),c.h).then(function(b){1<=b.length?c.G(c.g):setTimeout(a,25)},function(){c.J(c.g)})}var b=this.a.k.document,c=this,d=p();a()};function P(a,b,c,d,e,f,g){this.G=a;this.J=b;this.a=c;this.g=d;this.h=g||"BESbswy";this.s={};this.v=e||3E3;this.Z=f||null;this.D=this.C=this.A=this.w=null;this.w=new L(this.a,this.h);this.A=new L(this.a,this.h);this.C=new L(this.a,this.h);this.D=new L(this.a,this.h);M(this.w,new E(this.g.getName()+",serif",I(this.g)));M(this.A,new E(this.g.getName()+",sans-serif",I(this.g)));M(this.C,new E("serif",I(this.g)));M(this.D,new E("sans-serif",I(this.g)));N(this.w);N(this.A);N(this.C);N(this.D)}
var Q={ia:"serif",ha:"sans-serif"},R=null;function S(){if(null===R){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);R=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return R}P.prototype.start=function(){this.s.serif=this.C.m.offsetWidth;this.s["sans-serif"]=this.D.m.offsetWidth;this.ga=p();ja(this)};function ka(a,b,c){for(var d in Q)if(Q.hasOwnProperty(d)&&b===a.s[Q[d]]&&c===a.s[Q[d]])return!0;return!1}
function ja(a){var b=a.w.m.offsetWidth,c=a.A.m.offsetWidth,d;(d=b===a.s.serif&&c===a.s["sans-serif"])||(d=S()&&ka(a,b,c));d?p()-a.ga>=a.v?S()&&ka(a,b,c)&&(null===a.Z||a.Z.hasOwnProperty(a.g.getName()))?T(a,a.G):T(a,a.J):la(a):T(a,a.G)}function la(a){setTimeout(n(function(){ja(this)},a),50)}function T(a,b){setTimeout(n(function(){this.w.remove();this.A.remove();this.C.remove();this.D.remove();b(this.g)},a),0)};function U(a,b,c){this.a=a;this.p=b;this.P=0;this.ba=this.Y=!1;this.v=c}var V=null;U.prototype.V=function(a){var b=this.p;b.u&&t(b.j,[b.e.d(b.f,a.getName(),I(a).toString(),"active")],[b.e.d(b.f,a.getName(),I(a).toString(),"loading"),b.e.d(b.f,a.getName(),I(a).toString(),"inactive")]);J(b,"fontactive",a);this.ba=!0;ma(this)};U.prototype.W=function(a){var b=this.p;if(b.u){var c=u(b.j,b.e.d(b.f,a.getName(),I(a).toString(),"active")),d=[],e=[b.e.d(b.f,a.getName(),I(a).toString(),"loading")];c||d.push(b.e.d(b.f,a.getName(),I(a).toString(),"inactive"));t(b.j,d,e)}J(b,"fontinactive",a);ma(this)};function ma(a){0==--a.P&&a.Y&&(a.ba?(a=a.p,a.u&&t(a.j,[a.e.d(a.f,"active")],[a.e.d(a.f,"loading"),a.e.d(a.f,"inactive")]),J(a,"active")):K(a.p))};function na(a){this.F=a;this.q=new ha;this.$=0;this.T=this.U=!0}na.prototype.load=function(a){this.a=new r(this.F,a.context||this.F);this.U=!1!==a.events;this.T=!1!==a.classes;oa(this,new fa(this.a,a),a)};function pa(a,b,c,d,e){var f=0==--a.$;(a.T||a.U)&&setTimeout(function(){var a=e||null,l=d||null||{};if(0===c.length&&f)K(b.p);else{b.P+=c.length;f&&(b.Y=f);var h,k=[];for(h=0;h<c.length;h++){var m=c[h],w=l[m.getName()],q=b.p,H=m;q.u&&t(q.j,[q.e.d(q.f,H.getName(),I(H).toString(),"loading")]);J(q,"fontloading",H);q=null;null===V&&(V=window.FontFace?(q=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))?42<parseInt(q[1],10):!0:!1);q=V?new O(n(b.V,b),n(b.W,b),b.a,m,b.v,w):new P(n(b.V,b),n(b.W,b),b.a,m,b.v,a,w);k.push(q)}for(h=0;h<k.length;h++)k[h].start()}},0)}function oa(a,b,c){var d=[],e=c.timeout;ga(b);var d=ia(a.q,c,a.a),f=new U(a.a,b,e);a.$=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,c,d){pa(a,f,b,c,d)})};function qa(a,b,c){this.N=a?a:b+ra;this.o=[];this.R=[];this.ca=c||""}var ra="//fonts.googleapis.com/css";function sa(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.R.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.o.push(e.join(f))}}
qa.prototype.d=function(){if(0==this.o.length)throw Error("No fonts to load!");if(-1!=this.N.indexOf("kit="))return this.N;for(var a=this.o.length,b=[],c=0;c<a;c++)b.push(this.o[c].replace(/ /g,"+"));a=this.N+"?family="+b.join("%7C");0<this.R.length&&(a+="&subset="+this.R.join(","));0<this.ca.length&&(a+="&text="+encodeURIComponent(this.ca));return a};function ta(a){this.o=a;this.aa=[];this.I={}}
var ua={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},va={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},wa={i:"i",italic:"i",n:"n",normal:"n"},xa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;ta.prototype.parse=function(){for(var a=this.o.length,b=0;b<a;b++){var c=this.o[b].split(":"),d=c[0].replace(/\+/g," "),e=["n4"];if(2<=c.length){var f;var g=c[1];f=[];if(g)for(var g=g.split(","),l=g.length,h=0;h<l;h++){var k;k=g[h];if(k.match(/^[\w-]+$/))if(k=xa.exec(k.toLowerCase()),null==k)k="";else{var m;m=k[1];if(null==m||""==m)m="4";else{var w=va[m];m=w?w:isNaN(m)?"4":m.substr(0,1)}k=k[2];k=[null==k||""==k?"n":wa[k],m].join("")}else k="";k&&f.push(k)}0<f.length&&(e=f);3==c.length&&(c=c[2],f=[],c=c?c.split(","):f,0<c.length&&(c=ua[c[0]])&&(this.I[d]=c))}this.I[d]||(c=ua[d])&&(this.I[d]=c);for(c=0;c<e.length;c+=1)this.aa.push(new E(d,e[c]))}};function ya(a,b){this.a=a;this.c=b}var za={Arimo:!0,Cousine:!0,Tinos:!0};ya.prototype.load=function(a){var b=new z,c=this.a,d=new qa(this.c.api,v(c),this.c.text),e=this.c.families;sa(d,e);var f=new ta(e);f.parse();x(c,d.d(),A(b));C(b,function(){a(f.aa,f.I,za)})};function W(a,b){this.a=a;this.c=b;this.X=[]}W.prototype.B=function(a){var b=this.a;return v(this.a)+(this.c.api||"//f.fontdeck.com/s/css/js/")+(b.k.location.hostname||b.F.location.hostname)+"/"+a+".js"};W.prototype.load=function(a){var b=this.c.id,c=this.a.k,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,l=c.fonts.length;g<l;++g){var h=c.fonts[g];d.X.push(new E(h.name,ea("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.X)},y(this.a,this.B(b),function(b){b&&a([])})):a([])};function X(a,b){this.a=a;this.c=b}X.prototype.B=function(a){return(this.c.api||"https://use.typekit.net")+"/"+a+".js"};X.prototype.load=function(a){var b=this.c.id,c=this.a.k;b?y(this.a,this.B(b),function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],l=b[f+1],h=0;h<l.length;h++)e.push(new E(g,l[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(k){}a(e)}},2E3):a([])};function Y(a,b){this.a=a;this.c=b}Y.prototype.B=function(a,b){var c=v(this.a),d=(this.c.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return c+"//"+d+"/"+a+".js"+(b?"?v="+b:"")};Y.prototype.load=function(a){function b(){if(e["__mti_fntLst"+c]){var d=e["__mti_fntLst"+c](),g=[],l;if(d)for(var h=0;h<d.length;h++){var k=d[h].fontfamily;void 0!=d[h].fontStyle&&void 0!=d[h].fontWeight?(l=d[h].fontStyle+d[h].fontWeight,g.push(new E(k,l))):g.push(new E(k))}a(g)}else setTimeout(function(){b()},50)}var c=this.c.projectId,d=this.c.version;if(c){var e=this.a.k;y(this.a,this.B(c,d),function(c){c?a([]):b()}).id="__MonotypeAPIScript__"+c}else a([])};function Aa(a,b){this.a=a;this.c=b}Aa.prototype.load=function(a){var b,c,d=this.c.urls||[],e=this.c.families||[],f=this.c.testStrings||{},g=new z;b=0;for(c=d.length;b<c;b++)x(this.a,d[b],A(g));var l=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),k=0;k<h.length;k+=1)l.push(new E(d[0],h[k]));else l.push(new E(d[0]));C(g,function(){a(l,f)})};var Z=new na(window);Z.q.t.custom=function(a,b){return new Aa(b,a)};Z.q.t.fontdeck=function(a,b){return new W(b,a)};Z.q.t.monotype=function(a,b){return new Y(b,a)};Z.q.t.typekit=function(a,b){return new X(b,a)};Z.q.t.google=function(a,b){return new ya(b,a)};var $={load:n(Z.load,Z)};"function"===typeof define&&define.amd?define(function(){return $}):"undefined"!==typeof module&&module.exports?module.exports=$:(window.WebFont=$,window.WebFontConfig&&Z.load(window.WebFontConfig));}());

// lib/gamewheel/core/content.js
ig.baked=true;ig.module('gamewheel.core.content').requires('impact.image','impact.font','impact.sound','gamewheel.core.googleFonts').defines(function(){"use strict";ig.Content=ig.Class.extend({images:{},fonts:{},sounds:{},staticInstantiate:function(){return ig.Content.instance||null;},init:function(){ig.Content.instance=this;},load:function(assetData,mediaPath){var imageList=assetData['images'];if(imageList){for(var imageName in imageList){if(imageList.hasOwnProperty(imageName)){this.images[imageName]=new ig.Image(mediaPath+imageList[imageName]);}}}
var fontList=assetData['fonts'];if(fontList){for(var fontName in fontList){if(fontList.hasOwnProperty(fontName)){this.fonts[fontName]=new ig.Font(mediaPath+fontList[fontName]);}}}
var soundList=assetData['sounds'];if(soundList){for(var soundName in soundList){if(soundList.hasOwnProperty(soundName)){this.sounds[soundName]=new ig.Sound(mediaPath+soundList[soundName]);}}}
if(assetData['googleWebFonts']){new ig.GoogleFonts(assetData['googleWebFonts']);}},imageNamed:function(name){return this.images[name];},fontNamed:function(name){return this.fonts[name];},soundNamed:function(name){return this.sounds[name];},playSoundNamed:function(name){if(this.sounds[name]){this.sounds[name].play();return true;}
return false;}});ig.content=new ig.Content();ig.content.load(ig.config['assets'],ig.config.mediaPath||'media/');});

// lib/gamewheel/core/localization.js
ig.baked=true;ig.module('gamewheel.core.localization').defines(function(){"use strict";ig.Localization=ig.Class.extend({_langData:undefined,currentLanguage:'en',languageDefault:'en',staticInstantiate:function(){return ig.Localization.instance||null;},init:function(){ig.Localization.instance=this;this._langData=ig.config['assets']['text']||{};},selectLanguage:function(){},textForKey:function(key,defaultText){if(!ig.ua.mobile&&this._langData[key+'Desktop']!==undefined){return this._langData[key+'Desktop'];}else if(this._langData[key]!==undefined){return this._langData[key];}else{return defaultText||'';}}});});

// lib/gamewheel/scenes/basicScene.js
ig.baked=true;ig.module('gamewheel.scenes.basicScene').requires('impact.game','gamewheel.core.game').defines(function(){"use strict";ig.BasicScene=ig.Game.extend({onSceneEnd:undefined,elements:undefined,init:function(){this.bindInput();this.spawnElements();},bindInput:function(){ig.input.bind(ig.KEY.SPACE,'space');ig.input.bind(ig.KEY.MOUSE1,'click');},spawnElements:function(){if(this.elements){for(var i=0;i<this.elements.length;i++){var e=this.spawnConfigEntity(this.elements[i]);}
delete this.elements;}},endScene:function(){if(this.onSceneEnd){ig.actions.perform(this.onSceneEnd);}}});});

// lib/gamewheel/core/sessionStats.js
ig.baked=true;ig.module('gamewheel.core.sessionStats').defines(function(){"use strict";ig.SessionStats=ig.Class.extend({sessionBase:{startTime:0,time:0,score:0,died:false,resultString:'',resultID:null,toString:function(){var summary="Time: "+this.time+" Score: "+this.score+" Died: "+this.died;if(this.resultID){summary+=" Result: "+this.resultID;}
return summary;},complete:function(){if(this.time===0){this.time=(Date.now()-this.startTime)/1000;}}},currentSession:undefined,sessions:[],staticInstantiate:function(){return ig.SessionStats.instance||null;},init:function(){this.newSession();ig.SessionStats.instance=this;},newSession:function(){if(this.currentSession){this.sessions.push(this.currentSession);}
this.currentSession=ig.copy(this.sessionBase);this.currentSession.startTime=Date.now();return this.currentSession;}});});

// lib/gamewheel/core/settings.js
ig.baked=true;ig.module('gamewheel.core.settings').defines(function(){"use strict";ig.settings=ig.settings||{};ig.settings.tokens={};var match=/instances\/[^/]*\/?(\d+)/.exec(window.location.pathname),instanceId=match&&match.length&&match[1]&&parseInt(match[1],10);if(instanceId){ig.settings.instance={id:instanceId};}else{ig.settings.instance={url:window.location.host+window.location.pathname};}
setApi(window.location.host);function setApi(host){var matches=/^(dev-)?.*\.gamewheel\.(com?|local)$/.exec(host),domain=null,isLocal=false,dev=false;if(matches){domain=matches[2];if(domain==='co'){domain+='m';}
isLocal=(domain==='local');dev=matches[1];ig.settings.api={endpoint:'http'+(isLocal?'':'s')+'://'+(dev||'')+'api-runtime.gamewheel.'+domain,key:'gw_rocks'};}else{console.error("Domain not supported for Runtime API");}}});

// lib/gamewheel/helpers/apiUtil.js
ig.baked=true;ig.module('gamewheel.helpers.apiUtil').requires('gamewheel.core.settings').defines(function(){"use strict";function normalizeFunction(fn){return(fn&&typeof(fn)==='function')?fn:function(){};}
function xhr(path,method,headers,body,fn){fn=normalizeFunction(fn);if(!ig.settings.api){return fn(500,{error:"Runtime API settings not defined"});}
var xhr=new XMLHttpRequest();xhr.open(method,ig.settings.api.endpoint+path);xhr.setRequestHeader('Content-Type','application/json');xhr.setRequestHeader('x-gw-api-rt-key',ig.settings.api.key);xhr.setRequestHeader('x-gw-api-rt-token',ig.settings.tokens.api_runtime);if(headers){Object.keys(headers).forEach(function(key){xhr.setRequestHeader(key,headers[key]);});}
xhr.onreadystatechange=function(){var body;if(xhr.readyState===XMLHttpRequest.DONE){try{body=JSON.parse(xhr.responseText);}catch(e){body={error:xhr.responseText};}
fn(xhr.status,body);}};xhr.send(JSON.stringify(body));}
function authenticate(fn){fn=normalizeFunction(fn);var body={instance_id:ig.settings.instance.id,masked_url:ig.settings.instance.url};xhr('/auth/login','POST',null,body,function(status,body){if(status!==200){return fn(false);}
ig.settings.tokens.api_runtime=body.token;ig.settings.instance=body.instance;fn(true);});}
function createSession(fn){fn=normalizeFunction(fn);var body={};xhr('/game_sessions','POST',null,body,function(status,body){if(status!==200&&status!==201){return fn(false);}
ig.settings.tokens.api_runtime_session=body.token;fn(true);});}
function sendEvent(event,data){var body={session_token:ig.settings.tokens.api_runtime_session,name:event,data:data};xhr('/game_events','POST',null,body,function(status,body){});}
ig.apiUtil={xhr:xhr,authenticate:authenticate,createSession:createSession,sendEvent:sendEvent,normalizeFunction:normalizeFunction};});

// lib/gamewheel/api_analytics/analytics.js
ig.baked=true;ig.module('gamewheel.api_analytics.analytics').requires('gamewheel.helpers.apiUtil').defines(function(){"use strict";var apiAnalytics={enabled:false,init:function(fn){fn=ig.apiUtil.normalizeFunction(fn);var self=this;ig.apiUtil.authenticate(function(success){if(success){ig.apiUtil.createSession(function(success){self.enabled=success;fn();});}else{fn();}});},sendEvent:function(event,data){if(this.enabled){ig.apiUtil.sendEvent(event,data);}}};ig.apiAnalytics=ig.apiAnalytics||apiAnalytics;});

// lib/gamewheel/core/analytics.js
ig.baked=true;ig.module('gamewheel.core.analytics').requires('gamewheel.scenes.basicScene','gamewheel.core.sessionStats','gamewheel.api_analytics.analytics').defines(function(){"use strict";ig.ANALYTICS_EVENT={PAGE_LOADED:"pageLoaded",GAME_LOADED:"gameLoaded",PRESSED_FOOTER:"pressedFooter",PRESSED_HELP:"pressedHelp",PRESSED_SHARE:"pressedShare",PRESSED_CTA:"pressedCTA",PRESSED_REPLAY:"pressedReplay",GAME_STARTED:"gameStarted",GAME_COMPLETE:"gameCompleted",EXIT_GAME:"exitGame",FACEBOOK_SHARE_INIT_FAILED:"facebookInitFailed",FACEBOOK_SHARE_INIT:"shareOnFacebookInitiated",FACEBOOK_SHARE_COMPLETE:"shareOnFacebookCompleted",FACEBOOK_SHARE_CANCELED:"shareOnFacebookCanceled",SUBMITTED_LEAD_FORM:"playerSubmittedForm"};ig.Analytics=ig.Class.extend({token:null,version:null,sessionId:null,anonId:null,startTime:null,endTime:null,score:null,died:false,action:'',logSubmits:false,disableSegment:false,disableGamewheel:false,didSubmitGameLoadedEvent:false,staticInstantiate:function(){return ig.Analytics.instance||null;},setup:function(){var analyticsInfo=ig.config.global['analytics'];if(window.disableAnalytics===true){this.disableGamewheel=true;this.disableSegment=true;}else if(analyticsInfo){var gw=analyticsInfo['gw'];var segment=analyticsInfo['segment'];if(!gw&&!segment){console.warn('Analytics configuration method requires updating');this.disableGamewheel=analyticsInfo['disable']===true;this.disableSegment=analyticsInfo['disable']===true;this.token=analyticsInfo['token'];this.version=analyticsInfo['version'];}
if(gw){this.disableGamewheel=gw['disable']===true;}
if(segment){this.disableSegment=segment['disable']===true;this.token=segment['token'];this.version=segment['version'];}
if(!this.disableSegment&&(!this.token||!this.version)){this.disableSegment=true;console.error('Insufficient configuration data to enable segment');}}else{console.error('Insufficient configuration data to enable analytics');this.disableGamewheel=true;this.disableSegment=true;}},init:function(){ig.Analytics.instance=this;this.setup();var self=this;if(!this.disableSegment){this.sessionId=Math.floor(Math.random()*1000)+1;!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}
analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION=self.version;analytics.load(self.token);analytics.page()}}();analytics.ready(function(){self.anonId=mixpanel.get_distinct_id();});analytics.alias({previousId:self.anonId,userId:self.sessionId});analytics.identify({userId:self.sessionId});if(this.disableGamewheel){self.submitEvent(ig.ANALYTICS_EVENT.PAGE_LOADED);}}
if(!this.disableGamewheel){ig.apiAnalytics.init(function(){if(self.logSubmits){console.log('Gamewheel api analytics init success: '+ig.apiAnalytics.enabled);}
self.submitEvent(ig.ANALYTICS_EVENT.PAGE_LOADED);});}},startGame:function(){this.startTime=Date.now();},endGame:function(){this.endTime=Date.now();if(ig.sessionStats.currentSession){this.score=ig.sessionStats.currentSession.score;this.died=ig.sessionStats.currentSession.died;}},submitGameSession:function(){this._track(ig.ANALYTICS_EVENT.GAME_COMPLETE.toString(),{userId:this.sessionId,startTime:this.startTime,endTime:this.endTime,duration:(this.endTime-this.startTime)/1000,score:this.score,died:this.died});},submitEvent:function(event){this._track(event.toString(),{userId:this.sessionId,time:Date.now()});},_track:function(event,object){if(this.logSubmits){console.log("Analytics Submit: "+event+" "+JSON.stringify(object));}
if(!this.disableSegment){analytics.track(event,object);}
if(!this.disableGamewheel){ig.apiAnalytics.sendEvent(event,object);}}});ig.System.inject({startRunLoop:function(){if(ig.analytics&&!ig.analytics.didSubmitGameLoadedEvent){ig.analytics.didSubmitGameLoadedEvent=true;ig.analytics.submitEvent(ig.ANALYTICS_EVENT.GAME_LOADED);}
this.parent();}});ig.BasicScene.inject({autoTrackGameAnalytics:false,init:function(){this.parent();if(this.autoTrackGameAnalytics){ig.analytics.startGame();ig.analytics.submitEvent(ig.ANALYTICS_EVENT.GAME_STARTED);}},ending:function(){if(this.autoTrackGameAnalytics){ig.analytics.endGame();ig.analytics.submitGameSession();}
this.parent();}});});

// lib/gamewheel/core/actions.js
ig.baked=true;ig.module('gamewheel.core.actions').requires('gamewheel.core.analytics').defines(function(){"use strict";ig.Actions=ig.Class.extend({submitAnalyticsEvent:function(event){ig.analytics.submitEvent(event);},goToScene:function(sceneName){ig.system.setScene(sceneName);},goToSceneBasedOnScore:function(args){var playerScore=ig.sessionStats.currentSession.score;var rs=null;var scene=null;for(var sceneName in args){if(args.hasOwnProperty(sceneName)){var requiredScore=args[sceneName];if(requiredScore===undefined||requiredScore===null){if(rs===null){scene=sceneName;}}else if(playerScore>=requiredScore&&(rs===null||requiredScore>rs)){rs=requiredScore;scene=sceneName;}}}
if(scene){ig.system.setScene(scene);}else{console.error('No accessible scene.');}},endScene:function(){ig.game.endScene();},navigateToUrl:function(url){ig.analytics.submitEvent(ig.ANALYTICS_EVENT.EXIT_GAME);setTimeout(function(){document.location.href=url;},200);},_facebookInit:false,shareOnFacebook:function(args){if(!window.FB){ig.analytics.submitEvent(ig.ANALYTICS_EVENT.FACEBOOK_SHARE_INIT_FAILED);return;}
ig.analytics.submitEvent(ig.ANALYTICS_EVENT.FACEBOOK_SHARE_INIT);args=args||{};if(typeof args=='string'){args={shareUrl:args,redirectUrlSuccess:undefined,redirectUrlCanceled:undefined}}
var _self=this;if(!this._facebookInit){window.FB.init({appId:'1607515912863171',xfbml:true,version:'v2.4'});this._facebookInit=true;}
window.FB.ui({method:'share',href:(args.shareUrl||window.location.href)},function(response){if(response){ig.analytics.submitEvent(ig.ANALYTICS_EVENT.FACEBOOK_SHARE_COMPLETE);if(args.redirectUrlSuccess){_self.navigateToUrl(args.redirectUrlSuccess);}}
else{ig.analytics.submitEvent(ig.ANALYTICS_EVENT.FACEBOOK_SHARE_CANCELED);if(args.redirectUrlCanceled){_self.navigateToUrl(args.redirectUrlCanceled);}}});},shareOnTwitter:function(message){message=message.replace('%URL%',window.location);var url="https://twitter.com/intent/tweet?text="+encodeURI(message);this.navigateToUrl(url)},perform:function(definition){if(definition&&!(definition instanceof Array)){definition=[definition];}
if(definition){for(var i=0;i<definition.length;i++){if(definition[i]&&definition[i].hasOwnProperty('action')){if(ig.actions[definition[i].action]){ig.actions[definition[i].action](definition[i]['args']);}}}}}});});(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}
js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));

// lib/gamewheel/core/gamewheel.js
ig.baked=true;ig.module('gamewheel.core.gamewheel').requires('impact.impact','impact.system','gamewheel.core.game','gamewheel.core.content','gamewheel.core.localization','gamewheel.core.actions','gamewheel.core.analytics','gamewheel.core.sessionStats').defines(function(){"use strict";ig.actions=new ig.Actions();ig.localization=new ig.Localization();ig.sessionStats=new ig.SessionStats();ig.analytics=new ig.Analytics();ig.getSceneClass=function(sceneName){var sceneConfigData=ig.config['scenes'][sceneName];if(ig[sceneConfigData['sceneType']]){return ig[sceneConfigData['sceneType']].extend(sceneConfigData['settings']||{});}};ig.getBootScene=function(){return ig.getSceneClass(ig.config.global['bootScene']);};ig.System.inject({setScene:function(sceneName){ig.game.ending();this.setGame(ig.getSceneClass(sceneName))}});});

// lib/gamewheel/core/gwLoader.js
ig.baked=true;ig.module('gamewheel.core.gwLoader').requires('impact.loader').defines(function(){"use strict";ig.GwLoader=ig.Loader.extend({_drawStatus:0,_wheelSpeed:3*Math.PI,_startTime:-1,_showTime:0,_bgColorHex:window.ImpactMixin.config.global['keyColor']||'#FFFFFF',_themeThreshold:0.7,_colorSettings:{'dark':{'base':'#44423f'},'light':{'base':'#FFFFFF'}},_theme:'dark',init:function(gameClass,resources){var bgColorHSL=this._rgb2hsl(this._bgColorHex);this._theme=(bgColorHSL[2]<this._themeThreshold)?'light':'dark';this.w=ig.system.realWidth;this.h=ig.system.realHeight;this.logo_src_w=250;this.logo_src_h=44;this.logo_target_w=this.w*0.43;this.progressBar_target_w=0.8*this.logo_target_w;this.logo_scale=this.logo_target_w/this.logo_src_w;this.logo_margin_x=(this.w-this.logo_target_w)/2;this.logo_margin_y=(this.h-this.logo_src_h*this.logo_scale)/2;this.progressBar_margin_x=(this.w-this.progressBar_target_w)/2;this.progressBar_margin_y=this.logo_margin_y+(this.logo_src_h*this.logo_scale)+(this.logo_src_h*this.logo_scale)/3;this.parent(gameClass,resources);},load:function(){ig.system.clear(this._bgColorHex);if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},draw:function(){if(this._startTime==-1)
this._startTime=Date.now();this._showTime=(Date.now()-this._startTime)/1000.0;this._drawStatus+=(this.status-this._drawStatus)/5;ig.system.context.clearRect(0,0,this.w,this.h);ig.system.context.fillStyle=this._bgColorHex;ig.system.context.beginPath();ig.system.context.rect(0,0,this.w,this.h);ig.system.context.fill();ig.system.context.closePath();ig.system.context.save();ig.system.context.translate(this.logo_margin_x,this.logo_margin_y);ig.system.context.scale(this.logo_scale,this.logo_scale);this._drawLogo(ig.system.context);ig.system.context.restore();ig.system.context.save();ig.system.context.translate(this.progressBar_margin_x,this.progressBar_margin_y);this._drawProgressBar(ig.system.context,this.progressBar_target_w,this.progressBar_target_w/25);ig.system.context.restore();},_drawProgressBar:function(ctx,bar_w,bar_h){ctx.save();ctx.lineWidth=bar_h;ctx.strokeStyle="#9F9F9F";ctx.lineCap="round";ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(bar_w,0);ctx.stroke();ctx.closePath();ctx.strokeStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(bar_w*this._drawStatus,0);ctx.stroke();ctx.closePath();ctx.restore();},_drawLogo:function(ctx){ctx.save();ctx.strokeStyle='rgba(0,0,0,0)';ctx.lineCap='butt';ctx.lineJoin='miter';ctx.miterLimit=4;ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(43.5,15.5);ctx.bezierCurveTo(42.6,10.9,40.3,6.300000000000001,35.2,3.4000000000000004);ctx.bezierCurveTo(33,2.2,30.300000000000004,1.3000000000000003,27.6,0.8000000000000003);ctx.bezierCurveTo(21.700000000000003,-0.3999999999999997,15.3,-0.19999999999999973,12.900000000000002,0.7000000000000003);ctx.bezierCurveTo(9.700000000000003,1.9000000000000004,7.3000000000000025,3.7,5.3000000000000025,6.2);ctx.bezierCurveTo(3.1000000000000023,8.9,1.5000000000000027,12.5,0.40000000000000213,17.2);ctx.lineTo(0,20.1);ctx.bezierCurveTo(0,22.3,0.2,24.5,0.6,26.700000000000003);ctx.bezierCurveTo(0.8,27.500000000000004,0.8999999999999999,28.400000000000002,1.2,29.200000000000003);ctx.bezierCurveTo(4,36.7,9,41.8,16.5,43.4);ctx.bezierCurveTo(18.5,43.8,20.6,44,22.8,43.9);ctx.bezierCurveTo(30.4,43.9,35.3,41.1,38.4,37.6);ctx.bezierCurveTo(43.8,31.5,44,23.200000000000003,44,23.200000000000003);ctx.bezierCurveTo(44.1,20.8,44,18.1,43.5,15.5);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.strokeStyle=this._colorSettings[this._theme]['base'];var wheel_rotation=((this._showTime*this._wheelSpeed)%(2*Math.PI));ctx.save();ctx.fillStyle="#f8962f";if(Math.floor(wheel_rotation/(2*Math.PI)*5.99999)==0)ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(22.1,22);ctx.bezierCurveTo(23.900000000000002,19.5,34.2,6.699999999999999,28.5,4.699999999999999);ctx.bezierCurveTo(34.7,6.999999999999999,39.3,12.399999999999999,40.4,18.9);ctx.bezierCurveTo(41.4,24.8,25.2,22.4,22.1,22);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle="#ec3b3e";if(Math.floor(wheel_rotation/(2*Math.PI)*5.99999)==1)ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(22.1,22);ctx.bezierCurveTo(25.200000000000003,22.3,41.400000000000006,24.7,40.3,18.9);ctx.bezierCurveTo(41.4,25.4,38.9,32,33.9,36.2);ctx.bezierCurveTo(29.5,40,23.3,24.9,22.1,22);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle="#aa6ea8";if(Math.floor(wheel_rotation/(2*Math.PI)*5.99999)==2)ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(22.1,22);ctx.bezierCurveTo(23.3,24.8,29.400000000000002,40,34,36.2);ctx.bezierCurveTo(28.9,40.400000000000006,21.9,41.6,15.8,39.300000000000004);ctx.bezierCurveTo(10.2,37.3,20.3,24.5,22.1,22);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle="#4067ab";if(Math.floor(wheel_rotation/(2*Math.PI)*5.99999)==3)ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(22.1,22);ctx.bezierCurveTo(20.3,24.5,10.000000000000002,37.3,15.700000000000001,39.3);ctx.bezierCurveTo(9.5,37,5,31.6,3.9,25.1);ctx.bezierCurveTo(2.8,19.3,19,21.7,22.1,22);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle="#4fb348";if(Math.floor(wheel_rotation/(2*Math.PI)*5.99999)==4)ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(22.1,22);ctx.bezierCurveTo(19,21.7,2.8,19.3,3.9,25.1);ctx.bezierCurveTo(2.8,18.700000000000003,5.2,12.100000000000001,10.3,7.900000000000002);ctx.bezierCurveTo(14.9,4.1,20.9,19.2,22.1,22);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle="#e8e73f";if(Math.floor(wheel_rotation/(2*Math.PI)*5.99999)==5)ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(22.1,22);ctx.bezierCurveTo(20.900000000000002,19.2,14.8,4,10.200000000000001,7.800000000000001);ctx.bezierCurveTo(15.3,3.6000000000000005,22.3,2.4000000000000004,28.4,4.700000000000001);ctx.bezierCurveTo(34.2,6.8,24,19.6,22.1,22);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.restore();ctx.save();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(56.1,25.2);ctx.bezierCurveTo(56.300000000000004,19.799999999999997,60.9,15.7,66.4,15.899999999999999);ctx.lineTo(66.4,15.899999999999999);ctx.bezierCurveTo(71.80000000000001,16.2,76.10000000000001,20.7,75.7,26.099999999999998);ctx.lineTo(75.7,26.099999999999998);ctx.bezierCurveTo(75.4,31.5,70.9,35.699999999999996,65.4,35.4);ctx.lineTo(65.4,35.4);ctx.bezierCurveTo(60,35.2,55.8,30.6,56.1,25.2);ctx.lineTo(56.1,25.2);ctx.closePath();ctx.moveTo(60.7,25.4);ctx.bezierCurveTo(60.6,28.2,62.7,30.599999999999998,65.60000000000001,30.7);ctx.lineTo(65.60000000000001,30.7);ctx.bezierCurveTo(68.4,30.8,70.80000000000001,28.7,70.9,25.799999999999997);ctx.lineTo(70.9,25.799999999999997);ctx.bezierCurveTo(71,22.999999999999996,68.9,20.599999999999998,66,20.499999999999996);ctx.lineTo(66,20.499999999999996);ctx.bezierCurveTo(63.3,20.5,60.9,22.6,60.7,25.4);ctx.lineTo(60.7,25.4);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(77.4,27);ctx.bezierCurveTo(76.9,21.6,80.7,16.8,86.10000000000001,16.3);ctx.lineTo(86.10000000000001,16.3);ctx.bezierCurveTo(91.50000000000001,15.700000000000001,96.4,19.6,96.9,25);ctx.lineTo(96.9,25);ctx.bezierCurveTo(97.5,30.4,93.60000000000001,35.2,88.2,35.7);ctx.lineTo(88.2,35.7);ctx.bezierCurveTo(82.8,36.3,78,32.4,77.4,27);ctx.lineTo(77.4,27);ctx.closePath();ctx.moveTo(82.1,26.5);ctx.bezierCurveTo(82.39999999999999,29.3,84.89999999999999,31.3,87.69999999999999,31);ctx.lineTo(87.69999999999999,31);ctx.bezierCurveTo(90.49999999999999,30.7,92.49999999999999,28.2,92.19999999999999,25.4);ctx.lineTo(92.19999999999999,25.4);ctx.bezierCurveTo(91.89999999999999,22.599999999999998,89.39999999999999,20.599999999999998,86.6,20.9);ctx.lineTo(86.6,20.9);ctx.bezierCurveTo(83.8,21.2,81.8,23.7,82.1,26.5);ctx.lineTo(82.1,26.5);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(209.8,35.4);ctx.bezierCurveTo(205.10000000000002,34.6,201.70000000000002,30.4,201.70000000000002,25.799999999999997);ctx.lineTo(201.70000000000002,25.799999999999997);ctx.bezierCurveTo(201.70000000000002,25.199999999999996,201.70000000000002,24.699999999999996,201.9,24.099999999999998);ctx.lineTo(201.9,24.099999999999998);ctx.bezierCurveTo(202.70000000000002,19.4,206.8,15.999999999999998,211.6,15.999999999999998);ctx.lineTo(211.6,15.999999999999998);ctx.bezierCurveTo(212.2,15.999999999999998,212.7,15.999999999999998,213.29999999999998,16.099999999999998);ctx.lineTo(213.29999999999998,16.099999999999998);ctx.bezierCurveTo(217.99999999999997,16.9,221.39999999999998,21,221.39999999999998,25.699999999999996);ctx.lineTo(221.39999999999998,25.699999999999996);ctx.bezierCurveTo(221.39999999999998,26.299999999999997,221.39999999999998,26.799999999999997,221.29999999999998,27.399999999999995);ctx.lineTo(221.29999999999998,27.399999999999995);ctx.bezierCurveTo(221.2,27.999999999999996,220.79999999999998,28.599999999999994,220.29999999999998,28.899999999999995);ctx.lineTo(220.29999999999998,28.899999999999995);ctx.bezierCurveTo(219.79999999999998,29.299999999999994,219.2,29.399999999999995,218.49999999999997,29.299999999999994);ctx.lineTo(218.49999999999997,29.299999999999994);ctx.lineTo(206.59999999999997,27.199999999999992);ctx.bezierCurveTo(207.09999999999997,28.999999999999993,208.59999999999997,30.39999999999999,210.59999999999997,30.799999999999994);ctx.lineTo(210.59999999999997,30.799999999999994);ctx.lineTo(210.59999999999997,30.799999999999994);ctx.bezierCurveTo(211.89999999999998,30.999999999999993,212.69999999999996,32.199999999999996,212.49999999999997,33.49999999999999);ctx.lineTo(212.49999999999997,33.49999999999999);ctx.bezierCurveTo(212.29999999999998,34.599999999999994,211.29999999999998,35.39999999999999,210.19999999999996,35.39999999999999);ctx.lineTo(210.19999999999996,35.39999999999999);ctx.bezierCurveTo(210.1,35.4,209.9,35.4,209.8,35.4);ctx.lineTo(209.8,35.4);ctx.closePath();ctx.moveTo(216.4,24.2);ctx.bezierCurveTo(215.8,22.5,214.4,21.099999999999998,212.4,20.7);ctx.lineTo(212.4,20.7);ctx.bezierCurveTo(212.1,20.599999999999998,211.8,20.599999999999998,211.5,20.599999999999998);ctx.lineTo(211.5,20.599999999999998);ctx.bezierCurveTo(209.9,20.599999999999998,208.5,21.299999999999997,207.5,22.499999999999996);ctx.lineTo(207.5,22.499999999999996);ctx.lineTo(216.4,24.2);ctx.lineTo(216.4,24.2);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(223.7,28);ctx.bezierCurveTo(223.5,27.2,223.39999999999998,26.4,223.39999999999998,25.6);ctx.lineTo(223.39999999999998,25.6);ctx.bezierCurveTo(223.39999999999998,21.200000000000003,226.39999999999998,17.200000000000003,230.79999999999998,16.1);ctx.lineTo(230.79999999999998,16.1);ctx.bezierCurveTo(231.6,15.900000000000002,232.39999999999998,15.8,233.2,15.8);ctx.lineTo(233.2,15.8);ctx.bezierCurveTo(237.6,15.8,241.6,18.8,242.7,23.200000000000003);ctx.lineTo(242.7,23.200000000000003);ctx.bezierCurveTo(242.79999999999998,23.800000000000004,242.79999999999998,24.400000000000002,242.39999999999998,25.000000000000004);ctx.lineTo(242.39999999999998,25.000000000000004);ctx.bezierCurveTo(242.09999999999997,25.500000000000004,241.59999999999997,25.900000000000002,240.99999999999997,26.100000000000005);ctx.lineTo(240.99999999999997,26.100000000000005);ctx.lineTo(229.29999999999998,28.900000000000006);ctx.bezierCurveTo(230.29999999999998,30.000000000000007,231.7,30.700000000000006,233.2,30.700000000000006);ctx.lineTo(233.2,30.700000000000006);ctx.bezierCurveTo(233.6,30.700000000000006,234,30.700000000000006,234.39999999999998,30.500000000000007);ctx.lineTo(234.39999999999998,30.500000000000007);ctx.bezierCurveTo(235.59999999999997,30.200000000000006,236.89999999999998,30.900000000000006,237.2,32.20000000000001);ctx.lineTo(237.2,32.20000000000001);ctx.bezierCurveTo(237.5,33.50000000000001,236.79999999999998,34.70000000000001,235.5,35.00000000000001);ctx.lineTo(235.5,35.00000000000001);ctx.bezierCurveTo(234.7,35.20000000000001,233.9,35.300000000000004,233.1,35.300000000000004);ctx.lineTo(233.1,35.300000000000004);ctx.bezierCurveTo(228.8,35.4,224.8,32.5,223.7,28);ctx.lineTo(223.7,28);ctx.closePath();ctx.moveTo(232,20.7);ctx.bezierCurveTo(230.1,21.2,228.7,22.599999999999998,228.3,24.4);ctx.lineTo(228.3,24.4);ctx.lineTo(237.10000000000002,22.299999999999997);ctx.bezierCurveTo(236.10000000000002,21.199999999999996,234.8,20.599999999999998,233.3,20.599999999999998);ctx.lineTo(233.3,20.599999999999998);ctx.bezierCurveTo(232.8,20.6,232.4,20.6,232,20.7);ctx.lineTo(232,20.7);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(75.6,33.7);ctx.bezierCurveTo(75.6,33.6,75.6,33.5,75.6,33.400000000000006);ctx.lineTo(75.69999999999999,25.900000000000006);ctx.lineTo(71,25.900000000000006);ctx.bezierCurveTo(71,26.000000000000007,71,26.000000000000007,71,26.100000000000005);ctx.bezierCurveTo(70.9,28.800000000000004,68.7,30.900000000000006,66,30.800000000000004);ctx.bezierCurveTo(65.9,30.800000000000004,65.9,30.800000000000004,65.8,30.800000000000004);ctx.bezierCurveTo(63.099999999999994,30.700000000000003,60.4,35.2,65.6,35.50000000000001);ctx.bezierCurveTo(65.69999999999999,35.50000000000001,65.8,35.50000000000001,65.89999999999999,35.50000000000001);ctx.lineTo(65.89999999999999,35.50000000000001);ctx.bezierCurveTo(67.69999999999999,35.50000000000001,69.39999999999999,35.10000000000001,70.8,34.20000000000001);ctx.bezierCurveTo(70.39999999999999,36.50000000000001,68.3,38.30000000000001,65.8,38.20000000000001);ctx.bezierCurveTo(64.5,38.20000000000001,63.4,39.20000000000001,63.4,40.50000000000001);ctx.bezierCurveTo(63.4,41.800000000000004,64.4,42.800000000000004,65.6,42.900000000000006);ctx.bezierCurveTo(65.6,42.900000000000006,65.6,42.900000000000006,65.69999999999999,42.900000000000006);ctx.lineTo(65.69999999999999,42.900000000000006);ctx.bezierCurveTo(71,42.9,75.3,38.9,75.6,33.7);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(123.9,35.4);ctx.bezierCurveTo(122.60000000000001,35.3,121.7,34.199999999999996,121.80000000000001,32.9);ctx.lineTo(122.4,25.5);ctx.bezierCurveTo(122.60000000000001,22.9,120.80000000000001,20.6,118.2,20.2);ctx.bezierCurveTo(118.10000000000001,20.2,117.9,20.2,117.8,20.2);ctx.lineTo(116,20.099999999999998);ctx.bezierCurveTo(116.2,20.999999999999996,116.2,21.799999999999997,116.2,22.599999999999998);ctx.lineTo(115.4,32.5);ctx.bezierCurveTo(115.30000000000001,33.8,114.2,34.7,112.9,34.6);ctx.bezierCurveTo(111.60000000000001,34.5,110.7,33.4,110.80000000000001,32.1);ctx.lineTo(111.60000000000001,22.200000000000003);ctx.bezierCurveTo(111.60000000000001,21.700000000000003,111.50000000000001,20.900000000000002,111.30000000000001,20.400000000000002);ctx.bezierCurveTo(111.20000000000002,20.1,111.00000000000001,20.000000000000004,110.9,19.900000000000002);ctx.bezierCurveTo(110.80000000000001,19.8,110.7,19.8,110.5,19.700000000000003);ctx.lineTo(110.4,19.700000000000003);ctx.lineTo(110.4,19.700000000000003);ctx.bezierCurveTo(107.80000000000001,19.500000000000004,105.5,21.300000000000004,105.10000000000001,23.900000000000002);ctx.bezierCurveTo(105.10000000000001,24.000000000000004,105.10000000000001,24.200000000000003,105.10000000000001,24.3);ctx.lineTo(104.50000000000001,31.700000000000003);ctx.bezierCurveTo(104.40000000000002,33,103.30000000000001,33.900000000000006,102.00000000000001,33.800000000000004);ctx.bezierCurveTo(100.70000000000002,33.7,99.80000000000001,32.6,99.90000000000002,31.300000000000004);ctx.lineTo(100.50000000000001,23.900000000000006);ctx.bezierCurveTo(100.50000000000001,23.700000000000006,100.50000000000001,23.400000000000006,100.60000000000001,23.200000000000006);ctx.bezierCurveTo(101.4,18.300000000000004,105.80000000000001,14.700000000000006,111.00000000000001,15.100000000000007);ctx.lineTo(111.00000000000001,15.100000000000007);ctx.lineTo(111.00000000000001,15.100000000000007);ctx.lineTo(118.50000000000001,15.700000000000006);ctx.bezierCurveTo(118.70000000000002,15.700000000000006,119.00000000000001,15.700000000000006,119.20000000000002,15.800000000000006);ctx.lineTo(119.20000000000002,15.800000000000006);ctx.bezierCurveTo(124.10000000000002,16.600000000000005,127.70000000000002,21.000000000000007,127.30000000000001,26.10000000000001);ctx.lineTo(126.70000000000002,33.50000000000001);ctx.bezierCurveTo(126.4,34.6,125.2,35.5,123.9,35.4);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(175.6,16.6);ctx.bezierCurveTo(174.29999999999998,16.5,173.2,17.5,173.1,18.8);ctx.lineTo(172.5,26.200000000000003);ctx.bezierCurveTo(172.3,28.800000000000004,170.1,30.800000000000004,167.6,30.800000000000004);ctx.bezierCurveTo(167.5,30.800000000000004,167.29999999999998,30.800000000000004,167.2,30.800000000000004);ctx.lineTo(165.39999999999998,30.700000000000003);ctx.bezierCurveTo(165.7,29.900000000000002,165.89999999999998,29.000000000000004,165.99999999999997,28.300000000000004);ctx.lineTo(166.69999999999996,18.400000000000006);ctx.bezierCurveTo(166.79999999999995,17.100000000000005,165.79999999999995,16.000000000000007,164.59999999999997,15.900000000000006);ctx.bezierCurveTo(163.29999999999995,15.800000000000006,162.19999999999996,16.800000000000004,162.09999999999997,18.100000000000005);ctx.lineTo(161.29999999999995,28.000000000000007);ctx.bezierCurveTo(161.29999999999995,28.500000000000007,160.99999999999994,29.300000000000008,160.69999999999996,29.800000000000008);ctx.bezierCurveTo(160.49999999999997,30.000000000000007,160.39999999999995,30.200000000000006,160.19999999999996,30.300000000000008);ctx.bezierCurveTo(160.09999999999997,30.40000000000001,159.99999999999997,30.40000000000001,159.79999999999995,30.40000000000001);ctx.lineTo(159.69999999999996,30.40000000000001);ctx.lineTo(159.69999999999996,30.40000000000001);ctx.bezierCurveTo(157.09999999999997,30.20000000000001,155.09999999999997,28.00000000000001,155.09999999999997,25.500000000000007);ctx.bezierCurveTo(155.09999999999997,25.400000000000006,155.09999999999997,25.200000000000006,155.09999999999997,25.10000000000001);ctx.lineTo(155.69999999999996,17.70000000000001);ctx.bezierCurveTo(155.79999999999995,16.40000000000001,154.79999999999995,15.30000000000001,153.49999999999997,15.20000000000001);ctx.bezierCurveTo(152.2,15.10000000000001,151.09999999999997,16.10000000000001,150.99999999999997,17.40000000000001);ctx.lineTo(150.39999999999998,24.80000000000001);ctx.bezierCurveTo(150.39999999999998,25.00000000000001,150.39999999999998,25.30000000000001,150.39999999999998,25.50000000000001);ctx.bezierCurveTo(150.39999999999998,30.50000000000001,154.2,34.70000000000001,159.29999999999998,35.10000000000001);ctx.lineTo(159.29999999999998,35.10000000000001);ctx.lineTo(159.29999999999998,35.10000000000001);ctx.lineTo(166.79999999999998,35.70000000000001);ctx.bezierCurveTo(166.99999999999997,35.70000000000001,167.29999999999998,35.70000000000001,167.49999999999997,35.70000000000001);ctx.lineTo(167.49999999999997,35.70000000000001);ctx.bezierCurveTo(172.49999999999997,35.70000000000001,176.69999999999996,31.80000000000001,177.19999999999996,26.80000000000001);ctx.lineTo(177.79999999999995,19.400000000000013);ctx.bezierCurveTo(177.9,17.8,176.9,16.7,175.6,16.6);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(199.8,32.2);ctx.lineTo(199.8,32.2);ctx.lineTo(199.4,24.800000000000004);ctx.bezierCurveTo(199.1,19.700000000000003,194.9,15.700000000000005,189.70000000000002,15.700000000000005);ctx.bezierCurveTo(189.50000000000003,15.700000000000005,189.4,15.700000000000005,189.20000000000002,15.700000000000005);ctx.bezierCurveTo(187.4,15.800000000000004,185.70000000000002,16.400000000000006,184.3,17.300000000000004);ctx.lineTo(184,8.6);ctx.bezierCurveTo(183.9,7.3,182.8,6.3,181.5,6.3999999999999995);ctx.bezierCurveTo(180.2,6.499999999999999,179.2,7.6,179.3,8.799999999999999);ctx.lineTo(180.5,33.199999999999996);ctx.bezierCurveTo(180.5,33.3,180.5,33.49999999999999,180.6,33.599999999999994);ctx.bezierCurveTo(180.6,33.699999999999996,180.6,33.8,180.7,33.8);ctx.bezierCurveTo(180.7,33.8,180.7,33.8,180.7,33.9);ctx.lineTo(180.7,34);ctx.bezierCurveTo(180.7,34,180.7,34.1,180.79999999999998,34.1);ctx.bezierCurveTo(180.79999999999998,34.2,180.89999999999998,34.2,180.89999999999998,34.300000000000004);ctx.lineTo(180.89999999999998,34.300000000000004);ctx.bezierCurveTo(180.89999999999998,34.300000000000004,180.89999999999998,34.400000000000006,180.99999999999997,34.400000000000006);ctx.bezierCurveTo(180.99999999999997,34.400000000000006,180.99999999999997,34.50000000000001,181.09999999999997,34.50000000000001);ctx.bezierCurveTo(181.09999999999997,34.50000000000001,181.09999999999997,34.50000000000001,181.09999999999997,34.60000000000001);ctx.lineTo(181.19999999999996,34.70000000000001);ctx.lineTo(181.29999999999995,34.80000000000001);ctx.lineTo(181.29999999999995,34.80000000000001);ctx.bezierCurveTo(181.29999999999995,34.80000000000001,181.39999999999995,34.90000000000001,181.49999999999994,34.90000000000001);ctx.lineTo(181.49999999999994,34.90000000000001);ctx.bezierCurveTo(181.89999999999995,35.20000000000001,182.39999999999995,35.40000000000001,182.89999999999995,35.40000000000001);ctx.lineTo(182.99999999999994,35.40000000000001);ctx.bezierCurveTo(184.29999999999995,35.30000000000001,185.29999999999995,34.20000000000001,185.19999999999993,32.90000000000001);ctx.lineTo(184.79999999999993,25.500000000000014);ctx.bezierCurveTo(184.79999999999993,25.400000000000013,184.79999999999993,25.300000000000015,184.79999999999993,25.200000000000014);ctx.bezierCurveTo(184.79999999999993,22.600000000000012,186.89999999999992,20.400000000000013,189.49999999999991,20.200000000000014);ctx.lineTo(189.49999999999991,20.200000000000014);ctx.bezierCurveTo(189.5999999999999,20.200000000000014,189.6999999999999,20.200000000000014,189.6999999999999,20.200000000000014);ctx.bezierCurveTo(192.2999999999999,20.200000000000014,194.49999999999991,22.300000000000015,194.6999999999999,24.900000000000013);ctx.lineTo(195.0999999999999,32.30000000000001);ctx.bezierCurveTo(195.1999999999999,33.60000000000001,196.2999999999999,34.60000000000001,197.49999999999991,34.500000000000014);ctx.bezierCurveTo(198.9,34.6,199.9,33.5,199.8,32.2);ctx.closePath();ctx.moveTo(189.3,15.7);ctx.lineTo(189.3,15.7);ctx.lineTo(189.3,15.7);ctx.lineTo(189.3,15.7);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(247.1,35.4);ctx.bezierCurveTo(245.79999999999998,35.4,244.79999999999998,34.3,244.79999999999998,33);ctx.lineTo(244.79999999999998,33);ctx.lineTo(245.29999999999998,8.600000000000001);ctx.bezierCurveTo(245.29999999999998,7.300000000000002,246.39999999999998,6.300000000000002,247.7,6.300000000000002);ctx.lineTo(247.7,6.300000000000002);ctx.bezierCurveTo(249,6.300000000000002,250,7.400000000000002,250,8.700000000000001);ctx.lineTo(250,8.700000000000001);ctx.lineTo(249.5,33.2);ctx.bezierCurveTo(249.4,34.4,248.4,35.4,247.1,35.4);ctx.lineTo(247.1,35.4);ctx.lineTo(247.1,35.4);ctx.lineTo(247.1,35.4);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(95.4,35);ctx.bezierCurveTo(94.10000000000001,35.1,93,34.1,92.9,32.9);ctx.lineTo(92.80000000000001,32.6);ctx.lineTo(96.9,25.200000000000003);ctx.lineTo(97.7,32.6);ctx.bezierCurveTo(97.7,33.8,96.8,34.9,95.4,35);ctx.lineTo(95.4,35);ctx.bezierCurveTo(95.5,35,95.5,35,95.4,35);ctx.lineTo(95.4,35);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.save();ctx.fillStyle=this._colorSettings[this._theme]['base'];ctx.beginPath();ctx.moveTo(129.1,28.1);ctx.bezierCurveTo(128.9,27.3,128.79999999999998,26.5,128.79999999999998,25.700000000000003);ctx.lineTo(128.79999999999998,25.700000000000003);ctx.bezierCurveTo(128.79999999999998,21.300000000000004,131.79999999999998,17.300000000000004,136.2,16.200000000000003);ctx.lineTo(136.2,16.200000000000003);ctx.bezierCurveTo(137,16.000000000000004,137.79999999999998,15.900000000000002,138.6,15.900000000000002);ctx.lineTo(138.6,15.900000000000002);ctx.bezierCurveTo(143,15.900000000000002,147,18.900000000000002,148.1,23.300000000000004);ctx.lineTo(148.1,23.300000000000004);ctx.bezierCurveTo(148.2,23.900000000000006,148.2,24.500000000000004,147.79999999999998,25.100000000000005);ctx.lineTo(147.79999999999998,25.100000000000005);ctx.bezierCurveTo(147.49999999999997,25.600000000000005,146.99999999999997,26.000000000000004,146.39999999999998,26.200000000000006);ctx.lineTo(146.39999999999998,26.200000000000006);ctx.lineTo(134.7,29);ctx.bezierCurveTo(135.7,30.1,137.1,30.8,138.6,30.8);ctx.lineTo(138.6,30.8);ctx.bezierCurveTo(139,30.8,139.4,30.8,139.79999999999998,30.6);ctx.lineTo(139.79999999999998,30.6);ctx.bezierCurveTo(140.99999999999997,30.3,142.29999999999998,31,142.6,32.300000000000004);ctx.lineTo(142.6,32.300000000000004);ctx.bezierCurveTo(142.9,33.6,142.2,34.800000000000004,140.9,35.1);ctx.lineTo(140.9,35.1);ctx.bezierCurveTo(140.1,35.300000000000004,139.3,35.4,138.5,35.4);ctx.lineTo(138.5,35.4);ctx.bezierCurveTo(134.2,35.5,130.2,32.5,129.1,28.1);ctx.lineTo(129.1,28.1);ctx.closePath();ctx.moveTo(137.3,20.8);ctx.bezierCurveTo(135.4,21.3,134,22.7,133.60000000000002,24.5);ctx.lineTo(133.60000000000002,24.5);ctx.lineTo(142.40000000000003,22.4);ctx.bezierCurveTo(141.40000000000003,21.299999999999997,140.10000000000002,20.7,138.60000000000002,20.7);ctx.lineTo(138.60000000000002,20.7);ctx.bezierCurveTo(138.2,20.6,137.8,20.7,137.3,20.8);ctx.lineTo(137.3,20.8);ctx.closePath();ctx.fill();ctx.stroke();ctx.restore();ctx.restore();ctx.restore();},_rgb2hsl:function(hex){var r=parseInt(hex.substring(1,3),16);var g=parseInt(hex.substring(3,5),16);var b=parseInt(hex.substring(5,7),16);r/=255,g/=255,b/=255;var max=Math.max(r,g,b),min=Math.min(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0;}else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
h/=6;}
return[h,s,l];}});});

// lib/gamewheel/extensions/entityScaling.js
ig.baked=true;ig.module('gamewheel.extensions.entityScaling').requires('impact.entity').defines(function(){"use strict";ig.Entity.inject({scale:{x:1,y:1},scalePoint:null,draw:function(){if(this.currentAnim){if(this.scale.x!=1||this.scale.y!=1){var sx=this.scale.x/ig.system.scale;var sy=this.scale.y/ig.system.scale;if(!this.scalePoint){this.scalePoint={x:this.currentAnim.sheet.width/2,y:this.currentAnim.sheet.height/2}}
var ox=this.offset.x+(this.scalePoint.x*sx)-this.scalePoint.x;var oy=this.offset.y+(this.scalePoint.y*sy)-this.scalePoint.y;ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(this.pos.x-ox-ig.game._rscreen.x),ig.system.getDrawPos(this.pos.y-oy-ig.game._rscreen.y));ig.system.context.scale(sx,sy);this.currentAnim.draw(0,0);ig.system.context.restore();}else{this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}}}});});

// lib/gamewheel/entities/particle.js
ig.baked=true;ig.module('gamewheel.entities.particle').requires('impact.entity','gamewheel.helpers.util','gamewheel.extensions.entityScaling').defines(function(){ig.global.EntityParticle=ig.Entity.extend({sheetImageName:null,imageName:null,maxVel:{x:2000,y:2000},maxVelRange:null,friction:{x:0,y:0},lifeTime:0.7,lifeTimeRange:null,fadeOutTime:0.3,fadeInTime:0,movementSpeed:null,movementSpeedRange:0,movementAngle:null,movementAngleRange:0,movementAccel:null,movementAccelRange:0,angularVel:0,angularVelRange:0,randomizeAngle:false,scaleVel:{x:0,y:0},scaleRange:undefined,init:function(x,y,settings){this.parent(x,y,settings);this.idleTimer=new ig.Timer();if(this.sheetImageName){var sheet=ig.content.imageNamed(this.sheetImageName);if(sheet){this.animSheet=new ig.AnimationSheet(sheet.path,this.size.x,this.size.y);var frames=Math.floor(sheet.width/this.size.x)*Math.floor(sheet.height/this.size.y);this.anims['idle']=new ig.Animation(this.animSheet,10,[ig.util.randomInt(frames)],false);this.currentAnim=this.anims['idle'];}}else if(this.imageName){var image=ig.content.imageNamed(this.imageName);if(image){this.animSheet=new ig.AnimationSheet(image.path,image.width,image.height);this.anims['idle']=new ig.Animation(this.animSheet,1,[0],false);this.currentAnim=this.anims['idle'];this.size={x:image.width,y:image.height};}}
if(!settings.offset){this.offset={x:this.size.x/2,y:this.size.y/2};}
if(this.movementSpeed!==null&&this.movementAngle!==null){var speed=ig.util.rangedFloat(this.movementSpeed,this.movementSpeedRange);var angle=ig.util.rangedFloat(this.movementAngle,this.movementAngleRange);this.vel=this.getMovement(angle,speed);if(this.movementAccel!==null){var accel=ig.util.rangedFloat(this.movementAccel,this.movementAccelRange);this.accel=this.getMovement(angle,accel);}}
if(this.randomizeAngle){this.currentAnim.angle=ig.util.randomFloat(Math.PI*2);}
if(this.angularVelRange){this.angularVel=ig.util.rangedFloat(this.angularVel,this.angularVelRange);}
if(this.lifeTimeRange){this.lifeTime=ig.util.rangedFloat(this.lifeTime,this.lifeTimeRange);}
if(this.maxVelRange){this.maxVel={x:ig.util.rangedFloat(this.maxVel.x,this.maxVelRange.x),y:ig.util.rangedFloat(this.maxVel.y,this.maxVelRange.y)};}
if(this.scaleRange){var mod=ig.util.rangedFloat(0,this.scaleRange);this.scale={x:this.scale.x+mod,y:this.scale.y+mod};}},setMovement:function(angle,speed){this.vel=this.getMovement(angle,speed);},getMovement:function(angle,speed){return{x:Math.cos(angle)*speed,y:Math.sin(angle)*speed};},update:function(){if(this.lifeTime>0&&this.idleTimer.delta()>this.lifeTime){this.kill();}else{if(this.scaleVel.x!==0||this.scaleVel.y!==0){this.scale.x+=(this.scaleVel.x*ig.system.tick);this.scale.y+=(this.scaleVel.y*ig.system.tick);}
if(this.currentAnim){if(this.idleTimer.delta()<=this.fadeInTime){this.currentAnim.alpha=this.idleTimer.delta().map(0,this.fadeInTime,0,1);}else{this.currentAnim.alpha=this.idleTimer.delta().map(this.lifeTime-this.fadeOutTime,this.lifeTime,1,0);}
this.currentAnim.angle+=(this.angularVel*ig.system.tick);}
this.parent();}}});});

// lib/gamewheel/entities/particleEmitter.js
ig.baked=true;ig.module('gamewheel.entities.particleEmitter').requires('impact.entity','gamewheel.entities.particle','gamewheel.helpers.util').defines(function(){ig.global.EntityParticleEmitter=ig.Entity.extend({size:{x:100,y:100},particlesPerSecond:3,disable:false,maxParticles:0,configParticleName:undefined,particleSetup:undefined,spawnCallback:undefined,sortEntitiesOnSpawn:true,zIndexIncrease:0.00001,centeredPos:false,_timeSinceSpawn:0,_spawnCount:0,init:function(x,y,settings){this.parent(x,y,settings);if(this.configParticleName){this.particleSetup=ig.config.entities[this.configParticleName];}},pause:function(duration){this._timeSinceSpawn=-duration;},draw:function(){},reset:function(){this._spawnCount=0;this._timeSinceSpawn=0;},update:function(){this.parent();if(!this.disable&&(this.maxParticles<=0||this._spawnCount<this.maxParticles)){this._timeSinceSpawn+=ig.system.tick;while(this._timeSinceSpawn>1/this.particlesPerSecond){this._timeSinceSpawn-=1/this.particlesPerSecond;this.spawnParticle();}}},spawnParticle:function(){if(this.particleSetup){this._spawnCount++;var x=this.pos.x+ig.util.randomFloat(this.size.x);var y=this.pos.y+ig.util.randomFloat(this.size.y);if(this.centeredPos){x-=this.size.x/2;y-=this.size.y/2;}
var p=ig.game.spawnEntityWithSetup(this.particleSetup,{pos:{x:x,y:y}});if(this.particleSetup.zIndex===undefined){p.zIndex=this.zIndex+(this._spawnCount*this.zIndexIncrease);}
if(this.spawnCallback){this.spawnCallback(p,x,y);}
if(this.sortEntitiesOnSpawn){ig.game.sortEntitiesDeferred();}}}});});

// lib/gamewheel/prefabs/confettiPrefabs.js
ig.baked=true;ig.module('gamewheel.prefabs.confettiPrefabs').requires('gamewheel.entities.particleEmitter').defines(function(){"use strict";ig.Prefabs=ig.Prefabs||{};ig.Prefabs.confetti={type:ig.global.EntityParticleEmitter,settings:{pos:{x:0,y:-60},size:{x:640,y:140},particlesPerSecond:400,maxParticles:170,particleSetup:{type:ig.global.EntityParticle,image:'pf_Confetti',animated:{frameSize:{x:20,y:20},animations:{yellow:{frames:[0,1,3,4,2,5,6],frameTime:0.1,loop:true},blue:{frames:[7,8,9,10,11,12,13],frameTime:0.1,loop:true},green:{frames:[14,15,16,17,18,19,20],frameTime:0.1,loop:true},red:{frames:[21,22,23,24,25,26,27],frameTime:0.1,loop:true}}},settings:{size:{x:20,y:20},scale:{x:1,y:1},scaleRange:0.6,accel:{x:0,y:200},maxVel:{x:0,y:100},maxVelRange:{x:0,y:100},lifeTime:2.5,lifeTimeRange:1,fadeOutTime:0.8,fadeInTime:0.3,randomizeAngle:true,angularVelRange:2.5}},sortEntitiesOnSpawn:true,zIndex:100,spawnCallback:function(p,x,y){p.currentAnim=p.anims[['yellow','blue','green','red'].random()];}},assets:{images:{pf_Confetti:'pf_Confetti.png'}}};});

// lib/gamewheel/prefabs/balloonPrefabs.js
ig.baked=true;ig.module('gamewheel.prefabs.balloonPrefabs').requires('gamewheel.entities.particleEmitter').defines(function(){"use strict";ig.Prefabs=ig.Prefabs||{};ig.Prefabs.hearts={type:ig.global.EntityParticleEmitter,settings:{pos:{x:0,y:1000},size:{x:640,y:10},particlesPerSecond:18,maxParticles:40,particleSetup:{type:ig.global.EntityParticle,settings:{imageName:'pf_Heart',scale:{x:1,y:1},vel:{x:0,y:-70},accel:{x:0,y:-220},maxVel:{x:0,y:800},lifeTime:4,fadeOutTime:0,fadeInTime:0,randomizeAngle:false}},sortEntitiesOnSpawn:true,zIndex:100},assets:{images:{pf_Heart:'pf_Heart.png'}}};ig.Prefabs.balloons={type:ig.global.EntityParticleEmitter,settings:{pos:{x:0,y:1020},size:{x:640,y:10},particlesPerSecond:15,maxParticles:30,particleSetup:{type:ig.global.EntityParticle,settings:{sheetImageName:'pf_Balloons',size:{x:77,y:119},scale:{x:0.87,y:0.87},scaleRange:0.25,vel:{x:0,y:-100},accel:{x:0,y:-180},maxVel:{x:0,y:350},maxVelRange:{x:0,y:50},lifeTime:4,fadeOutTime:0,fadeInTime:0,randomizeAngle:false}},sortEntitiesOnSpawn:true,zIndex:100},assets:{images:{pf_Balloons:'pf_Balloons.png'}}};});

// lib/gamewheel/prefabs/starPrefabs.js
ig.baked=true;ig.module('gamewheel.prefabs.starPrefabs').requires('gamewheel.entities.particleEmitter').defines(function(){"use strict";ig.Prefabs=ig.Prefabs||{};ig.Prefabs.glowStars={type:ig.global.EntityParticleEmitter,settings:{pos:{x:10,y:10},size:{x:620,y:940},particlesPerSecond:10,maxParticles:40,particleSetup:{type:ig.global.EntityParticle,settings:{imageName:'pf_GlowStar',scale:{x:0.1,y:0.1},maxVel:{x:0,y:0},scaleVel:{x:0.6,y:0.6},lifeTime:1.1,fadeOutTime:0.5,fadeInTime:0.2,randomizeAngle:true,angularVelRange:3}},sortEntitiesOnSpawn:true,zIndex:100},assets:{images:{pf_GlowStar:'pf_GlowStar.png'}}};ig.Prefabs.glitterStars={type:ig.global.EntityParticleEmitter,settings:{pos:{x:10,y:10},size:{x:620,y:940},particlesPerSecond:150,maxParticles:500,particleSetup:{type:ig.global.EntityParticle,settings:{sheetImageName:'pf_GlitterStar',size:{x:12,y:13},maxVel:{x:0,y:0},scaleVel:{x:0.3,y:0.3},lifeTime:1.2,fadeOutTime:0.5,fadeInTime:0.7,randomizeAngle:true,angularVelRange:2}},sortEntitiesOnSpawn:true,zIndex:100},assets:{images:{pf_GlitterStar:'pf_GlitterStar.png'}}};ig.Prefabs.stars={type:ig.global.EntityParticleEmitter,settings:{pos:{x:10,y:10},size:{x:620,y:940},particlesPerSecond:15,maxParticles:50,particleSetup:{type:ig.global.EntityParticle,settings:{imageName:'pf_Star',scale:{x:0.3,y:0.3},maxVel:{x:0,y:0},scaleVel:{x:0.3,y:0.3},lifeTime:2.2,fadeOutTime:0.4,fadeInTime:1,randomizeAngle:true,angularVelRange:3}},sortEntitiesOnSpawn:true,zIndex:100,zIndexzIndexIncrease:-0.0001},assets:{images:{pf_Star:'pf_Star.png'}}};});

// lib/gamewheel/prefabs/rainPrefabs.js
ig.baked=true;ig.module('gamewheel.prefabs.rainPrefabs').requires('gamewheel.entities.particleEmitter').defines(function(){"use strict";ig.Prefabs=ig.Prefabs||{};ig.Prefabs.cometShower={type:ig.global.EntityParticleEmitter,settings:{pos:{x:10,y:-80},size:{x:620,y:10},particlesPerSecond:5,maxParticles:null,particleSetup:{type:ig.global.EntityParticle,settings:{imageName:'pf_BlueComet',vel:{x:0,y:400},lifeTime:4,fadeOutTime:0,fadeInTime:0,randomizeAngle:false}},sortEntitiesOnSpawn:true,zIndex:-1},assets:{images:{pf_BlueComet:'pf_BlueComet.png'}}};ig.Prefabs.coins={type:ig.global.EntityParticleEmitter,settings:{pos:{x:10,y:-80},size:{x:620,y:10},particlesPerSecond:18,maxParticles:40,particleSetup:{type:ig.global.EntityParticle,image:'pf_Coin',animated:{frameSize:{x:83,y:92},animations:{idle:{frames:[0,1,2,3,4,5,6,7],frameTime:0.1,loop:true}}},settings:{scale:{x:0.8,y:0.8},vel:{x:0,y:200},accel:{x:0,y:1000},lifeTime:4,fadeOutTime:0,fadeInTime:0,randomizeAngle:false}},sortEntitiesOnSpawn:true,zIndex:100},assets:{images:{pf_Coin:'pf_Coin.png'}}};});

// lib/gamewheel/prefabs/fireworksPrefabs.js
ig.baked=true;ig.module('gamewheel.prefabs.fireworksPrefabs').requires('gamewheel.entities.particleEmitter').defines(function(){"use strict";ig.Prefabs=ig.Prefabs||{};ig.Prefabs.fireworks={spawn:function(){var fw={type:ig.global.EntityParticleEmitter,settings:{pos:{x:170,y:170},size:{x:5,y:5},particlesPerSecond:300,maxParticles:40,particleSetup:{type:ig.global.EntityParticle,image:'pf_ColoredStars',animated:{frameSize:{x:55,y:55},animations:{idle:{frames:[1],frameTime:2}}},settings:{scale:{x:0.1,y:0.1},scaleVel:{x:0.6,y:0.6},lifeTime:0.6,fadeOutTime:0.2,fadeInTime:0.3,randomizeAngle:true,angularVelRange:3,movementAngleRange:6.28,movementAngle:0,movementSpeed:300,movementSpeedRange:300}},sortEntitiesOnSpawn:true,zIndex:100,zIndexzIndexIncrease:-0.0001}};var emitter=ig.game.spawnEntityWithSetup(fw);ig.game.runActivity(null,ig.activity.sequence([ig.activity.pause(0.2),ig.activity.runCallback(function(){emitter.particleSetup.animated.animations.idle.frames=[2];emitter.pos={x:500,y:640};emitter.reset();}),ig.activity.pause(0.35),ig.activity.runCallback(function(){emitter.particleSetup.animated.animations.idle.frames=[3];emitter.pos={x:420,y:270};emitter.reset();}),ig.activity.pause(0.5),ig.activity.runCallback(function(){emitter.particleSetup.animated.animations.idle.frames=[4];emitter.pos={x:250,y:700};emitter.reset();}),ig.activity.pause(0.3),ig.activity.runCallback(function(){emitter.particleSetup.animated.animations.idle.frames=[0];emitter.pos={x:320,y:480};emitter.reset();})]));},assets:{images:{pf_ColoredStars:'pf_ColoredStars.png'}}};});

// lib/gamewheel/prefabs/prefabCollection.js
ig.baked=true;ig.module('gamewheel.prefabs.prefabCollection').requires('impact.impact','gamewheel.core.content','gamewheel.core.game','gamewheel.prefabs.confettiPrefabs','gamewheel.prefabs.balloonPrefabs','gamewheel.prefabs.starPrefabs','gamewheel.prefabs.rainPrefabs','gamewheel.prefabs.fireworksPrefabs').defines(function(){"use strict";ig.Prefabs=ig.Prefabs||{};ig.Prefabs.gwMediaPath=ig.Prefabs.gwMediaPath||'lib/gamewheel/media/';ig.Game.inject({spawnPrefab:function(type,settings){var prefabObject=typeof(type)==='string'?ig.Prefabs[type]:type;if(!prefabObject){throw("Can't spawn prefab of type "+type);}
if(prefabObject.settings&&settings){ig.merge(prefabObject.settings,settings);}
if(typeof(prefabObject.spawn)==='function'){return prefabObject.spawn();}else{return ig.game.spawnEntityWithSetup(prefabObject);}}});ig.Prefabs.collectAssets=function(){var prefabList=[];var scenes=ig.config['scenes'];for(var sceneName in scenes){if(scenes.hasOwnProperty(sceneName)){var ss=scenes[sceneName]['settings'];if(ss&&ss['prefabs']){if(ss['prefabs'].constructor===Array){Array.prototype.push.apply(prefabList,ss['prefabs']);}else if(ss['prefabs'].constructor===String){prefabList.push(ss['prefabs']);}}}}
var assets={};for(var i=0;i<prefabList.length;i++){var pf=ig.Prefabs[prefabList[i]];if(pf&&pf['assets']){ig.merge(assets,pf['assets']);}}
return assets;};ig.content.load(ig.Prefabs.collectAssets(),(ig.baked?ig.config.mediaPath:ig.Prefabs.gwMediaPath)||'media/');});

// lib/gamewheel/entities/realText.js
ig.baked=true;ig.module('gamewheel.entities.realText').requires('impact.entity','gamewheel.core.localization').defines(function(){"use strict";ig.global.EntityRealText=ig.Entity.extend({align:'left',alpha:1,baseline:'top',color:'#FFFFFF',_font:'20px Garamond',_text:'',wrapWidth:null,textRect:{x:0,y:0,width:0,height:0},_lineHeight:20,centerOnPosX:false,centerOnPosY:false,_linesToRender:[],_drawOffset:{x:0,y:0},_initComplete:false,init:function(x,y,settings){Object.defineProperty(this,"text",{get:this._getText,set:this._setText});Object.defineProperty(this,"font",{get:this._getFont,set:this._setFont});if(settings['textKey']){settings.text=ig.localization.textForKey(settings['textKey'])||settings.text||this._text;}
this.parent(x,y,settings);this._initComplete=true;this.wrapText();},_getText:function(){return this._text;},_setText:function(value){this._text=value;this.wrapText();},_getFont:function(){return this._font;},_setFont:function(value){this._font=value;this.wrapText();},_configureContext:function(context){if(context===ig.system.context){if(!ig.game._fontCache||ig.game._fontCache!==this._font){ig.game._fontCache=this._font;context.font=this._font;}}else{context.font=this._font;}
context.textAlign=this.align;context.textBaseline=this.baseline;context.fillStyle=this.color;},wrapText:function(){if(!this._initComplete){return;}
this._lineHeight=this._getFontHeight(this._font);var ctx=ig.system.context;this._configureContext(ctx);this._linesToRender=[];var totalWidth=0;var lines=this._text.split("\n");for(var i=0;i<lines.length;i++){var line=null;if(this.wrapWidth){var words=lines[i].split(' ');for(var n=0;n<words.length;n++){var testLine=(line!==null?line+" ":"")+words[n];var testWidth=ctx.measureText(testLine).width;if(testWidth<=this.wrapWidth||!line){line=testLine;totalWidth=Math.max(totalWidth,testWidth);}else{this._linesToRender.push(line);line=null;n--;}}}else{line=lines[i];totalWidth=Math.max(totalWidth,ctx.measureText(line).width);}
this._linesToRender.push(line);}
this.size={x:totalWidth,y:this._linesToRender.length*this._lineHeight};var multiplierX=0;if(this.centerOnPosX){if(this.align=='center'){multiplierX=0;}else if(this.align=='right'){multiplierX=0.5;}else{multiplierX=-0.5;}}
this._drawOffset={x:totalWidth*multiplierX,y:this.centerOnPosY?this._linesToRender.length*this._lineHeight*-0.5:0};var areaOffset=0;if(this.align=='center'){areaOffset=totalWidth*-0.5}else if(this.align=='right'){areaOffset=-totalWidth}
this.textRect={x:this.pos.x+this._drawOffset.x+areaOffset,y:this.pos.y+this._drawOffset.y,width:totalWidth,height:this._linesToRender.length*this._lineHeight};},draw:function(){this.parent();this.drawText(ig.system.context);},drawText:function(context){this._configureContext(context);if(this.alpha!=1){context.globalAlpha=this.alpha;}
var x=this.pos.x+this._drawOffset.x;var y=this.pos.y+this._drawOffset.y;for(var i=0;i<this._linesToRender.length;i++){context.fillText(this._linesToRender[i],x,y);y+=this._lineHeight;}
if(this.alpha!=1){context.globalAlpha=1;}},_getFontHeight:function(fontStyle)
{var result=ig.global.EntityRealText.FontHeightCache[fontStyle];if(!result)
{var body=document.getElementsByTagName('body')[0];var dummy=document.createElement('div');var dummyText=document.createTextNode('M');dummy.appendChild(dummyText);dummy.setAttribute('style',"font: "+fontStyle+';position:absolute;top:0;left:0');body.appendChild(dummy);result=dummy.offsetHeight;ig.global.EntityRealText.FontHeightCache[fontStyle]=result;body.removeChild(dummy);}
return result;}});ig.global.EntityRealText.FontHeightCache={};});

// lib/gamewheel/helpers/easing.js
ig.baked=true;ig.module('gamewheel.helpers.easing').defines(function(){"use strict";if(!ig.util){ig.util={};}
ig.util.linearTween=function(time,start,change,duration){return change*time/duration+start;};ig.util.easeInQuad=function(time,start,change,duration){time/=duration;return change*time*time+start;};ig.util.easeOutQuad=function(time,start,change,duration){time/=duration;return-change*time*(time-2)+start;};ig.util.easeInOutQuad=function(time,start,change,duration){time/=duration/2;if(time<1)return change/2*time*time+start;time--;return-change/2*(time*(time-2)-1)+start;};ig.util.easeInCubic=function(time,start,change,duration){time/=duration;return change*time*time*time+start;};ig.util.easeOutCubic=function(time,start,change,duration){time/=duration;time--;return change*(time*time*time+1)+start;};ig.util.easeInOutCubic=function(time,start,change,duration){time/=duration/2;if(time<1)return change/2*time*time*time+start;time-=2;return change/2*(time*time*time+2)+start;};ig.util.easeInQuart=function(time,start,change,duration){time/=duration;return change*time*time*time*time+start;};ig.util.easeOutQuart=function(time,start,change,duration){time/=duration;time--;return-change*(time*time*time*time-1)+start;};ig.util.easeInOutQuart=function(time,start,change,duration){time/=duration/2;if(time<1)return change/2*time*time*time*time+start;time-=2;return-change/2*(time*time*time*time-2)+start;};ig.util.easeInQuint=function(time,start,change,duration){time/=duration;return change*time*time*time*time*time+start;};ig.util.easeOutQuint=function(time,start,change,duration){time/=duration;time--;return change*(time*time*time*time*time+1)+start;};ig.util.easeInOutQuint=function(time,start,change,duration){time/=duration/2;if(time<1)return change/2*time*time*time*time*time+start;time-=2;return change/2*(time*time*time*time*time+2)+start;};ig.util.easeInSine=function(time,start,change,duration){return-change*Math.cos(time/duration*(Math.PI/2))+change+start;};ig.util.easeOutSine=function(time,start,change,duration){return change*Math.sin(time/duration*(Math.PI/2))+start;};ig.util.easeInOutSine=function(time,start,change,duration){return-change/2*(Math.cos(Math.PI*time/duration)-1)+start;};ig.util.easeInExpo=function(time,start,change,duration){return change*Math.pow(2,10*(time/duration-1))+start;};ig.util.easeOutExpo=function(time,start,change,duration){return change*(-Math.pow(2,-10*time/duration)+1)+start;};ig.util.easeInOutExpo=function(time,start,change,duration){time/=duration/2;if(time<1)return change/2*Math.pow(2,10*(time-1))+start;time--;return change/2*(-Math.pow(2,-10*time)+2)+start;};ig.util.easeInCirc=function(time,start,change,duration){time/=duration;return-change*(Math.sqrt(1-time*time)-1)+start;};ig.util.easeOutCirc=function(time,start,change,duration){time/=duration;time--;return change*Math.sqrt(1-time*time)+start;};ig.util.easeInOutCirc=function(time,start,change,duration){time/=duration/2;if(time<1)return-change/2*(Math.sqrt(1-time*time)-1)+start;time-=2;return change/2*(Math.sqrt(1-time*time)+1)+start;}});

// lib/gamewheel/core/activity.js
ig.baked=true;ig.module('gamewheel.core.activity').requires('impact.entity','gamewheel.helpers.util','gamewheel.helpers.easing','impact.game').defines(function(){ig.activity=ig.activity||{};ig.Game.inject({_activities:[],runActivity:function(entity,activity,name){this._activities.push({entity:entity,activity:activity,name:name})},removeActivity:function(entity,name){for(var i=0;i<this._activities.length;i++){var a=this._activities[i];var match=false;if(name&&entity){match=name===a.name&&entity===a.entity;}else{match=(name&&a.name===name)||(entity&&a.entity===entity);}
if(match){this._activities.splice(i,1);i--;}}},updateEntities:function(){this.parent();for(var i=0;i<this._activities.length;i++){var a=this._activities[i];if(a.activity.complete||a.entity&&a.entity._killed){this._activities.splice(i,1);i--;}else{a.activity.update();}}}});ig.activity={};ig.activity.runCallback=function(callback){return{complete:false,callback:callback,reset:function(){this.complete=false;},update:function(){if(!this.complete){this.callback();this.complete=true;}}}};ig.activity.repeat=function(activity,playCount){return{complete:false,activity:activity,playCount:playCount,loops:0,reset:function(){this.complete=false;this.loops=0;},update:function(){if(!playCount||this.loops<this.playCount){this.activity.update();if(this.activity.complete){this.activity.reset();this.loops+=1;}}
this.complete=!(!playCount||this.loops<this.playCount);}}};ig.activity.group=function(activities){return{complete:false,group:activities,update:function(){var allComplete=true;for(var i=0;i<this.group.length;i++){this.group[i].update();allComplete=allComplete&&this.group[i].complete;}
this.complete=allComplete;},reset:function(){for(var i=0;i<this.group.length;i++){this.group[i].reset();}
this.complete=false;}}};ig.activity.repeatGroup=function(activities,playCount){return ig.activity.repeat(ig.activity.group(activities),playCount);};ig.activity.sequence=function(activities){return{complete:false,sequence:activities,sequencePos:0,update:function(){if(this.sequencePos<this.sequence.length){this.sequence[this.sequencePos].update();if(this.sequence[this.sequencePos].complete){this.sequencePos++;}}
this.complete=this.sequencePos>=this.sequence.length;},reset:function(){this.sequencePos=0;for(var i=0;i<this.sequence.length;i++){this.sequence[i].reset();}
this.complete=false;}};};ig.activity.repeatSequence=function(activities,playCount){return ig.activity.repeat(ig.activity.sequence(activities),playCount);};ig.activity.pause=function(duration){return{duration:duration,elapsed:0,complete:duration<=0,reset:function(){this.elapsed=0;this.complete=duration<=0;},update:function(){this.elapsed=Math.min(this.elapsed+ig.system.tick,this.duration);this.complete=(this.elapsed>=this.duration);}}};ig.activity.killEntity=function(entity){return{complete:false,entity:entity,reset:function(){this.complete=false;},update:function(){if(!this.complete){this.entity.kill();this.complete=true;}}}};ig.activity.alphaTo=function(entity,alpha,duration,easing){return ig.activity.changeTo(entity,'currentAnim.alpha',alpha,duration,easing);};ig.activity.rotateBy=function(entity,amount,duration,easing){return ig.activity.changeBy(entity,'currentAnim.angle',amount,duration,easing);};ig.activity.rotateTo=function(entity,angle,duration,easing){return ig.activity.changeTo(entity,'currentAnim.angle',angle,duration,easing);};ig.activity.moveTo=function(entity,x,y,duration,easing){var moves=[];if(x!=0){moves.push(ig.activity.moveToX(entity,x,duration,easing));}
if(y!=0){moves.push(ig.activity.moveToY(entity,y,duration,easing));}
if(moves.length>1){return ig.activity.group(moves);}else if(moves.length==1){return moves[0];}else{return ig.activity.pause(duration);}};ig.activity.moveToX=function(entity,position,duration,easing){return ig.activity.changeTo(entity,'pos.x',position,duration,easing);};ig.activity.moveToY=function(entity,position,duration,easing){return ig.activity.changeTo(entity,'pos.y',position,duration,easing);};ig.activity.moveBy=function(entity,x,y,duration,easing){var moves=[];if(x!=0){moves.push(ig.activity.moveByX(entity,x,duration,easing));}
if(y!=0){moves.push(ig.activity.moveByY(entity,y,duration,easing));}
if(moves.length>1){return ig.activity.group(moves);}else if(moves.length==1){return moves[0];}else{return ig.activity.pause(duration);}};ig.activity.moveByX=function(entity,amount,duration,easing){return ig.activity.changeBy(entity,'pos.x',amount,duration,easing);};ig.activity.moveByY=function(entity,amount,duration,easing){return ig.activity.changeBy(entity,'pos.y',amount,duration,easing);};ig.activity.scaleTo=function(entity,value,duration,easing){return ig.activity.group([ig.activity.changeTo(entity,'scale.x',value,duration,easing),ig.activity.changeTo(entity,'scale.y',value,duration,easing)]);};ig.activity.scaleToX=function(entity,value,duration,easing){return ig.activity.changeTo(entity,'scale.x',value,duration,easing);};ig.activity.scaleToY=function(entity,value,duration,easing){return ig.activity.changeTo(entity,'scale.y',value,duration,easing);};ig.activity.changeTo=function(object,propPath,value,duration,easing){return{object:object,value:value,duration:duration,animator:undefined,started:false,complete:false,easing:easing,reset:function(){this.started=false;this.complete=false;},init:function(){this.started=true;var currentVal=ig.util.objectByString(this.object,propPath);this.animator=ig.activity.valueChange(currentVal,this.value-currentVal,this.duration,this.easing)},update:function(){if(!this.started){this.init();}
this.animator.update();ig.util.setObjectByString(this.object,propPath,this.animator.value);this.complete=this.animator.complete;}}};ig.activity.changeBy=function(object,propPath,distance,duration,easing){return{object:object,distance:distance,duration:duration,animator:undefined,easing:easing,started:false,complete:false,reset:function(){this.started=false;this.complete=false;},init:function(){this.started=true;this.animator=ig.activity.valueChange(0,this.distance,this.duration,this.easing)},update:function(){if(!this.started){this.init();}
var val=this.animator.value;this.animator.update();var currentVal=ig.util.objectByString(this.object,propPath);ig.util.setObjectByString(this.object,propPath,currentVal+(this.animator.value-val));this.complete=this.animator.complete;}}};ig.activity.valueChange=function(start,change,duration,easing){return{elapsed:0,start:start,change:change,duration:duration,easing:easing||ig.util.linearTween,value:start,complete:false,reset:function(){this.value=this.start;this.elapsed=0;this.complete=false;},update:function(){this.elapsed=Math.min(this.elapsed+ig.system.tick,this.duration);this.value=this.easing(this.elapsed,this.start,this.change,this.duration);this.complete=(this.elapsed>=this.duration);}}};});

// lib/gamewheel/scenes/baseTemplateScene.js
ig.baked=true;ig.module('gamewheel.scenes.baseTemplateScene').requires('gamewheel.scenes.basicScene','gamewheel.prefabs.prefabCollection','gamewheel.entities.realText','gamewheel.core.analytics','gamewheel.core.activity').defines(function(){"use strict";ig.BaseTemplateScene=ig.BasicScene.extend({backgroundImage:null,headerHeight:160,headerColor:null,headerImage:null,_headerMessage:undefined,headerMessageText:null,headerMessageLocation:null,headerFontSettings:{},headerMessageDefaults:{"color":"#505050","align":"center","font":"400 50px \"Open Sans\", sans-serif","wrapWidth":620,centerOnPosX:true,centerOnPosY:true},displayScoreInHeader:false,scoreDisplayFn:function(score){return score;},footerHeight:160,footerColor:null,footerImage:null,_message:undefined,messageText:null,messageLocation:null,messageFontSettings:{},messageDefaults:{"color":"#505050","align":"center","font":"700 80px \"Open Sans\", sans-serif","wrapWidth":620,centerOnPosX:true,centerOnPosY:true},_mainButton:undefined,mainButtonImage:null,mainButtonLocation:null,mainButtonAction:{action:"endScene",args:null},_ctaButton:undefined,ctaButtonImage:null,ctaButtonLocation:null,ctaButtonAction:{action:"endScene",args:null},cornerButtonMargin:10,_helpButton:undefined,helpButtonImage:null,helpButtonAction:{action:'goToScene',args:'help'},_replayButton:undefined,replayButtonImage:null,replayButtonLocation:null,replayButtonAction:{action:'goToScene',args:'game'},_shareButton:undefined,shareButtonImage:null,shareButtonLocation:null,shareButtonAction:{"action":'shareOnFacebook',"args":null},_footerButton:undefined,footerButtonAction:null,autoInitButtonActivity:true,mainButtonHighlight:'bubble',ctaButtonHighlight:'bubble',messageFadeIn:false,messageFadeTime:2,prefabs:undefined,prefabSettings:undefined,useLeadForm:false,init:function(){if(this.messageText!==null){var settings=ig.merge(this.messageDefaults,this.messageFontSettings);settings.text=this.messageText;var messageSetup={type:ig.global.EntityRealText,location:this.messageLocation||{x:'center',y:this.headerHeight+200},settings:settings};this._message=this.spawnEntityWithSetup(messageSetup);if(this.messageFadeIn){this.runActivity(this._message,ig.activity.changeTo(this._message,'alpha',this._message.alpha,this.messageFadeTime,ig.util.linearTween));this._message.alpha=0;}}
if(this.headerMessageText!==null){settings=ig.merge(this.headerMessageDefaults,this.headerFontSettings);settings.text=this.headerMessageText;var headerSetup={type:ig.global.EntityRealText,location:this.headerMessageLocation||{x:'center',y:this.headerHeight/2},settings:settings};this._headerMessage=this.spawnEntityWithSetup(headerSetup);}
if(this.mainButtonImage){var mainButtonSetup={type:ig.global.EntityButton,image:this.mainButtonImage,location:this.mainButtonLocation||{x:'center',bottom:this.footerHeight+100},settings:{onPress:this.mainButtonAction}};this._mainButton=this.spawnEntityWithSetup(mainButtonSetup);}
if(this.ctaButtonImage){var ctaAnalytics={action:'submitAnalyticsEvent',args:ig.ANALYTICS_EVENT.PRESSED_CTA};var ctaButtonSetup={type:ig.global.EntityButton,image:this.ctaButtonImage,location:this.ctaButtonLocation||{x:'center',bottom:this.footerHeight+100},settings:{onPress:[ctaAnalytics,this.ctaButtonAction]}};this._ctaButton=this.spawnEntityWithSetup(ctaButtonSetup);}
if(this.helpButtonImage){var helpAnalytics={action:'submitAnalyticsEvent',args:ig.ANALYTICS_EVENT.PRESSED_HELP};var helpButtonSetup={type:ig.global.EntityButton,image:this.helpButtonImage,location:{right:this.cornerButtonMargin,bottom:this.footerHeight+this.cornerButtonMargin},settings:{onPress:[helpAnalytics,this.helpButtonAction]}};this._helpButton=this.spawnEntityWithSetup(helpButtonSetup);}
if(this.shareButtonImage){var shareAnalytics={action:'submitAnalyticsEvent',args:ig.ANALYTICS_EVENT.PRESSED_SHARE};var shareButtonSetup={type:ig.global.EntityButton,image:this.shareButtonImage,location:this.shareButtonLocation||{right:this.cornerButtonMargin,bottom:this.footerHeight+this.cornerButtonMargin},settings:{onPress:[shareAnalytics,this.shareButtonAction]}};this._shareButton=this.spawnEntityWithSetup(shareButtonSetup);}
if(this.footerButtonAction){var footerAnalytics={action:'submitAnalyticsEvent',args:ig.ANALYTICS_EVENT.PRESSED_FOOTER};var footerButtonSetup={type:ig.global.EntityButton,location:{right:0,bottom:0},settings:{size:{x:ig.system.width,y:this.footerHeight},onPress:[footerAnalytics,this.footerButtonAction]}};this._footerButton=this.spawnEntityWithSetup(footerButtonSetup);}
if(this.replayButtonImage){var replayAnalytics={action:'submitAnalyticsEvent',args:ig.ANALYTICS_EVENT.PRESSED_REPLAY};var replayButtonSetup={type:ig.global.EntityButton,image:this.replayButtonImage,location:this.replayButtonLocation||{left:this.cornerButtonMargin,bottom:this.footerHeight+this.cornerButtonMargin},settings:{onPress:[replayAnalytics,this.replayButtonAction]}};this._replayButton=this.spawnEntityWithSetup(replayButtonSetup);}
this.parent();if(this.autoInitButtonActivity){this.initButtonActivity();}
this.spawnPrefabs();},endScene:function(){if(this.useLeadForm){var form=ig.config['scenes']['form'];if(form){form.settings=form.settings||{};form.settings.onSceneEnd=form.settings.onSceneEnd||this.onSceneEnd;return ig.actions.goToScene('form');}}
this.parent();},spawnPrefabs:function(){if(this.prefabs){if(this.prefabs.constructor===Array){for(var i=0;i<this.prefabs.length;i++){var s1=this.prefabSettings&&this.prefabSettings[this.prefabs[i]];this.spawnPrefab(this.prefabs[i],s1);}}else if(this.prefabs.constructor===String){var s2=this.prefabSettings&&this.prefabSettings[this.prefabs];this.spawnPrefab(this.prefabs,s2);}}},update:function(){this.parent();if(this.displayScoreInHeader&&this._headerMessage&&ig.sessionStats.currentSession){var s=this.scoreDisplayFn(ig.sessionStats.currentSession.score);this._headerMessage.text=s.toString();}},drawEntities:function(){if(this.backgroundImage){ig.content.imageNamed(this.backgroundImage).draw(0,this.headerHeight);}
if(this.headerColor){ig.system.context.fillStyle=this.headerColor;ig.system.context.fillRect(0,0,ig.system.width,this.headerHeight);}
if(this.headerImage){ig.content.imageNamed(this.headerImage).draw(0,0);}
if(this.footerColor){ig.system.context.fillStyle=this.footerColor;ig.system.context.fillRect(0,ig.system.height-this.footerHeight,ig.system.width,this.footerHeight);}
if(this.footerImage){ig.content.imageNamed(this.footerImage).draw(0,ig.system.height-this.footerHeight);}
this.parent();},draw:function(){this.parent();},initButtonActivity:function(){if(this._mainButton){var mainHighlight=this.activityScripts[this.mainButtonHighlight];if(mainHighlight){ig.game.runActivity(this._mainButton,mainHighlight(this._mainButton),"mainButtonHighlight");}}
if(this._ctaButton){var ctaHighlight=this.activityScripts[this.ctaButtonHighlight];if(ctaHighlight){ig.game.runActivity(this._ctaButton,ctaHighlight(this._ctaButton),"ctaButtonHighlight");}
ig.game.runActivity(this._ctaButton,this.activityScripts.fadeSlide(this._ctaButton,0,-150,0.3,ig.util.easeInOutCubic,0.4),"ctaButtonAppear");}
if(this._shareButton){ig.game.runActivity(this._shareButton,this.activityScripts.fadeSlide(this._shareButton,-100,0,0.5,ig.util.easeInOutCubic,0.9),"shareButtonAppear");}
if(this._replayButton){ig.game.runActivity(this._replayButton,this.activityScripts.fadeSlide(this._replayButton,100,0,0.5,ig.util.easeInOutCubic,0.9),"replayButtonAppear");}},activityScripts:{pulse:function(entity){return ig.activity.repeatSequence([ig.activity.scaleTo(entity,1.1,1,ig.util.easeInOutQuart),ig.activity.scaleTo(entity,1,1,ig.util.easeInOutQuart)]);},bubble:function(entity){var a=ig.activity;var easing=ig.util.easeInOutQuad;var bubbleDuration=0.6;var pauseDuration=1;var scaleChange=0.1;return a.repeatSequence([a.group([a.scaleToX(entity,1+scaleChange,bubbleDuration/6,easing),a.scaleToY(entity,1-scaleChange,bubbleDuration/6,easing)]),a.group([a.scaleToX(entity,1-scaleChange,bubbleDuration/3,easing),a.scaleToY(entity,1+scaleChange,bubbleDuration/3,easing)]),a.group([a.scaleToX(entity,1+scaleChange/2,bubbleDuration/6,easing),a.scaleToY(entity,1-scaleChange/2,bubbleDuration/6,easing)]),a.group([a.scaleToX(entity,1-scaleChange/2,bubbleDuration/6,easing),a.scaleToY(entity,1+scaleChange/2,bubbleDuration/6,easing)]),a.group([a.scaleToX(entity,1,bubbleDuration/6,easing),a.scaleToY(entity,1,bubbleDuration/6,easing)]),a.pause(pauseDuration)]);},fadeSlide:function(entity,x,y,duration,easing,delay){entity.currentAnim.alpha=0;entity.pos.x-=x;entity.pos.y-=y;var a=ig.activity;var slide=a.group([a.alphaTo(entity,1,duration),a.moveBy(entity,x,y,duration,easing)]);if(delay){return a.sequence([a.pause(delay),slide]);}else{return slide;}}}});});

// lib/gamewheel/entities/button.js
ig.baked=true;ig.module('gamewheel.entities.button').requires('impact.system','impact.entity').defines(function(){"use strict";ig.ui={};ig.System.inject({setGame:function(gameClass){ig.input.unbindAll();if(ig.input.touchManager){ig.input.touchManager.clear();}
this.parent(gameClass);}});ig.global.EntityButton=ig.Entity.extend({hidden:false,pressing:false,pressingLast:false,triggerCallback:undefined,triggerAction:undefined,onPress:undefined,pressSound:undefined,pressedScale:{x:0.93,y:0.93},scale:{x:1,y:1},scalePoint:null,touchId:null,init:function(x,y,settings){this.parent(x,y,settings);this.setAnim('normal');if(!ig.input.touchManager){ig.input.touchManager=new ig.ui.TouchManager();}
ig.input.touchManager.buttons.push(this);},kill:function(){ig.input.touchManager.buttons.erase(this);this.parent();},touchStart:function(id,x,y){if(!this.hidden&&this.locationInButton(x,y)){this.touchId=id;this.pressing=true;return true;}
return false;},touchMove:function(id,x,y){if(!this.hidden&&this.touchId==id){this.pressing=this.locationInButton(x,y);}},touchEnd:function(id,x,y){if(this.touchId==id){this.touchId=null;this.pressing=false;if(!this.hidden&&this.locationInButton(x,y)){if(this.triggerCallback){this.triggerCallback();}
if(this.pressSound){ig.content.playSoundNamed(this.pressSound);}
if(this.onPress){ig.actions.perform(this.onPress);}}}},locationInButton:function(x,y){return x>this.pos.x&&x<this.pos.x+this.size.x&&y>this.pos.y&&y<this.pos.y+this.size.y;},update:function(){this.parent();if(this.pressing!=this.pressingLast){if(this.pressing){this.setAnim('pressing');}else{this.setAnim('normal');}}
this.pressingLast=this.pressing;},draw:function(){if(!this.hidden&&this.currentAnim){var sx=this.scale.x;var sy=this.scale.y;if(this.pressing){sx=sx*this.pressedScale.x;sy=sy*this.pressedScale.y;}
if(sx!=1||sy!=1){sx=sx/ig.system.scale;sy=sy/ig.system.scale;if(!this.scalePoint){this.scalePoint={x:this.currentAnim.sheet.width/2,y:this.currentAnim.sheet.height/2}}
var ox=this.offset.x+(this.scalePoint.x*sx)-this.scalePoint.x;var oy=this.offset.y+(this.scalePoint.y*sy)-this.scalePoint.y;var ctx=ig.system.context;ctx.save();ctx.translate(ig.system.getDrawPos(this.pos.x.round()-ox-ig.game._rscreen.x),ig.system.getDrawPos(this.pos.y.round()-oy-ig.game._rscreen.y));ctx.scale(sx,sy);this.currentAnim.draw(0,0);ctx.restore();}else{this.parent();}}},setAnim:function(name){if(this.anims[name]&&this.currentAnim!==this.anims[name]){this.currentAnim=this.anims[name];return true;}
return false;}});ig.ui.TouchManager=ig.Class.extend({buttons:[],init:function(){document.addEventListener('touchstart',this.touchStart.bind(this),false);document.addEventListener('touchmove',this.touchMove.bind(this),false);document.addEventListener('touchend',this.touchEnd.bind(this),false);document.addEventListener('touchcancel',this.touchEnd.bind(this),false);document.addEventListener('MSPointerDown',this.touchStart.bind(this),false);document.addEventListener('MSPointerUp',this.touchEnd.bind(this),false);document.addEventListener('MSPointerMove',this.touchMove.bind(this),false);document.addEventListener('mousedown',this.touchStart.bind(this),false);document.addEventListener('mouseup',this.touchEnd.bind(this),false);document.addEventListener('mousemove',this.touchMove.bind(this),false);document.body.style.msTouchAction='none';},clear:function(){this.buttons=[];},getTouches:function(ev){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var touches=[];if(ev.changedTouches){for(var i=0;i<ev.changedTouches.length;i++){var touch=ev.changedTouches[i];touches.push({id:touch.identifier,x:(touch.clientX-pos.left)/scale,y:(touch.clientY-pos.top)/scale})}}else{touches.push({id:0,x:(ev.clientX-pos.left)/scale,y:(ev.clientY-pos.top)/scale})}
return touches;},touchStart:function(ev){ev.preventDefault();if(!ev.changedTouches&&ev.button!==0){return;}
var touches=this.getTouches(ev);for(var i=0;i<touches.length;i++){for(var b=this.buttons.length-1;b>=0;b--){if(this.buttons[b].touchStart(touches[i].id,touches[i].x,touches[i].y)){break;}}}},touchMove:function(ev){ev.preventDefault();var touches=this.getTouches(ev);for(var i=0;i<touches.length;i++){for(var b=0;b<this.buttons.length;b++){if(this.buttons[b].touchMove(touches[i].id,touches[i].x,touches[i].y)){break;}}}},touchEnd:function(ev){ev.preventDefault();var touches=this.getTouches(ev);for(var i=0;i<touches.length;i++){for(var b=0;b<this.buttons.length;b++){this.buttons[b].touchEnd(touches[i].id,touches[i].x,touches[i].y);}}}});});

// lib/game/entities/entity3d.js
ig.baked=true;ig.module('game.entities.entity3d').requires('impact.entity','gamewheel.scenes.baseTemplateScene').defines(function(){"use strict";ig.CameraPseudo3d=ig.Class.extend({x:320,y:320,z:-640,depth:640,width:640,height:640,zIndex:1,offset:{x:0,y:160},setFov:function(fov){this.depth=this.width/Math.tan(fov.toRad()/2);},init:function(){},worldToScreen:function(x,y,z){var dx=x-this.x;var dy=y-this.y;var dz=z-this.z;var s=(this.depth/dz);return{x:this.offset.x+this.x+(dx*s),y:this.offset.y+this.y+(dy*s)}},screenToWorld:function(sx,sy,wy){sy=sy-(this.offset.y+this.y);var wz=((this.depth*wy)-(this.y*this.depth))/sy+this.z;var s=this.depth/(wz-this.z);var wx=sx-(this.offset.x+this.x);wx=wx/s;wx+=this.x;return{x:wx,y:wy,z:wz}}});ig.global.EntityPseudo3d=ig.Entity.extend({zPos:0,zPosLast:0,zDepth:6,zVel:0,maxVel:{x:99999,y:99999},scaleWithDistance:true,enable3d:true,camera:undefined,projection:undefined,init:function(x,y,settings){this.parent(x,y,settings);if(!this.camera){this.camera=ig.game.camera;}
if(!this.scalePoint){if(this.currentAnim){this.scalePoint={x:this.currentAnim.sheet.width/2,y:this.currentAnim.sheet.height/2}}else{this.scalePoint={x:this.size.x/2,y:this.size.y/2}}}},check:function(other){},touches:function(other){var tp=this.projection;var op=other.projection;if(!tp||!op){return false;}
return!(tp.pos.x>=op.pos.x+op.size.x||tp.pos.x+tp.size.x<=op.pos.x||tp.pos.y>=op.pos.y+op.size.y||tp.pos.y+tp.size.y<=op.pos.y||this.zPos>=other.zPos+other.zDepth||this.zPos+this.zDepth<=other.zPos);},getProjection:function(camera){var dx=this.pos.x-camera.x;var dy=this.pos.y-camera.y;var dz=this.zPos-camera.z;var s=(camera.depth/dz);var nx=camera.x+(dx*s);var ny=camera.y+(dy*s);var p={pos:{x:camera.offset.x+nx,y:camera.offset.y+ny},size:{x:this.size.x*s,y:this.size.y*s},scale:{x:s,y:s}};p.physical={pos:{x:this.pos.x,y:this.pos.y},size:{x:this.size.x,y:this.size.y}};if(!this.scaleWithDistance){p.physical.pos={x:this.pos.x+(this.scalePoint.x-(this.scalePoint.x/s)),y:this.pos.y+(this.scalePoint.y-(this.scalePoint.y/s))};p.physical.size={x:this.size.x/s,y:this.size.y/s};this.scale.x=1/s;this.scale.y=1/s;var scx=this.size.x-p.size.x;var scy=this.size.y-p.size.y;p.size.x/=p.scale.x;p.size.y/=p.scale.y;p.pos.x-=scx*(this.scalePoint.x/this.size.x)-this.offset.x;p.pos.y-=scy*(this.scalePoint.y/this.size.y)-this.offset.y;}else{p.pos.x+=this.scalePoint.x-(this.scalePoint.x*this.scale.x);p.pos.y+=this.scalePoint.y-(this.scalePoint.y*this.scale.y);}
p.scale.x*=this.scale.x;p.scale.y*=this.scale.y;return p;},update:function(){this.zPosLast=this.zPos;this.zPos+=this.zVel*ig.system.tick;this.parent();this.zIndex=this.camera.zIndex+(1/this.zPos);this.projection=this.getProjection(this.camera);},draw:function(){if(!this.enable3d){this.parent();return;}
if(this.zPos>ig.game.camera.z){if(!this.projection){this.projection=this.getProjection(this.camera);}
var temp={pos:this.pos,scale:this.scale,scalePoint:this.scalePoint};this.pos=this.projection.pos;this.scalePoint={x:0,y:0};this.scale={x:this.projection.scale.x,y:this.projection.scale.y};this.parent();this.pos=temp.pos;this.scale=temp.scale;this.scalePoint=temp.scalePoint;}}});});

// lib/game/entities/ball.js
ig.baked=true;ig.module('game.entities.ball').requires('game.entities.entity3d').defines(function(){ig.global.EntityBall=ig.global.EntityPseudo3d.extend({_mouseDownPos:undefined,maxVel:{x:9999,y:9999},type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.BOTH,collides:ig.Entity.COLLIDES.NEVER,shadow:undefined,shootPower:1900,ballGravity:4400,shooting:false,distance:1,distancePerSecond:320,windAccel:2000,outDistance:280,angularVel:0,shadowSourceHeight:1500,init:function(x,y,settings){this.parent(x,y,settings);this.shadow=ig.game.spawnEntityWithSetup({type:'EntityPseudo3d',image:'shadow'});this.updateShadow();},shoot:function(vector){this.scale={x:1,y:1};var sp=ig.util.rangedFloat(this.shootPower,200);this.accel.x=this.windAccel*ig.game.wind;this.vel.x=(this.distancePerSecond/vector.z)*vector.x;this.vel.y=-sp;this.zVel=this.distancePerSecond;this.shooting=true;this.angularVel=ig.util.randomFloat(-8,8);},hitSomething:false,scored:false,check:function(other){if(this.hitSomething){console.log('hit something again');return;}
if(other instanceof ig.global.EntityNet){this.scored=true;var tp=this.projection;var op=other.projection;if(tp.pos.x<op.pos.x||(tp.pos.x+tp.size.x>op.pos.x+op.size.x)){this.vel.x=this.vel.x/2;this.zVel=-this.zVel/2;ig.game.hitPole();}else if(tp.pos.x<op.pos.x+other.sideWidth||(tp.pos.x+tp.size.x>op.pos.x+op.size.x-other.sideWidth)){ig.game.scoreGoal();this.vel.x=-this.vel.x/2;this.zVel=-this.zVel/8;}else{ig.game.scoreGoal();this.vel.x=0;this.zVel=-this.zVel/8;}}else{ig.game.missGoal();this.vel.x=this.vel.x/2;this.zVel=-this.zVel/8;}
if(other instanceof ig.global.EntityGoalie){ig.game.hitGoalie();}
if(other instanceof ig.global.EntityObstacle){ig.game.hitObstacle(other.bonus);}
ig.game.placeBall();this.hitSomething=true;this.fadeKill();this.accel.x=0;this.zPos=other.zPos-this.zDepth;this.vel.y=0;this.type=ig.Entity.TYPE.NONE;this.checkAgainst=ig.Entity.TYPE.NONE;},update:function(){var groundY=ig.game.ground;if(this.shooting){this.currentAnim.angle+=this.angularVel*ig.system.tick;this.vel.y+=this.ballGravity*ig.system.tick;if(this.vel.y>0&&this.pos.y+this.size.y+this.offset.y>groundY){this.accel.x=0;this.vel.y=-this.vel.y/2;this.vel.x=this.vel.x/2;this.zVel=this.zVel/4;this.angularVel=this.angularVel/2;}
if(this.zPos>=this.outDistance){this.kill();ig.game.ballOut();ig.game.placeBall();ig.game.missGoal();}}
this.updateShadow();this.parent();},updateShadow:function(){this.shadow.pos={x:this.pos.x,y:ig.game.ground-(this.shadow.size.y/2)};this.shadow.zPos=this.zPos;var distance=this.shadow.pos.y-this.pos.y-(this.size.y/2)+this.offset.y;var s=1-distance/this.shadowSourceHeight;this.shadow.scale={x:s,y:s};},_willDie:false,fadeKill:function(){if(!this._willDie){this._willDie=true;ig.game.runActivity(this,ig.activity.sequence([ig.activity.pause(1.2),ig.activity.group([ig.activity.alphaTo(this,0,0.6),ig.activity.alphaTo(this.shadow,0,0.6)]),ig.activity.killEntity(this)]));}},kill:function(){this.shadow.kill();this.parent();}});});

// lib/game/entities/flickButton.js
ig.baked=true;ig.module('game.entities.flickButton').requires('impact.entity').defines(function(){ig.global.EntityFlickButton=ig.Entity.extend({disabled:false,onTouchStart:undefined,onTouchEnd:undefined,_touchStart:undefined,maxVel:{x:0,y:0},init:function(x,y,settings){this.parent(x,y,settings);},update:function(){if(!this.disabled&&ig.input.pressed('click')){if(ig.input.mouse.x>this.pos.x&&ig.input.mouse.x<this.pos.x+this.size.x&&ig.input.mouse.y>this.pos.y&&ig.input.mouse.y<this.pos.y+this.size.y){this._touchStart={x:ig.input.mouse.x,y:ig.input.mouse.y};if(this.onTouchStart){this.onTouchStart();}}}
if(!this.disabled&&ig.input.released('click')&&this._touchStart){var x=ig.input.mouse.x-this._touchStart.x;var y=ig.input.mouse.y-this._touchStart.y;var l=Math.abs(x)+Math.abs(y);var uv={x:x/l,y:y/l,sx:this._touchStart.x,sy:this._touchStart.y,ex:ig.input.mouse.x,ey:ig.input.mouse.y};this._touchStart=null;if(this.onTouchEnd){this.onTouchEnd(uv);}}
this.parent();}});});

// lib/game/entities/goalie.js
ig.baked=true;ig.module('game.entities.goalie').requires('impact.entity','game.entities.entity3d').defines(function(){ig.global.EntityNet=ig.global.EntityPseudo3d.extend({type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.NONE,collides:0,sideWidth:20,init:function(x,y,settings){this.parent(x,y,settings);},drawDebugRect:function(){this.parent();if(ig.game.show3dDebugRects){ig.system.context.strokeStyle="#fcdFF0";ig.system.context.lineWidth=1.0;ig.system.context.strokeRect(this.projection.pos.x,this.projection.pos.y,this.sideWidth,this.projection.size.y);ig.system.context.strokeStyle="#fcdFF0";ig.system.context.lineWidth=1.0;ig.system.context.strokeRect(this.projection.pos.x+this.projection.size.x-this.sideWidth,this.projection.pos.y,this.sideWidth,this.projection.size.y);}}});ig.global.EntityGoalie=ig.global.EntityPseudo3d.extend({maxVel:{x:99999,y:99999},zIndex:5,type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.NONE,collides:0,waiting:true,path:{left:0,right:640},speed:1000,init:function(x,y,settings){this.parent(x,y,settings);var net=ig.game.getEntityByName('net');if(net){var np=net.getProjection(ig.game.camera);this.path.left=np.pos.x;this.path.right=np.pos.x+np.size.x;}},update:function(){this.parent();if(ig.game.ball&&ig.game.ball.shooting&&!ig.game.ball.hitSomething&&ig.game.ball.zPos<this.zPos){this.moveToX(ig.game.ball.projection.pos.x+(ig.game.ball.projection.size.x/2));}else{this.vel.x=0;}},moveToX:function(x){x=x.limit(this.path.left,this.path.right);var xDistance=this.projection.pos.x+(this.projection.size.x/2)-x;if(xDistance>20){this.vel.x=-this.speed;}else if(xDistance<-20){this.vel.x=this.speed;}else{this.vel.x=0;}}});});

// lib/game/entities/obstacle.js
ig.baked=true;ig.module('game.entities.obstacle').requires('impact.entity','game.entities.entity3d').defines(function(){ig.global.EntityObstacle=ig.global.EntityPseudo3d.extend({maxVel:{x:99999,y:99999},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.NONE,collides:0,bonus:false,speed:1300,init:function(x,y,settings){this.parent(x,y,settings);this.vel.x=this.speed;},update:function(){this.parent();}});});

// lib/gamewheel/helpers/rollingValue.js
ig.baked=true;ig.module('gamewheel.helpers.rollingValue').requires('gamewheel.helpers.easing').defines(function(){ig.RollingValue=ig.Class.extend({rollDuration:1,easing:ig.util.easeOutQuad,targetValue:0,rollStartValue:0,displayValue:0,_timer:undefined,init:function(rollDuration,easingFunction){this.rollDuration=rollDuration||this.rollDuration;this.easing=easingFunction||this.easing;this._timer=new ig.Timer(0);},getRollingValue:function(targetValue,instantUpdate){if(targetValue!==undefined&&targetValue!==this.targetValue){this.targetValue=targetValue;this.rollStartValue=this.displayValue;this._timer.set(this.rollDuration);if(instantUpdate){this.displayValue=targetValue;}}
if(this.displayValue!=this.targetValue){var t=(this.rollDuration+this._timer.delta()).limit(0,this.rollDuration);this.displayValue=Math.floor(this.easing(t,this.rollStartValue,this.targetValue-this.rollStartValue,this.rollDuration));}
return this.displayValue;}});});

// lib/gamewheel/entities/rollingImage.js
ig.baked=true;ig.module('gamewheel.entities.rollingImage').requires('gamewheel.core.content','impact.entity').defines(function(){ig.global.EntityRollingImage=ig.Entity.extend({syncWithScreen:false,distanceMultiplier:1,syncOffset:{x:0,y:0},rollOffset:{x:0,y:0},imageName:undefined,sprite:undefined,init:function(x,y,settings){this.parent(x,y,settings);if(this.imageName){this.sprite=ig.content.imageNamed(this.imageName);}},update:function(){if(this.syncWithScreen){this.rollOffset.x=this.syncOffset.x-ig.game.screen.x*this.distanceMultiplier;this.rollOffset.y=this.syncOffset.y-ig.game.screen.y*this.distanceMultiplier;}
this.parent();},draw:function(){if(this.sprite){var offsetX=-Math.floor(this.rollOffset.x%this.sprite.width);var offsetY=-Math.floor(this.rollOffset.y%this.sprite.height);if(offsetX<0){offsetX=this.sprite.width+offsetX;}
if(offsetY<0){offsetY=this.sprite.height+offsetY;}
this.sprite.draw(this.pos.x,this.pos.y,offsetX,offsetY,this.sprite.width-offsetX,this.sprite.height-offsetY);if(offsetY!=0){this.sprite.draw(this.pos.x,this.pos.y+(this.sprite.height-offsetY),offsetX,0,this.sprite.width-offsetX,offsetY);}
if(offsetX!=0){this.sprite.draw(this.pos.x+(this.sprite.width-offsetX),this.pos.y,0,offsetY,offsetX,this.sprite.height-offsetY);}
if(offsetX!=0&&offsetY!=0){this.sprite.draw(this.pos.x+(this.sprite.width-offsetX),this.pos.y+(this.sprite.height-offsetY),0,0,offsetX,offsetY);}}}});});

// lib/game/sessionState.js
ig.baked=true;ig.module('game.sessionState').requires('gamewheel.core.sessionStats').defines(function(){"use strict";ig.SessionState=ig.Class.extend({events:[],init:function(){},addGameStateEvent:function(type,data){var details={ball:this.objectDetails(ig.game.ball),goalie:this.objectDetails(ig.game.goalie),net:this.objectDetails(ig.game.net),data:data};var event={time:Date.now(),score:ig.sessionStats.currentSession.score,type:type,details:details};this.events.push(event);},objectDetails:function(object){if(object){return{pos:{x:object.projection.pos.x,y:object.projection.pos.y,z:object.zPos},size:{x:object.projection.size.x,y:object.projection.size.y,z:object.zDepth}}}else{return null;}},submitGameState:function(){this.checkSession(function(success){if(success){var dataToSend={session_token:ig.settings.tokens.api_runtime_session,data:this.events};ig.apiUtil.xhr('/game_states/create','POST',null,dataToSend,function(status,result){});}else{console.error('Could not submit game session data');}}.bind(this));},checkSession:function(fn){fn=ig.apiUtil.normalizeFunction(fn);var self=this;if(ig.settings.tokens.api_runtime_session)return fn.call(this,true);this.checkAuth(function(success){if(!success)return fn.call(self,false);ig.apiUtil.createSession(fn);});},checkAuth:function(fn){fn=ig.apiUtil.normalizeFunction(fn);if(ig.settings.tokens.api_runtime)return fn.call(this,true);ig.apiUtil.authenticate(fn);}});});

// lib/game/scenes/gameScene.js
ig.baked=true;ig.module('game.scenes.gameScene').requires('gamewheel.scenes.baseTemplateScene','gamewheel.core.activity','game.entities.ball','game.entities.flickButton','game.entities.goalie','game.entities.entity3d','game.entities.obstacle','gamewheel.helpers.rollingValue','gamewheel.entities.rollingImage','game.sessionState').defines(function(){"use strict";ig.SplashScene=ig.BaseTemplateScene.extend({displayDuration:2,clickToEnd:false,update:function(){this.parent();if(this.displayDuration!==null&&this.displayDuration!==undefined){this.displayDuration-=ig.system.tick;if(this.displayDuration<0){this.endScene();}}
if(this.clickToEnd&&ig.input.pressed('click')){this.endScene();}}});ig.GameScene=ig.BaseTemplateScene.extend({autoTrackGameAnalytics:true,States:{Intro:0,Playing:1,Over:2},camera:undefined,mainState:0,gameOverDelay:1.6,displayScoreInHeader:true,flickButton:undefined,ball:undefined,net:undefined,goalie:undefined,ground:640,gameDuration:30,_gameTimer:undefined,obstacle1Time:null,obstacle2Time:null,enableSound:true,loopingSounds:[],stateInfo:undefined,wind:0,rain:undefined,init:function(){this.camera=new ig.CameraPseudo3d();this.camera.depth=34;this.camera.x=320;this.camera.y=140;this.camera.z=-60;this.camera.offset.x=0;this.camera.offset.y=445;this.parent();this.addLoopingSound('stadium');if(ig.util.randomBool()){this.rain=ig.game.spawnConfigEntity('rain');this.addLoopingSound('rain');}
ig.sessionStats.newSession();ig.sessionStats.currentSession.highScore=0;this.stateInfo=new ig.SessionState();var roller=new ig.RollingValue(0.5);this.scoreDisplayFn=function(score){return roller.getRollingValue(score);};this.sortEntities();this.changeState(this.States.Intro);this.flickButton=ig.game.spawnEntity(ig.global.EntityFlickButton,0,0,{size:{x:180,y:180}});this.placeBall(true);this.net=ig.game.getEntityByName('net');this.net.pos.x=320-(this.net.size.x/2);this.net.pos.y=this.ground-(this.net.size.y);this.goalie=ig.game.getEntityByName('goalie');this.goalie.pos.x=320-(this.goalie.size.x/2);this.goalie.pos.y=this.ground-(this.goalie.size.y);this.flickButton.onTouchStart=this.ballTouchStart.bind(this);this.flickButton.onTouchEnd=this.ballTouchEnd.bind(this);var timeSpan=this.gameDuration-5;if(ig.util.randomInt(3)==0){this.obstacle1Time=2.5+ig.util.randomFloat(timeSpan);}
if(ig.util.randomInt(3)==0){if(this.obstacle1Time){this.obstacle2Time=2.5+((this.obstacle1Time+ig.util.randomFloat(timeSpan*0.25,timeSpan*0.75))%timeSpan);}else{this.obstacle2Time=2.5+ig.util.randomFloat(timeSpan);}}},placeBall:function(firstBall){if(this.mainState!==this.States.Over){this.updateWind();this.flickButton.disabled=false;var x=(firstBall?320:320+ig.util.randomInt(-200,200));this.ball=this.spawnConfigEntity('ball',{});this.ball.pos={x:x-(this.ball.size.x/2),y:this.ground-this.ball.size.y-70};this.ball.zPos=-26;this.ball.updateShadow();var ballScreenPos=this.ball.getProjection(this.camera);var bx=ballScreenPos.pos.x+(ballScreenPos.size.x/2);var by=ballScreenPos.pos.y+(ballScreenPos.size.y/2);this.flickButton.pos={x:bx-(this.flickButton.size.x/2),y:by-(this.flickButton.size.y/2)};ig.game.runActivity(this.ball,ig.activity.group([ig.activity.moveByY(this.ball,-300,0.4,ig.util.easeInOutQuad),ig.activity.scaleTo(this.ball,1,0.4)]));this.ball.pos.y+=300;this.ball.scale={x:0.2,y:0.2};this.ball.update();this.stateInfo.addGameStateEvent(3);}},removeBall:function(){this.flickButton.disabled=true;if(!this.ball.shooting){ig.game.runActivity(this.ball,ig.activity.group([ig.activity.moveByY(this.ball,300,0.4,ig.util.easeInOutQuad),ig.activity.scaleTo(this.ball,0,0.4)]));}},_consecutiveGoals:0,scoreGoal:function(){this._consecutiveGoals++;if(this._consecutiveGoals>=3){this.tryPlaySound('horns');this._consecutiveGoals=0;ig.sessionStats.currentSession.score+=250;this.showCallout('messageBonus');}else{this.tryPlaySound('goal');ig.sessionStats.currentSession.score+=100;this.showCallout('messageGoal');}
this.stateInfo.addGameStateEvent(5);},hitObstacle:function(good){if(good){this.tryPlaySound('hitGuy');ig.sessionStats.currentSession.score+=500;this.showCallout('messageObstaclePlus');this.stateInfo.addGameStateEvent(7);}else{this.tryPlaySound('hitGuy');ig.sessionStats.currentSession.score-=200;this.showCallout('messageObstacleMinus');this.stateInfo.addGameStateEvent(8);}},hitPole:function(){this.stateInfo.addGameStateEvent(10);},hitGoalie:function(){this.stateInfo.addGameStateEvent(6);},ballOut:function(){this.stateInfo.addGameStateEvent(9);},missGoal:function(){this._consecutiveGoals=0;},ballTouchStart:function(){},ballTouchEnd:function(vector){var shootData={touchVector:vector,ballPos:this.ball.pos,wind:this.wind};var ts=this.camera.screenToWorld(vector.sx,vector.sy,this.ground);var te=this.camera.screenToWorld(vector.ex,vector.ey,this.ground);var x=te.x-ts.x;var z=te.z-ts.z;if(z<0){z=-z;x=-x;}
var length=Math.abs(x)+Math.abs(z);var nv={x:x/length,z:z/length};if(length>15){if(this.mainState==this.States.Intro){this.changeState(this.States.Playing);}
this.ball.shoot(nv);this.flickButton.disabled=true;this.tryPlaySound('ballKick');this.stateInfo.addGameStateEvent(4,shootData);}},stopLoopingSounds:function(){for(var i=0;i<this.loopingSounds.length;i++){this.loopingSounds[i].stop();}},addLoopingSound:function(name){if(this.enableSound){var sound=ig.content.soundNamed(name);if(sound){sound.setLooping(true);sound.play();this.loopingSounds.push(sound);}}},tryPlaySound:function(name){if(this.enableSound){var sound=ig.content.soundNamed(name);if(sound){sound.play();}}},update:function(){this.parent();if(this.mainState==this.States.Intro){}
if(this.mainState==this.States.Playing){var timeDisplay=this.getEntityByName('timeDisplay');if(timeDisplay){timeDisplay.text=Math.abs(this._gameTimer.delta()).toFixed(2).replace('.',':');}
if(this._gameTimer.delta()>=0){this.changeState(this.States.Over);}
if(this.obstacle1Time!==null&&!this.ball.shooting&&this.gameDuration+this._gameTimer.delta()>this.obstacle1Time){this.obstacle1Time=null;var streaker=ig.game.spawnConfigEntity('streaker');streaker.pos.x=-1000;streaker.pos.y=this.ground-streaker.size.y;}
if(this.obstacle2Time!==null&&!this.ball.shooting&&this.gameDuration+this._gameTimer.delta()>this.obstacle2Time){this.obstacle2Time=null;var scooter=ig.game.spawnConfigEntity('deliveryBoy');scooter.pos.x=-1000;scooter.pos.y=this.ground-scooter.size.y;this.tryPlaySound('scooter');}
if(this.ball&&this.ball._killed){this.ball=null;}
if(this.goalie&&this.goalie._killed){this.goalie=null;}
if(this.net&&this.net._killed){this.net=null;}}
if(this.mainState==this.States.Over){if(this._gameTimer.delta()>=0){this.endScene();}}
this.sortEntities();},endScene:function(){this.stateInfo.submitGameState();this.stopLoopingSounds();this.parent();},changeState:function(newState){this.mainState=newState;switch(newState){case this.States.Intro:this.stateInfo.addGameStateEvent(0);var timeDisplay=this.getEntityByName('timeDisplay');if(timeDisplay){timeDisplay.text=this.gameDuration.toFixed(2).replace('.',':');}
break;case this.States.Playing:this.stateInfo.addGameStateEvent(1,{o1:this.obstacle1Time,o2:this.obstacle2Time});this._gameTimer=new ig.Timer(this.gameDuration);break;case this.States.Over:this.stateInfo.addGameStateEvent(2);var timeDisplay=this.getEntityByName('timeDisplay');if(timeDisplay){timeDisplay.text='00:00';}
this.removeBall();this._gameTimer.set(2.5);break;}},_windIndicator:undefined,updateWind:function(value){if(value===undefined){this.wind=value||ig.util.randomInt(-1,1);}else{this.wind=value;}
if(this._windIndicator){this._windIndicator.kill();}
var image='windCenter';if(this.wind==-1){image='windLeft';}
if(this.wind==1){image='windRight';}
this._windIndicator=ig.game.spawnEntityWithSetup({image:image,location:{x:'center',y:240},settings:{zIndex:150}});},draw:function(){this.parent();},checkEntities:function(){for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];for(var o=e+1;o<this.entities.length;o++){var other=this.entities[o];if(entity.touches(other)){ig.Entity.checkPair(entity,other);}}}},showCallout:function(image){this.tryPlaySound('notification');var co=ig.game.spawnEntityWithSetup({image:image,location:{x:'center',y:400},settings:{zIndex:150}});co.currentAnim.alpha=0;var fade=ig.activity.sequence([ig.activity.alphaTo(co,1,0.2),ig.activity.pause(0.7),ig.activity.alphaTo(co,0,0.2)]);var slide=ig.activity.sequence([ig.activity.moveByY(co,-30,0.2,ig.util.easeOutQuad),ig.activity.pause(0.7),ig.activity.moveByY(co,30,0.2,ig.util.easeInQuad),ig.activity.killEntity(co)]);ig.game.runActivity(co,ig.activity.group([fade,slide]));}});});

// lib/gamewheel/scenes/baseFormScene.js
ig.baked=true;ig.module('gamewheel.scenes.baseFormScene').requires('gamewheel.core.settings','gamewheel.scenes.baseTemplateScene','gamewheel.helpers.apiUtil').defines(function(){"use strict";ig.BaseFormScene=ig.BaseTemplateScene.extend({overlayBackground:null,labelTextColor:null,clearColor:null,language:'en',formMessages:undefined,customFormMessages:undefined,formMessagesDefaults:{en:{submit:"Submit",terms:"By submitting, you agree to our <a href='https://www.gamewheel.com/terms-of-use' target='_blank'>terms and conditions</a>",errors:{validation:{fillAll:"Please fill all required fields.",email:"Please provide a valid email address."},session:"Sorry, something went wrong.",submit:"Could not submit your data. Please try again."}},de:{submit:"Abschicken",terms:"Durch das Absenden der Daten, akzeptieren Sie unsere <a href='https://www.gamewheel.com/terms-of-use' target='_blank'>Nutzungsbedingungen</a>",errors:{validation:{fillAll:"Bitte fllen Sie alle geforderten Felder aus.",email:"Bitte geben Sie eine gltige Emailadresse an."},session:"The campaign is offline, no lead form is a available.",submit:"Ihre Daten konnten nicht bermittelt werden. Bitte versuchen Sie es noch einmal."}}},DataTypes:{Score:':SCORE',PlayTime:':PLAYTIME'},dataFields:{},customFormFields:undefined,formFields:undefined,formFieldsDefaults:{en:{},de:{}},init:function(){this.parent();if(this.clearColor===null){this.clearColor=ig.config.global['keyColor']||'#000000';}
this.formMessages=this.formMessagesDefaults[this.language]||this.formMessagesDefaults['en'];if(this.customFormMessages){ig.merge(this.formMessages,this.customFormMessages);}
this.formFields=this.formFieldsDefaults[this.language]||this.formFieldsDefaults['en'];if(this.customFormFields){ig.merge(this.formFields,this.customFormFields);Object.keys(this.formFields).forEach(function(key){if(!this.formFields[key]){delete this.formFields[key];}else{if(this.formFields[key].type==this.DataTypes.Score||this.formFields[key].type==this.DataTypes.PlayTime){this.dataFields[key]=this.formFields[key];delete this.formFields[key];}}}.bind(this));}
var self=this;this.checkSession(function(success){if(!success){return self.drawOverlay();}
self.preChecks(self.drawOverlay);});},checkSession:function(fn){fn=ig.apiUtil.normalizeFunction(fn);var self=this;if(ig.settings.tokens.api_runtime_session)return fn.call(this,true);this.checkAuth(function(success){if(!success)return fn.call(self,false);ig.apiUtil.createSession(fn);});},checkAuth:function(fn){fn=ig.apiUtil.normalizeFunction(fn);if(ig.settings.tokens.api_runtime)return fn.call(this,true);ig.apiUtil.authenticate(fn);},preChecks:function(fn){fn=ig.apiUtil.normalizeFunction(fn);return fn.call(this,{allowed:true});},drawOverlay:function(data){this.screenSize={x:ig.system.width,y:ig.system.height};this.screenRatio=this.screenSize.x/this.screenSize.y;this.$wrapper=document.createElement('div');this.$wrapper.style.position='absolute';this.$wrapper.style.top='16.67%';this.$wrapper.style.left=0;this.$wrapper.style.width='100%';this.$wrapper.style.height='66.66%';this.$overlay=document.createElement('div');this.$overlay.style.height='100%';this.$overlay.style.margin='auto';this.$overlay.style.display='flex';this.$overlay.style.flexDirection='column';this.$overlay.style.alignItems='stretch';this.$overlay.style.justifyContent='center';this.$overlay.style.backgroundColor=this.overlayBackground;this.$overlay.style.color=this.labelTextColor;if(data&&data.allowed){this.$content=this.getFormElement();}else{this.$content=this.getMessageElement(this.formMessages.errors.session,'Replay',false);}
this.$overlay.appendChild(this.$content);this.$wrapper.appendChild(this.$overlay);document.body.appendChild(this.$wrapper);this.resize();this.setEvents();},getFormElement:function(){var self=this;this.$form=document.createElement('form');this.$form.style.height='100%';this.$form.style.display='flex';this.$form.style.flexDirection='column';this.$form.style.alignItems='stretch';this.$form.style.justifyContent='center';this.$form.style.padding='1rem';this.$fields=this.createFormFields();Object.keys(this.$fields).forEach(function(key){var field=self.$fields[key],isCheckbox=field.input&&(field.input.getAttribute('type')==='checkbox'),isSubmit=field.input&&(field.input.getAttribute('type')==='submit');if(field.label&&!isCheckbox){self.$form.appendChild(field.label);}
if(field.input){self.$form.appendChild(field.input);}
if(field.label&&isCheckbox){field.label.style.marginLeft='10px';field.label.style.verticalAlign='top';self.$form.appendChild(field.label);}
if(isSubmit){field.input.style.webkitAppearance='button';field.input.style.fontSize='18px';field.input.style.padding='10px';}});return this.$form;},createFormFields:function(){var self=this;var fields={};var configFields=this.formFields;if(configFields){Object.keys(configFields).forEach(function(entry){var values=configFields[entry];fields[entry]=self.createInputField(values.type,entry,values.required,'',values.placeholder,values.label);});}
fields['terms']=this.createText(this.formMessages.terms);fields['submit']=this.createInputField('submit','',false,this.formMessages.submit,'');return fields;},createInputField:function(type,name,required,value,placeholder,label,height,width){var lbl,input;width=width||'auto';height=height||'auto';if(label){lbl=document.createElement('label');lbl.innerText=label;lbl.style.width=width;lbl.style.height=height;lbl.style.display=(type==='checkbox')?"inline-block":"block";}
input=document.createElement('input');input.type=type;input.name=name;input.placeholder=placeholder;input.value=value;input.style.width=(type==='checkbox')?'16px':width;input.style.height=(type==='checkbox')?'16px':height;input.style.margin="0 auto 10px";input.style.display=(type==='checkbox')?"inline-block":"block";input.addEventListener('mousedown',function(){input.focus();});input.addEventListener('touchstart',function(){input.focus();input.click();});input.addEventListener('blur',function(){window.scrollTo(0,0);});if(required){input.required=true;}
return{label:lbl,input:input};},createText:function(text){var lbl=document.createElement('label');lbl.innerHTML=text;lbl.style.display="block";var link=lbl.querySelector('a');if(link){link.addEventListener('touchstart',function(){link.click();});}
return{label:lbl};},getMessageElement:function(msg,button,endSceneOnButtonClick){var div=document.createElement('div');div.style.margin='auto';div.style.textAlign='center';var content=document.createElement('p');div.appendChild(content);content.innerText=msg;content.style.textAlign='center';content.style.fontSize='20px';content.style.fontWeight='bold';if(button){var input=document.createElement('input');input.type='submit';input.value=button;if(endSceneOnButtonClick){var self=this;input.addEventListener('click',function(){return self.endScene();});}else{input.addEventListener('click',function(){return location.reload();});}
div.appendChild(input);}
return div;},resize:function(){var ww=window.innerWidth,wh=window.innerHeight,wr=ww/wh,self=this,sw=this.screenSize.x,sh=this.screenSize.y,cw=ww,ch=wh;if(this.screenRatio<wr){cw=Math.round(wh*sw/sh);}else{ch=Math.round(ww*sh/sw);}
this.$overlay.style.width=cw+'px';if(this.$fields){Object.keys(this.$fields).forEach(function(key){var field=self.$fields[key],isCheckbox=field.input&&(field.input.getAttribute('type')==='checkbox'),isSubmit=field.input&&(field.input.getAttribute('type')==='submit');if(field.input){if(!isCheckbox&&!isSubmit){field.input.style.margin='0 0 '+ch*0.6/(cw<480?32:26)+'px';field.input.style.height=ch*0.6/(cw<480?16:13)+'px';}
field.input.style.fontSize=ch*0.6/(cw<480?22:18)+'px';}
if(field.label){field.label.style.fontSize=ch*0.6/((isCheckbox||!field.input)?32:18)+'px';field.label.style.height=ch*0.6/13+'px';}});}
window.scrollTo(0,0);},setEvents:function(){var self=this;window.addEventListener('resize',function(){self.resize()},false);if(!this.$form)return;this.$form.addEventListener('submit',function(evt){evt=evt||window.event;evt.preventDefault();if(self.formBusy)return false;self.formBusy=true;self.formSubmitHandler();return false;},false);},formSubmitHandler:function(){var self=this;var fieldData={};var passValidation=true;Object.keys(this.$fields).forEach(function(key){if(self.$fields[key].input&&self.$fields[key].input.type!=='submit'){fieldData[key]=self.$fields[key].input.value;if(self.$fields[key].input.required&&!self.$fields[key].input.value){passValidation=false;}}});Object.keys(this.dataFields).forEach(function(key){var session=(ig.sessionStats&&ig.sessionStats.currentSession)||{};if(self.dataFields[key].type==self.DataTypes.Score){fieldData[key]=session.score;}
if(self.dataFields[key].type==self.DataTypes.PlayTime){fieldData[key]=session.time;}});var dataToSend={session_token:ig.settings.tokens.api_runtime_session,data:fieldData};if(passValidation){if(this.$fields.email){var emailRegex=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(!this.$fields.email.input.value.match(emailRegex)){return this.showErrorMessage(this.formMessages.errors.validation.email);}}}else{return this.showErrorMessage(this.formMessages.errors.validation.fillAll);}
ig.apiUtil.xhr('/lead/create','POST',null,dataToSend,function(status,resData){if(status!==200&&status!==201){return self.showErrorMessage(self.formMessages.errors.submit);}
if(ig.analytics){ig.analytics.submitEvent(ig.ANALYTICS_EVENT.SUBMITTED_LEAD_FORM);}
ig.settings.tokens.api_runtime_player=resData.token;return self.postSubmitHandler();});},postSubmitHandler:function(){return this.endScene();},showErrorMessage:function(msg){var self=this;var errEl=document.createElement('div'),submitEl=this.$form.querySelector('input[type=submit]');errEl.innerText=msg;errEl.style.color='#ff8888';errEl.style.textAlign='center';errEl.style.paddingBottom='10px';this.$form.insertBefore(errEl,submitEl);setTimeout(function(){self.$form.removeChild(errEl);self.formBusy=false;},2000);return false;},ending:function(){if(this.$wrapper){document.body.removeChild(this.$wrapper);}}});});

// lib/game/scenes/leadEndScene.js
ig.baked=true;ig.module('game.scenes.leadEndScene').requires('gamewheel.scenes.baseFormScene').defines(function(){"use strict";ig.LeadEndScene=ig.BaseFormScene.extend({customFormMessages:{terms:"Mit Absenden des Formulars stimme ich den <a href='http://pizzadeblog.wpengine.com/wp-content/uploads/2016/05/Teilnahmebedingungen-pizza.de-Game-Balla-Balla.pdf' target='_blank'>Teilnahmebedingungen</a> zu. Ich willige ein, dass die pizza.de GmbH mir zu Zwecke der potentiellen Gewinnbenachrichtigung E-Mails zuschickt. Meine Einwilligung kann ich jederzeit gegenber der pizza.de GmbH widerrufen.",errors:{validation:{fillRequired:"Bitte ausfllen"}}},getFormElement:function(){var self=this;this.$form=document.createElement('form');this.$form.style.width="82%";this.$form.style.margin="auto";this.$form.style.marginTop="0";this.$form.style.display='flex';this.$form.style.height='85%';this.$form.style.flexDirection='column';this.$form.style.alignItems='stretch';this.$fields=this.createFormFields();Object.keys(this.$fields).forEach(function(key){var field=self.$fields[key];var isCheckbox=field.input&&(field.input.getAttribute('type')==='checkbox');var isSubmit=field.input&&(field.input.getAttribute('type')==='submit');if(field.label&&!isCheckbox){if(key!=='terms'){self.$form.appendChild(field.label);}else{self.$footer.appendChild(field.label);}}
if(field.input){if(isCheckbox){field.input.style.position='absolute';field.input.style.left='0';field.input.style.top='2px';field.label.appendChild(field.input);}else{self.$form.appendChild(field.input);}
if(field.input.required){var message=self.formMessages.errors.validation.fillRequired;if(message){field.input.oninvalid=function(){this.setCustomValidity(message)};field.input.oninput=function(){this.setCustomValidity('')};}}}
if(field.label&&isCheckbox){var div=document.createElement('div');div.style.position='relative';div.appendChild(field.label);field.label.style.marginLeft='20px';field.label.style.verticalAlign='top';self.$form.appendChild(div);}
if(isSubmit){field.input.style.webkitAppearance='button';field.input.style.fontSize='18px';field.input.style.padding='10px';field.input.style.marginTop='25px';}});return this.$form;},drawOverlay:function(data){this.screenSize={x:ig.system.width,y:ig.system.height};this.screenRatio=this.screenSize.x/this.screenSize.y;this.$wrapper=document.createElement('div');this.$wrapper.style.position='absolute';this.$wrapper.style.top='42%';this.$wrapper.style.left=0;this.$wrapper.style.width='100%';this.$wrapper.style.height='58%';this.$overlay=document.createElement('div');this.$overlay.style.height='100%';this.$overlay.style.margin='auto';this.$overlay.style.display='flex';this.$overlay.style.flexDirection='column';this.$overlay.style.alignItems='stretch';this.$overlay.style.justifyContent='center';this.$overlay.style.backgroundColor=this.overlayBackground;this.$overlay.style.color=this.labelTextColor;this.$footer=document.createElement('div');this.$footer.style.height='14%';this.$footer.style.margin='auto';this.$footer.style.marginBottom=0;this.$footer.style.width="95%";this.$footer.style.justifyContent='center';if(data&&data.allowed){this.$content=this.getFormElement();}else{this.$content=this.getMessageElement(this.formMessages.errors.session,'Replay',false);}
this.$overlay.appendChild(this.$content);this.$wrapper.appendChild(this.$overlay);this.$overlay.appendChild(this.$footer);document.body.appendChild(this.$wrapper);this.resize();this.setEvents();},createFormFields:function(){var self=this;var fields={};var configFields=this.formFields;if(configFields){Object.keys(configFields).forEach(function(entry){var values=configFields[entry];fields[entry]=self.createInputField(values.type,entry,values.required,'',values.placeholder,values.label);if(values.maxLength&&fields[entry].input){fields[entry].input.maxLength=values.maxLength;}});}
fields['submit']=this.createInputField('submit','',false,this.formMessages.submit,'');fields['terms']=this.createText(this.formMessages.terms,true);return fields;},createText:function(text,terms){var lbl=document.createElement('label');lbl.innerHTML=text;lbl.style.display="block";if(terms){lbl.style.color="#9b9b9b";lbl.style.marginTop='5px';}
var link=lbl.querySelector('a');link.style.color='#96c0dc';if(link){link.addEventListener('touchstart',function(){link.click();});}
return{label:lbl};},createInputField:function(type,name,required,value,placeholder,label,height,width){var lbl,input;width=width||'auto';height=height||'auto';if(label){lbl=document.createElement('label');lbl.innerText=label;lbl.style.width=width;lbl.style.height=height;lbl.style.display=(type==='checkbox')?"inline-block":"block";}
input=document.createElement('input');input.type=type;input.name=name;input.placeholder=placeholder;input.value=value;input.style.width=(type==='checkbox')?'16px':width;input.style.height=(type==='checkbox')?'16px':height;input.style.margin="0 auto 10px";input.style.display=(type==='checkbox')?"inline-block":"block";input.addEventListener('mousedown',function(){input.focus();});input.addEventListener('touchstart',function(){if(ig.ua.mobile){input.focus();input.click();}});input.addEventListener('blur',function(){});if(required){input.required=true;}
return{label:lbl,input:input};},showErrorMessage:function(msg){var self=this;var errEl=document.createElement('div'),submitEl=this.$form.querySelector('input[type=submit]');errEl.innerText=msg;errEl.style.fontSize='100%';errEl.style.color='#ff8888';errEl.style.textAlign='center';this.$form.appendChild(errEl,submitEl);setTimeout(function(){self.$form.removeChild(errEl);self.formBusy=false;},2000);return false;},resize:function(){var cw=ig.system.canvas.clientWidth;var ch=ig.system.canvas.clientHeight;this.$overlay.style.width=cw+'px';if(this.$fields){Object.keys(this.$fields).forEach(function(key){var field=this.$fields[key],isCheckbox=field.input&&(field.input.getAttribute('type')==='checkbox'),isSubmit=field.input&&(field.input.getAttribute('type')==='submit');if(field.input){if(!isCheckbox&&!isSubmit){field.input.style.margin='0 0 '+ch*0.6/(cw<480?32:26)+'px';field.input.style.height=ch*0.6/(cw<480?16:13)+'px';}
field.input.style.fontSize=ch*0.6/(cw<480?22:18)+'px';}
if(field.label){if(key=='terms'){field.label.style.fontSize=ch*0.6/((isCheckbox||!field.input)?42:28)+'px';field.label.style.height=ch*0.6/23+'px';}else{field.label.style.fontSize=ch*0.6/((isCheckbox||!field.input)?32:18)+'px';field.label.style.height=ch*0.6/13+'px';}}}.bind(this));}}});});

// lib/game/entities/leaderboardDisplay.js
ig.baked=true;ig.module('game.entities.leaderboardDisplay').requires('gamewheel.entities.realText').defines(function(){ig.global.EntityLeaderboardDisplay=ig.Entity.extend({size:{x:560,y:320},font:"400 30px \"Open Sans\", sans-serif",fontColor:"#505050",fontCurrent:"400 30px \"Open Sans\", sans-serif",fontCurrentColor:"#FFFFFF",headerFont:"400 35px \"Open Sans\", sans-serif",headerFontColor:"#FFFFFF",strings:{error:"Unable to load leaderboard.",loading:"Loading...",rank:"Rank",score:"Score",player:"Name"},scoreDisplayString:"%S",scoreFixedLen:0,scoresToShow:5,leaderboardData:[],_messageLabel:undefined,init:function(x,y,settings){this.parent(x,y,settings);this.loadData();},checkSession:function(fn){fn=ig.apiUtil.normalizeFunction(fn);var self=this;if(ig.settings.tokens.api_runtime_session)return fn.call(this,true);this.checkAuth(function(success){if(!success)return fn.call(self,false);ig.apiUtil.createSession(fn);});},checkAuth:function(fn){fn=ig.apiUtil.normalizeFunction(fn);if(ig.settings.tokens.api_runtime)return fn.call(this,true);ig.apiUtil.authenticate(fn);},loadData:function(){this._messageLabel=this.genLabel(this.strings.loading,this.font,this.fontColor);this._messageLabel.align='center';this._messageLabel.pos={x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2};this.checkSession(function(success){if(!success){this.loaded(false);}
var dataToSend={session_token:ig.settings.tokens.api_runtime_session,scoreCount:this.scoresToShow};ig.apiUtil.xhr('/highscore','POST',null,dataToSend,function(status,resData){if(status!==200&&status!==201){this.loaded(false);}else{this.leaderboardData=resData;this.loaded(true);}}.bind(this));}.bind(this));},loaded:function(success){if(this._messageLabel){this._messageLabel.kill();}
if(success){this.displayScores();}else{this._messageLabel=this.genLabel(this.strings.error,this.font,this.fontColor);this._messageLabel.align='center';this._messageLabel.pos={x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2};}},displayScores:function(){var rankText='';var rankTextCurrent='';var scoreText='';var scoreTextCurrent='';var playerText='';var playerTextCurrent='';for(var i=0;i<this.scoresToShow;i++){var entry=this.leaderboardData[i];if(entry){if(entry['currentPlayer']){rankTextCurrent+=entry.rank.toString()+'\n';scoreTextCurrent+=this.formatScore(entry.score)+'\n';playerTextCurrent+=entry.player+'\n';rankText+='\n';scoreText+='\n';playerText+='\n';}else{rankText+=entry.rank.toString()+'\n';scoreText+=this.formatScore(entry.score)+'\n';playerText+=entry.player+'\n';rankTextCurrent+='\n';scoreTextCurrent+='\n';playerTextCurrent+='\n';}}else{rankText+='...\n';scoreText+='...\n';playerText+='...\n';rankTextCurrent+='\n';scoreTextCurrent+='\n';playerTextCurrent+='\n';}}
var rankHeader=this.genLabel(this.strings.rank,this.headerFont,this.headerFontColor);var scoreHeader=this.genLabel(this.strings.score,this.headerFont,this.headerFontColor);var playerHeader=this.genLabel(this.strings.player,this.headerFont,this.headerFontColor);var rankLabel=this.genLabel(rankText,this.font,this.fontColor);var scoreLabel=this.genLabel(scoreText,this.font,this.fontColor);var playerLabel=this.genLabel(playerText,this.font,this.fontColor);var rankCurrentLabel=this.genLabel(rankTextCurrent,this.fontCurrent,this.fontCurrentColor);var scoreCurrentLabel=this.genLabel(scoreTextCurrent,this.fontCurrent,this.fontCurrentColor);var playerCurrentLabel=this.genLabel(playerTextCurrent,this.fontCurrent,this.fontCurrentColor);rankHeader.align='center';rankLabel.align='center';rankCurrentLabel.align='center';scoreHeader.align='center';scoreLabel.align='right';scoreCurrentLabel.align='right';var rankWidth=Math.max(rankHeader.size.x,rankLabel.size.x,rankCurrentLabel.size.x);var scoreWidth=Math.max(scoreHeader.size.x,scoreLabel.size.x,scoreCurrentLabel.size.x);var playerWidth=Math.max(playerHeader.size.x,playerLabel.size.x,playerCurrentLabel.size.x);var totalWidth=rankWidth+scoreWidth+playerWidth;var gap=Math.max((this.size.x-totalWidth)/2,15);var col1=this.pos.x;var col2=col1+rankWidth+gap;var col3=col2+scoreWidth+gap;rankHeader.pos={x:col1+rankWidth/2,y:this.pos.y};scoreHeader.pos={x:col2+scoreWidth/2,y:rankHeader.pos.y};playerHeader.pos={x:col3,y:scoreHeader.pos.y};rankLabel.pos={x:rankHeader.pos.x,y:rankHeader.pos.y+rankHeader.size.y+5};rankCurrentLabel.pos=rankLabel.pos;scoreLabel.pos={x:col2+scoreWidth,y:rankLabel.pos.y};scoreCurrentLabel.pos=scoreLabel.pos;playerLabel.pos={x:col3,y:rankLabel.pos.y};playerCurrentLabel.pos=playerLabel.pos;},genLabel:function(text,font,color){return ig.game.spawnEntityWithSetup({type:'EntityRealText',settings:{text:text,color:color,font:font}});},formatScore:function(score){return this.scoreDisplayString.replace('%S',score.toFixed(this.scoreFixedLen));},update:function(){this.parent();},draw:function(){this.parent();}});});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.system','gamewheel.core.gamewheel','gamewheel.core.gwLoader','gamewheel.scenes.baseTemplateScene','gamewheel.entities.button','gamewheel.entities.realText','game.scenes.gameScene','game.scenes.leadEndScene','game.entities.leaderboardDisplay').defines(function(){var screenSize=ig.config.global['screenSize']||{x:640,y:960};function resizeCanvas(){var canvas=document.getElementById('canvas');var screenRatio=screenSize.x/screenSize.y;var windowRatio=window.innerWidth/window.innerHeight;if(screenRatio<windowRatio){canvas.style.width='auto';canvas.style.height=window.innerHeight+'px';}else{canvas.style.width=window.innerWidth+'px';canvas.style.height='auto';}
window.scrollTo(0,0);}
resizeCanvas();if(!ig.ua.mobile){window.addEventListener('resize',resizeCanvas,false);}
setTimeout(function(){resizeCanvas();},100);ig.main('#canvas',ig.getBootScene(),30,screenSize.x,screenSize.y,1,ig.GwLoader);});