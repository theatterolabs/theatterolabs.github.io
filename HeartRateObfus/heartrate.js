var _0x485f=['play','data','drawImage','getImageData','length','hdnOn','push','now','innerHTML','toFixed','DOMContentLoaded','getUserMedia','webkitGetUserMedia','mediaDevices','forEach','kind','videoinput','video','deviceId','catch','log','message','getElementById','height','canvasvideo','bpm','srcObject'];(function(_0x2452f3,_0x3ac9ae){var _0x75abcf=function(_0x1282df){while(--_0x1282df){_0x2452f3['push'](_0x2452f3['shift']());}};_0x75abcf(++_0x3ac9ae);}(_0x485f,0x1bb));var _0x1486=function(_0xd42967,_0x4a11aa){_0xd42967=_0xd42967-0x0;var _0x501fbe=_0x485f[_0xd42967];return _0x501fbe;};var video,width,height,context,bpm;var arr=[];navigator[_0x1486('0x0')]=navigator[_0x1486('0x0')]||navigator[_0x1486('0x1')];var constraints={'video':!![],'audio':![]};function initialize(){navigator[_0x1486('0x2')]['enumerateDevices']()['then'](function(_0xa258ef){_0xa258ef[_0x1486('0x3')](function(_0xb4e8db){if(_0xb4e8db[_0x1486('0x4')]==_0x1486('0x5'))constraints[_0x1486('0x6')]={'optional':[{'sourceId':_0xb4e8db[_0x1486('0x7')]},{'fillLightMode':'on'}]};});initializeVideo();})[_0x1486('0x8')](function(_0x5ae81a){console[_0x1486('0x9')](_0x5ae81a['name']+':\x20'+_0x5ae81a[_0x1486('0xa')]);});}function initializeVideo(){video=document[_0x1486('0xb')](_0x1486('0x6'));width=video['width'];height=video[_0x1486('0xc')];var _0x42709c=document[_0x1486('0xb')](_0x1486('0xd'));context=_0x42709c['getContext']('2d');bpm=document[_0x1486('0xb')](_0x1486('0xe'));navigator[_0x1486('0x0')](constraints,startStream,function(){});}function startStream(_0x42179b){video[_0x1486('0xf')]=_0x42179b;video[_0x1486('0x10')]();requestAnimationFrame(draw);}function draw(){var _0x25f247=readFrame();if(_0x25f247){getRate(_0x25f247[_0x1486('0x11')]);}requestAnimationFrame(draw);}function readFrame(){try{context[_0x1486('0x12')](video,0x0,0x0,width,height);}catch(_0x3f1099){return null;}return context[_0x1486('0x13')](0x0,0x0,width,height);}function getRate(_0xda1f03){var _0x259e26=_0xda1f03[_0x1486('0x14')];var _0x5aee1f=0x0;for(var _0x42cbdc=0x0,_0x57f69a=0x0;_0x57f69a<_0x259e26;_0x42cbdc++,_0x57f69a+=0x4){r=_0xda1f03[_0x57f69a]/0xff;g=_0xda1f03[_0x57f69a+0x1]/0xff;b=_0xda1f03[_0x57f69a+0x2]/0xff;if(r>g)cmax=r;else if(g>b)cmax=g;else cmax=b;v=cmax*0x64;_0x5aee1f+=v;}if(document[_0x1486('0xb')](_0x1486('0x15'))['value']==0x1)arr[_0x1486('0x16')]({'s':_0x5aee1f/_0x259e26,'time':Date[_0x1486('0x17')]()});}function getPulse(){var _0x210595=arr[_0x1486('0x14')];var _0x12fa03=0x0;var _0x11f6e0=0x1;for(var _0x2a1640=0xb;_0x2a1640<arr[_0x1486('0x14')]-0xc;_0x2a1640++){_0x11f6e0=0x1;for(var _0x364444=_0x2a1640-0xa;_0x364444<_0x2a1640;_0x364444++){if(arr[_0x364444]['s']>arr[_0x2a1640]['s'])_0x11f6e0=0x0;}for(var _0x364444=_0x2a1640+0x1;_0x364444<_0x2a1640+0x6&&_0x364444<_0x210595;_0x364444++){if(arr[_0x364444]['s']>=arr[_0x2a1640]['s'])_0x11f6e0=0x0;}if(_0x11f6e0==0x1){_0x12fa03++;_0x2a1640+=0x6;}}document[_0x1486('0xb')]('bpmFinal')[_0x1486('0x18')]=(_0x12fa03*0x6)[_0x1486('0x19')](0x0)+'\x20BPM';arr=[];}addEventListener(_0x1486('0x1a'),initialize);