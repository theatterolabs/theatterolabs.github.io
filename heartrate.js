var _0x4750=['log','name','message','getElementById','video','height','canvasvideo','getContext','bpm','srcObject','play','data','drawImage','getImageData','length','push','now','shift','bright','time','hdnOn','value','innerHTML','toFixed','\x20BPM','pulse','round','DOMContentLoaded','getUserMedia','webkitGetUserMedia','enumerateDevices','then','forEach','kind','videoinput','deviceId','catch'];(function(_0x4f1a59,_0x7b9648){var _0x3295fd=function(_0x4ded4e){while(--_0x4ded4e){_0x4f1a59['push'](_0x4f1a59['shift']());}};_0x3295fd(++_0x7b9648);}(_0x4750,0x18e));var _0x5f3b=function(_0xa1e42f,_0x33dcf8){_0xa1e42f=_0xa1e42f-0x0;var _0x5cb23f=_0x4750[_0xa1e42f];return _0x5cb23f;};var video,width,height,context,bpm;var arrHistogram=[];arrPulses=[];navigator[_0x5f3b('0x0')]=navigator[_0x5f3b('0x0')]||navigator[_0x5f3b('0x1')];var constraints={'video':!![],'audio':![]};function initialize(){navigator['mediaDevices'][_0x5f3b('0x2')]()[_0x5f3b('0x3')](function(_0x58d375){_0x58d375[_0x5f3b('0x4')](function(_0x5d67bd){if(_0x5d67bd[_0x5f3b('0x5')]==_0x5f3b('0x6'))constraints['video']={'optional':[{'sourceId':_0x5d67bd[_0x5f3b('0x7')]},{'fillLightMode':'on'}]};});initializeVideo();})[_0x5f3b('0x8')](function(_0x56196d){console[_0x5f3b('0x9')](_0x56196d[_0x5f3b('0xa')]+':\x20'+_0x56196d[_0x5f3b('0xb')]);});}function initializeVideo(){video=document[_0x5f3b('0xc')](_0x5f3b('0xd'));width=video['width'];height=video[_0x5f3b('0xe')];var _0x2494fc=document[_0x5f3b('0xc')](_0x5f3b('0xf'));context=_0x2494fc[_0x5f3b('0x10')]('2d');bpm=document[_0x5f3b('0xc')](_0x5f3b('0x11'));navigator[_0x5f3b('0x0')](constraints,startStream,function(){});}function startStream(_0x362f04){video[_0x5f3b('0x12')]=_0x362f04;video[_0x5f3b('0x13')]();requestAnimationFrame(draw);}function draw(){var _0x34c877=readFrame();if(_0x34c877){getRate(_0x34c877[_0x5f3b('0x14')]);}requestAnimationFrame(draw);}function readFrame(){try{context[_0x5f3b('0x15')](video,0x0,0x0,width,height);}catch(_0x213e3b){return null;}return context[_0x5f3b('0x16')](0x0,0x0,width,height);}function getRate(_0x5ef4ab){var _0x32f2e0=_0x5ef4ab[_0x5f3b('0x17')];var _0x51ae37=0x0;for(var _0x5a6098=0x0,_0x2841ac=0x0;_0x2841ac<_0x32f2e0;_0x5a6098++,_0x2841ac+=0x4){_0x51ae37+=_0x5ef4ab[_0x2841ac]+_0x5ef4ab[_0x2841ac+0x1]+_0x5ef4ab[_0x2841ac+0x2];}arrHistogram[_0x5f3b('0x18')]({'bright':_0x51ae37/_0x32f2e0,'time':Date[_0x5f3b('0x19')]()});while(arrHistogram[_0x5f3b('0x17')]>0x140){arrHistogram[_0x5f3b('0x1a')]();}var _0x2bf7ae=arrHistogram[0x0][_0x5f3b('0x1b')];var _0x38d757=arrHistogram[0x0][_0x5f3b('0x1b')];arrHistogram[_0x5f3b('0x4')](function(_0x40fe84){if(_0x40fe84[_0x5f3b('0x1b')]>_0x2bf7ae)_0x2bf7ae=_0x40fe84[_0x5f3b('0x1b')];if(_0x40fe84[_0x5f3b('0x1b')]<_0x38d757)_0x38d757=_0x40fe84[_0x5f3b('0x1b')];});var _0xa6c598=_0x38d757*0.6+_0x2bf7ae*0.4;var _0x4ad4d8=_0x38d757*0.4+_0x2bf7ae*0.6;var _0x3c469d=0x0,_0x26f3c3=0x0;var _0x10839e=undefined;var _0xface83=undefined;var _0x4e6be3=undefined;arrHistogram['forEach'](function(_0x30e759,_0x40f50c){if(_0x10839e!=!![]&&_0x30e759[_0x5f3b('0x1b')]>_0x4ad4d8){_0x10839e=!![];_0x4e6be3=_0x40f50c;}if(_0x10839e!=![]&&_0x30e759[_0x5f3b('0x1b')]<_0xa6c598){if(_0xface83!==undefined&&_0x4e6be3!==undefined){_0x3c469d+=arrHistogram[_0x40f50c][_0x5f3b('0x1c')]-arrHistogram[_0xface83][_0x5f3b('0x1c')];_0x26f3c3++;}_0x10839e=![];_0xface83=_0x40f50c;}});if(_0x26f3c3){var _0x49bb78=0xea60/(_0x3c469d/_0x26f3c3);if(_0x49bb78>0x28&&_0x49bb78<0x78&&document[_0x5f3b('0xc')](_0x5f3b('0x1d'))[_0x5f3b('0x1e')]==0x1){arrPulses['push']({'pulse':_0x49bb78});}bpm[_0x5f3b('0x1f')]=_0x49bb78[_0x5f3b('0x20')](0x0)+_0x5f3b('0x21');}else{bpm['innerHTML']='--\x20BPM';}}function getPulse(){var _0x4af433=0x0;arrPulses[_0x5f3b('0x4')](function(_0x110a57){_0x4af433+=_0x110a57[_0x5f3b('0x22')];});document[_0x5f3b('0xc')]('bpmFinal')[_0x5f3b('0x1f')]=Math[_0x5f3b('0x23')](_0x4af433/arrPulses[_0x5f3b('0x17')])+_0x5f3b('0x21');arrPulses=[];}addEventListener(_0x5f3b('0x24'),initialize);
