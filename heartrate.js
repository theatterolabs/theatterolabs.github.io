var _0x5d2a=['getElementById','width','height','getContext','bpm','play','data','drawImage','getImageData','length','now','shift','bright','time','innerHTML','\x20BPM','DOMContentLoaded','getUserMedia','webkitGetUserMedia','enumerateDevices','forEach','video','deviceId','catch','name','message'];(function(_0x35908b,_0x443ac6){var _0x468485=function(_0x25bd56){while(--_0x25bd56){_0x35908b['push'](_0x35908b['shift']());}};_0x468485(++_0x443ac6);}(_0x5d2a,0x163));var _0x42af=function(_0xedd421,_0x455ff5){_0xedd421=_0xedd421-0x0;var _0xdc608b=_0x5d2a[_0xedd421];return _0xdc608b;};var video,width,height,context,bpm;var arrHistogram=[];navigator[_0x42af('0x0')]=navigator[_0x42af('0x0')]||navigator[_0x42af('0x1')];var constraints={'video':!![],'audio':![]};function initialize(){navigator['mediaDevices'][_0x42af('0x2')]()['then'](function(_0x509b56){_0x509b56[_0x42af('0x3')](function(_0x5e4d32){if(_0x5e4d32['kind']=='videoinput')constraints[_0x42af('0x4')]={'optional':[{'sourceId':_0x5e4d32[_0x42af('0x5')]},{'fillLightMode':'on'}]};});initializeVideo();})[_0x42af('0x6')](function(_0x12c070){console['log'](_0x12c070[_0x42af('0x7')]+':\x20'+_0x12c070[_0x42af('0x8')]);});}function initializeVideo(){video=document[_0x42af('0x9')](_0x42af('0x4'));width=video[_0x42af('0xa')];height=video[_0x42af('0xb')];var _0x12d43f=document[_0x42af('0x9')]('canvasvideo');context=_0x12d43f[_0x42af('0xc')]('2d');bpm=document[_0x42af('0x9')](_0x42af('0xd'));navigator['getUserMedia'](constraints,startStream,function(){});}function startStream(_0x27e69b){video['srcObject']=_0x27e69b;video[_0x42af('0xe')]();requestAnimationFrame(draw);}function draw(){var _0x289755=readFrame();if(_0x289755){getRate(_0x289755[_0x42af('0xf')]);}requestAnimationFrame(draw);}function readFrame(){try{context[_0x42af('0x10')](video,0x0,0x0,width,height);}catch(_0xefa1c0){return null;}return context[_0x42af('0x11')](0x0,0x0,width,height);}function getRate(_0x3ecfb3){var _0x5f232a=_0x3ecfb3[_0x42af('0x12')];var _0xc939ab=0x0;for(var _0x143d66=0x0,_0x326eef=0x0;_0x326eef<_0x5f232a;_0x143d66++,_0x326eef+=0x4){_0xc939ab+=_0x3ecfb3[_0x326eef]+_0x3ecfb3[_0x326eef+0x1]+_0x3ecfb3[_0x326eef+0x2];}arrHistogram['push']({'bright':_0xc939ab/_0x5f232a,'time':Date[_0x42af('0x13')]()});while(arrHistogram[_0x42af('0x12')]>0x140){arrHistogram[_0x42af('0x14')]();}var _0x15a9d4=arrHistogram[0x0][_0x42af('0x15')];var _0x28f776=arrHistogram[0x0][_0x42af('0x15')];arrHistogram['forEach'](function(_0x331732){if(_0x331732[_0x42af('0x15')]>_0x15a9d4)_0x15a9d4=_0x331732[_0x42af('0x15')];if(_0x331732[_0x42af('0x15')]<_0x28f776)_0x28f776=_0x331732['bright'];});var _0x2366ee=_0x28f776*0.6+_0x15a9d4*0.4;var _0x389abc=_0x28f776*0.4+_0x15a9d4*0.6;var _0x3eb415=0x0,_0x5c5d00=0x0;var _0x4af633=undefined;var _0xd87020=undefined;var _0x41fb35=undefined;arrHistogram[_0x42af('0x3')](function(_0x9647f,_0x15cc48){if(_0x4af633!=!![]&&_0x9647f[_0x42af('0x15')]>_0x389abc){_0x4af633=!![];_0x41fb35=_0x15cc48;}if(_0x4af633!=![]&&_0x9647f[_0x42af('0x15')]<_0x2366ee){if(_0xd87020!==undefined&&_0x41fb35!==undefined){_0x3eb415+=arrHistogram[_0x15cc48][_0x42af('0x16')]-arrHistogram[_0xd87020][_0x42af('0x16')];_0x5c5d00++;}_0x4af633=![];_0xd87020=_0x15cc48;}});if(_0x5c5d00){var _0x4689fe=0xea60/(_0x3eb415/_0x5c5d00);bpm[_0x42af('0x17')]=_0x4689fe['toFixed'](0x0)+_0x42af('0x18');}else{bpm[_0x42af('0x17')]='--\x20BPM';}}addEventListener(_0x42af('0x19'),initialize);