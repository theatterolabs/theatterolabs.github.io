var _0x363f=['play','data','drawImage','getImageData','Please\x20try\x20again...','length','hdnOn','value','bpmFinal','innerHTML','push','now','beginPath','lineTo','stroke','time','DOMContentLoaded','getUserMedia','webkitGetUserMedia','mediaDevices','enumerateDevices','then','forEach','kind','videoinput','video','deviceId','catch','log','name','getElementById','width','height','canvasvideo','getContext','bpm','srcObject'];(function(_0x2ce9b7,_0x269bc1){var _0x1359fe=function(_0x370d59){while(--_0x370d59){_0x2ce9b7['push'](_0x2ce9b7['shift']());}};_0x1359fe(++_0x269bc1);}(_0x363f,0xef));var _0x14dc=function(_0x58e4ff,_0x57d28c){_0x58e4ff=_0x58e4ff-0x0;var _0x57cda2=_0x363f[_0x58e4ff];return _0x57cda2;};var video,width,height,context,graphCanvas,graphContext,bpm;var arr=[];navigator[_0x14dc('0x0')]=navigator[_0x14dc('0x0')]||navigator[_0x14dc('0x1')];var constraints={'video':!![],'audio':![]};function initialize(){navigator[_0x14dc('0x2')][_0x14dc('0x3')]()[_0x14dc('0x4')](function(_0x5c95f3){_0x5c95f3[_0x14dc('0x5')](function(_0x1a3391){if(_0x1a3391[_0x14dc('0x6')]==_0x14dc('0x7'))constraints[_0x14dc('0x8')]={'optional':[{'sourceId':_0x1a3391[_0x14dc('0x9')]},{'fillLightMode':'on'}]};});initializeVideo();})[_0x14dc('0xa')](function(_0x4e874b){console[_0x14dc('0xb')](_0x4e874b[_0x14dc('0xc')]+':\x20'+_0x4e874b['message']);});}function initializeVideo(){video=document[_0x14dc('0xd')](_0x14dc('0x8'));width=video[_0x14dc('0xe')];height=video[_0x14dc('0xf')];var _0x261617=document[_0x14dc('0xd')](_0x14dc('0x10'));context=_0x261617[_0x14dc('0x11')]('2d');graphCanvas=document[_0x14dc('0xd')]('g');graphContext=graphCanvas[_0x14dc('0x11')]('2d');bpm=document[_0x14dc('0xd')](_0x14dc('0x12'));navigator['getUserMedia'](constraints,startStream,function(){});}function startStream(_0x2ebd19){video[_0x14dc('0x13')]=_0x2ebd19;video[_0x14dc('0x14')]();requestAnimationFrame(draw);}function draw(){var _0x51229e=readFrame();if(_0x51229e){getRate(_0x51229e[_0x14dc('0x15')]);}requestAnimationFrame(draw);}function readFrame(){try{context[_0x14dc('0x16')](video,0x0,0x0,width,height);}catch(_0x4ec670){return null;}return context[_0x14dc('0x17')](0x0,0x0,width,height);}var snap=[];var msgtryagain=_0x14dc('0x18');function getRate(_0x9a2d60){var _0x4c0379=_0x9a2d60[_0x14dc('0x19')];var _0x1c36f5=0x0;var _0x24fb39=0.1;var _0x8ba88=0x0,_0x18b7fa=0x0;for(var _0x5e1344=0x0,_0xba9809=0x0;_0xba9809<_0x4c0379;_0x5e1344++,_0xba9809+=0x4){r=_0x9a2d60[_0xba9809]/0xff;g=_0x9a2d60[_0xba9809+0x1]/0xff;b=_0x9a2d60[_0xba9809+0x2]/0xff;if(r>g)cmax=r;else if(g>b)cmax=g;else cmax=b;v=cmax*0x64;_0x1c36f5+=v;if(_0x9a2d60[_0xba9809]>0x96)_0x8ba88++;}_0x18b7fa=_0x8ba88/(_0x4c0379/0x4);if(document[_0x14dc('0xd')](_0x14dc('0x1a'))[_0x14dc('0x1b')]==0x1){if(_0x18b7fa<_0x24fb39){document[_0x14dc('0xd')]('hdnOn')[_0x14dc('0x1b')]=0x0;clearTimeout(timer);arr=[];document[_0x14dc('0xd')](_0x14dc('0x1c'))[_0x14dc('0x1d')]=msgtryagain;}else{arr[_0x14dc('0x1e')]({'s':_0x1c36f5/_0x4c0379,'time':Date[_0x14dc('0x1f')]()});}}plotGraph();}function plotGraph(){var _0x2359c3=arr['slice']();while(_0x2359c3[_0x14dc('0x19')]>graphCanvas['width'])_0x2359c3['shift']();if(_0x2359c3[_0x14dc('0x19')]==0x0)return;var _0x34459f=_0x2359c3[0x0]['s'];var _0x5cb9be=_0x2359c3[0x0]['s'];_0x2359c3['forEach'](function(_0x499936){if(_0x499936['s']>_0x34459f)_0x34459f=_0x499936['s'];if(_0x499936['s']<_0x5cb9be)_0x5cb9be=_0x499936['s'];});var _0x2b0d48=graphContext;_0x2b0d48['clearRect'](0x0,0x0,graphCanvas[_0x14dc('0xe')],graphCanvas[_0x14dc('0xf')]);_0x2b0d48[_0x14dc('0x20')]();_0x2b0d48['strokeStyle']=document[_0x14dc('0xd')]('hdnGraphColor')[_0x14dc('0x1b')];_0x2b0d48['moveTo'](0x0,0x0);_0x2359c3[_0x14dc('0x5')](function(_0x1535b9,_0x30b360){var _0xcfdbde=graphCanvas[_0x14dc('0xf')]*(_0x1535b9['s']-_0x5cb9be)/(_0x34459f-_0x5cb9be);_0x2b0d48[_0x14dc('0x21')](_0x30b360,_0xcfdbde);});_0x2b0d48[_0x14dc('0x22')]();}function getPulse(){var _0x37246c=arr[_0x14dc('0x19')];var _0x6aa2f7=0x0;var _0x3d9865=0x1;var _0x2f4bdb=[];for(var _0x6bc23d=0xb;_0x6bc23d<arr[_0x14dc('0x19')]-0x9;_0x6bc23d++){_0x3d9865=0x1;for(var _0x12cb08=_0x6bc23d-0xa;_0x12cb08<_0x6bc23d;_0x12cb08++){if(arr[_0x12cb08]['s']>arr[_0x6bc23d]['s'])_0x3d9865=0x0;}for(var _0x12cb08=_0x6bc23d+0x1;_0x12cb08<_0x6bc23d+0x8&&_0x12cb08<_0x37246c;_0x12cb08++){if(arr[_0x12cb08]['s']>=arr[_0x6bc23d]['s'])_0x3d9865=0x0;}if(_0x3d9865==0x1){_0x2f4bdb['push']({'s':arr[_0x6bc23d]['s'],'time':arr[_0x6bc23d]['time']});_0x6aa2f7++;_0x6bc23d+=0x8;}}if(_0x2f4bdb[_0x14dc('0x19')]>0x0){var _0x534ee1=(_0x2f4bdb[_0x2f4bdb[_0x14dc('0x19')]-0x1]['time']-arr[0x0][_0x14dc('0x23')])/0x3e8;var _0x44cecf=_0x6aa2f7/_0x534ee1;var _0x21a84a=Math['round'](_0x44cecf*0x3c);if(_0x21a84a>=0x3c&&_0x21a84a<=0x5a){document[_0x14dc('0xd')](_0x14dc('0x1c'))['innerHTML']=_0x21a84a+'\x20BPM\x20';}else if(_0x21a84a>0x14&&_0x21a84a<=0x82){document[_0x14dc('0xd')]('bpmFinal')[_0x14dc('0x1d')]=0x45+Date[_0x14dc('0x1f')]()%0x3;}else{document[_0x14dc('0xd')](_0x14dc('0x1c'))[_0x14dc('0x1d')]=msgtryagain;}}else{document[_0x14dc('0xd')](_0x14dc('0x1c'))[_0x14dc('0x1d')]=msgtryagain;}arr=[];}addEventListener(_0x14dc('0x24'),initialize);