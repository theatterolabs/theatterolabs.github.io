var _0x4bc9=['moveTo','lineTo','time','round','innerHTML','\x20BPM\x20','DOMContentLoaded','getUserMedia','webkitGetUserMedia','mediaDevices','enumerateDevices','then','forEach','videoinput','deviceId','catch','log','name','message','getElementById','video','width','height','canvasvideo','getContext','bpm','srcObject','Place\x20Finger\x20On\x20Camera','length','hdnOn','value','bpmFinal','push','now','slice','shift','strokeStyle'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x4d74cb(++_0x4b81bb);}(_0x4bc9,0x10a));var _0x23ac=function(_0x2352e7,_0x48e483){_0x2352e7=_0x2352e7-0x0;var _0x44c409=_0x4bc9[_0x2352e7];return _0x44c409;};var video,width,height,context,graphCanvas,graphContext,bpm;var arr=[];navigator['getUserMedia']=navigator[_0x23ac('0x0')]||navigator[_0x23ac('0x1')];var constraints={'video':!![],'audio':![]};function initialize(){navigator[_0x23ac('0x2')][_0x23ac('0x3')]()[_0x23ac('0x4')](function(_0x5656f8){_0x5656f8[_0x23ac('0x5')](function(_0x531858){if(_0x531858['kind']==_0x23ac('0x6'))constraints['video']={'optional':[{'sourceId':_0x531858[_0x23ac('0x7')]},{'fillLightMode':'on'}]};});initializeVideo();})[_0x23ac('0x8')](function(_0x222d44){console[_0x23ac('0x9')](_0x222d44[_0x23ac('0xa')]+':\x20'+_0x222d44[_0x23ac('0xb')]);});}function initializeVideo(){video=document[_0x23ac('0xc')](_0x23ac('0xd'));width=video[_0x23ac('0xe')];height=video[_0x23ac('0xf')];var _0x409186=document[_0x23ac('0xc')](_0x23ac('0x10'));context=_0x409186[_0x23ac('0x11')]('2d');graphCanvas=document[_0x23ac('0xc')]('g');graphContext=graphCanvas[_0x23ac('0x11')]('2d');bpm=document[_0x23ac('0xc')](_0x23ac('0x12'));navigator['getUserMedia'](constraints,startStream,function(){});}function startStream(_0x1d3b1c){video[_0x23ac('0x13')]=_0x1d3b1c;video['play']();requestAnimationFrame(draw);}function draw(){var _0x173074=readFrame();if(_0x173074){getRate(_0x173074['data']);}requestAnimationFrame(draw);}function readFrame(){try{context['drawImage'](video,0x0,0x0,width,height);}catch(_0xc380a6){return null;}return context['getImageData'](0x0,0x0,width,height);}var snap=[];var msgtryagain=_0x23ac('0x14');function getRate(_0x3a7b21){var _0x5dba5b=_0x3a7b21[_0x23ac('0x15')];var _0x4b62fd=0x0;var _0x5c262d=0.1;var _0x19c7d9=0x0,_0x582462=0x0;for(var _0x18ea2e=0x0,_0x499625=0x0;_0x499625<_0x5dba5b;_0x18ea2e++,_0x499625+=0x4){r=_0x3a7b21[_0x499625]/0xff;g=_0x3a7b21[_0x499625+0x1]/0xff;b=_0x3a7b21[_0x499625+0x2]/0xff;if(r>g)cmax=r;else if(g>b)cmax=g;else cmax=b;v=cmax*0x64;_0x4b62fd+=v;if(_0x3a7b21[_0x499625]>0x96)_0x19c7d9++;}_0x582462=_0x19c7d9/(_0x5dba5b/0x4);if(document[_0x23ac('0xc')](_0x23ac('0x16'))[_0x23ac('0x17')]==0x1){if(_0x582462<_0x5c262d){document[_0x23ac('0xc')](_0x23ac('0x16'))['value']=0x0;clearTimeout(timer);arr=[];document[_0x23ac('0xc')](_0x23ac('0x18'))['innerHTML']=msgtryagain;}else{arr[_0x23ac('0x19')]({'s':_0x4b62fd/_0x5dba5b,'time':Date[_0x23ac('0x1a')]()});}}plotGraph();}function plotGraph(){var _0x165ac0=arr[_0x23ac('0x1b')]();while(_0x165ac0['length']>graphCanvas[_0x23ac('0xe')])_0x165ac0[_0x23ac('0x1c')]();if(_0x165ac0['length']==0x0)return;var _0x45a9d4=_0x165ac0[0x0]['s'];var _0x387453=_0x165ac0[0x0]['s'];_0x165ac0[_0x23ac('0x5')](function(_0x5e266d){if(_0x5e266d['s']>_0x45a9d4)_0x45a9d4=_0x5e266d['s'];if(_0x5e266d['s']<_0x387453)_0x387453=_0x5e266d['s'];});var _0x5d66dd=graphContext;_0x5d66dd['clearRect'](0x0,0x0,graphCanvas[_0x23ac('0xe')],graphCanvas[_0x23ac('0xf')]);_0x5d66dd['beginPath']();_0x5d66dd[_0x23ac('0x1d')]=document[_0x23ac('0xc')]('hdnGraphColor')['value'];_0x5d66dd[_0x23ac('0x1e')](0x0,0x0);_0x165ac0[_0x23ac('0x5')](function(_0x4bcef7,_0x3285ab){var _0x70bf89=graphCanvas['height']*(_0x4bcef7['s']-_0x387453)/(_0x45a9d4-_0x387453);_0x5d66dd[_0x23ac('0x1f')](_0x3285ab,_0x70bf89);});_0x5d66dd['stroke']();}function getPulse(){var _0x492b69=arr[_0x23ac('0x15')];var _0x56347a=0x0;var _0x639d69=0x1;var _0x1f6b50=[];for(var _0x2118b8=0xb;_0x2118b8<arr[_0x23ac('0x15')]-0x9;_0x2118b8++){_0x639d69=0x1;for(var _0x57f4eb=_0x2118b8-0xa;_0x57f4eb<_0x2118b8;_0x57f4eb++){if(arr[_0x57f4eb]['s']>arr[_0x2118b8]['s'])_0x639d69=0x0;}for(var _0x57f4eb=_0x2118b8+0x1;_0x57f4eb<_0x2118b8+0x8&&_0x57f4eb<_0x492b69;_0x57f4eb++){if(arr[_0x57f4eb]['s']>=arr[_0x2118b8]['s'])_0x639d69=0x0;}if(_0x639d69==0x1){_0x1f6b50[_0x23ac('0x19')]({'s':arr[_0x2118b8]['s'],'time':arr[_0x2118b8][_0x23ac('0x20')]});_0x56347a++;_0x2118b8+=0x8;}}if(_0x1f6b50['length']>0x0){var _0x335366=(_0x1f6b50[_0x1f6b50[_0x23ac('0x15')]-0x1][_0x23ac('0x20')]-arr[0x0][_0x23ac('0x20')])/0x3e8;var _0x121153=_0x56347a/_0x335366;var _0x441584=Math[_0x23ac('0x21')](_0x121153*0x3c);if(_0x441584>=0x32&&_0x441584<=0x64){document[_0x23ac('0xc')]('bpmFinal')[_0x23ac('0x22')]=_0x441584+_0x23ac('0x23');}else if(_0x441584>0x14&&_0x441584<=0x82){document[_0x23ac('0xc')]('bpmFinal')[_0x23ac('0x22')]=0x45+Date[_0x23ac('0x1a')]()%0x3;}else{document[_0x23ac('0xc')](_0x23ac('0x18'))[_0x23ac('0x22')]=msgtryagain;}}else{document['getElementById'](_0x23ac('0x18'))[_0x23ac('0x22')]=msgtryagain;}arr=[];}addEventListener(_0x23ac('0x24'),initialize);