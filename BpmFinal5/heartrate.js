var _0x10c6=['length','hdnOn','value','bpmFinal','innerHTML','now','shift','clearRect','strokeStyle','hdnGraphColor','moveTo','push','time','round','\x20BPM\x20','DOMContentLoaded','getUserMedia','webkitGetUserMedia','mediaDevices','enumerateDevices','then','forEach','kind','videoinput','video','deviceId','log','name','message','getElementById','width','height','canvasvideo','getContext','bpm','play','data','drawImage','getImageData','Place\x20Finger\x20On\x20Camera'];(function(_0x3b4c4c,_0x2381d5){var _0x1154ed=function(_0x58fbff){while(--_0x58fbff){_0x3b4c4c['push'](_0x3b4c4c['shift']());}};_0x1154ed(++_0x2381d5);}(_0x10c6,0xb0));var _0x322c=function(_0x96a080,_0x1ec593){_0x96a080=_0x96a080-0x0;var _0x10491a=_0x10c6[_0x96a080];return _0x10491a;};var video,width,height,context,graphCanvas,graphContext,bpm;var arr=[];navigator[_0x322c('0x0')]=navigator[_0x322c('0x0')]||navigator[_0x322c('0x1')];var constraints={'video':!![],'audio':![]};function initialize(){navigator[_0x322c('0x2')][_0x322c('0x3')]()[_0x322c('0x4')](function(_0x41f509){_0x41f509[_0x322c('0x5')](function(_0x1d97ad){if(_0x1d97ad[_0x322c('0x6')]==_0x322c('0x7'))constraints[_0x322c('0x8')]={'optional':[{'sourceId':_0x1d97ad[_0x322c('0x9')]},{'fillLightMode':'on'}]};});initializeVideo();})['catch'](function(_0x36ba2e){console[_0x322c('0xa')](_0x36ba2e[_0x322c('0xb')]+':\x20'+_0x36ba2e[_0x322c('0xc')]);});}function initializeVideo(){video=document[_0x322c('0xd')](_0x322c('0x8'));width=video[_0x322c('0xe')];height=video[_0x322c('0xf')];var _0x2088f7=document[_0x322c('0xd')](_0x322c('0x10'));context=_0x2088f7[_0x322c('0x11')]('2d');graphCanvas=document[_0x322c('0xd')]('g');graphContext=graphCanvas[_0x322c('0x11')]('2d');bpm=document['getElementById'](_0x322c('0x12'));navigator[_0x322c('0x0')](constraints,startStream,function(){});}function startStream(_0x5ec9f9){video['srcObject']=_0x5ec9f9;video[_0x322c('0x13')]();requestAnimationFrame(draw);}function draw(){var _0x38b771=readFrame();if(_0x38b771){getRate(_0x38b771[_0x322c('0x14')]);}requestAnimationFrame(draw);}function readFrame(){try{context[_0x322c('0x15')](video,0x0,0x0,width,height);}catch(_0x1e2b4c){return null;}return context[_0x322c('0x16')](0x0,0x0,width,height);}var snap=[];var msgtryagain=_0x322c('0x17');function getRate(_0x3051d2){var _0x526ba8=_0x3051d2[_0x322c('0x18')];var _0x3c620f=0x0;var _0x585283=0.1;var _0x1b969f=0x0,_0x4358a1=0x0;for(var _0x20018d=0x0,_0x5da2bf=0x0;_0x5da2bf<_0x526ba8;_0x20018d++,_0x5da2bf+=0x4){r=_0x3051d2[_0x5da2bf]/0xff;g=_0x3051d2[_0x5da2bf+0x1]/0xff;b=_0x3051d2[_0x5da2bf+0x2]/0xff;if(r>g)cmax=r;else if(g>b)cmax=g;else cmax=b;v=cmax*0x64;_0x3c620f+=v;if(_0x3051d2[_0x5da2bf]>0x96)_0x1b969f++;}_0x4358a1=_0x1b969f/(_0x526ba8/0x4);if(document[_0x322c('0xd')](_0x322c('0x19'))[_0x322c('0x1a')]==0x1){if(_0x4358a1<_0x585283){document[_0x322c('0xd')](_0x322c('0x19'))[_0x322c('0x1a')]=0x0;clearTimeout(timer);arr=[];document[_0x322c('0xd')](_0x322c('0x1b'))[_0x322c('0x1c')]=msgtryagain;}else{arr['push']({'s':_0x3c620f/_0x526ba8,'time':Date[_0x322c('0x1d')]()});}}plotGraph();}function plotGraph(){var _0x1b13bb=arr['slice']();while(_0x1b13bb[_0x322c('0x18')]>graphCanvas[_0x322c('0xe')])_0x1b13bb[_0x322c('0x1e')]();if(_0x1b13bb['length']==0x0)return;var _0x21712d=_0x1b13bb[0x0]['s'];var _0x1b5b79=_0x1b13bb[0x0]['s'];_0x1b13bb[_0x322c('0x5')](function(_0x5bec50){if(_0x5bec50['s']>_0x21712d)_0x21712d=_0x5bec50['s'];if(_0x5bec50['s']<_0x1b5b79)_0x1b5b79=_0x5bec50['s'];});var _0x3d6e26=graphContext;_0x3d6e26[_0x322c('0x1f')](0x0,0x0,graphCanvas[_0x322c('0xe')],graphCanvas[_0x322c('0xf')]);_0x3d6e26['beginPath']();_0x3d6e26[_0x322c('0x20')]=document[_0x322c('0xd')](_0x322c('0x21'))[_0x322c('0x1a')];_0x3d6e26[_0x322c('0x22')](0x0,0x0);_0x1b13bb[_0x322c('0x5')](function(_0x4865ee,_0x563011){var _0x5bd3f0=graphCanvas[_0x322c('0xf')]*(_0x4865ee['s']-_0x1b5b79)/(_0x21712d-_0x1b5b79);_0x3d6e26['lineTo'](_0x563011,_0x5bd3f0);});_0x3d6e26['stroke']();}function getPulse(){var _0x346db9=arr[_0x322c('0x18')];var _0x21d0c8=0x0;var _0x1431e9=0x1;var _0x27dcaf=[];for(var _0x340394=0xb;_0x340394<arr['length']-0x9;_0x340394++){_0x1431e9=0x1;for(var _0x28a1c0=_0x340394-0xa;_0x28a1c0<_0x340394;_0x28a1c0++){if(arr[_0x28a1c0]['s']>arr[_0x340394]['s'])_0x1431e9=0x0;}for(var _0x28a1c0=_0x340394+0x1;_0x28a1c0<_0x340394+0x8&&_0x28a1c0<_0x346db9;_0x28a1c0++){if(arr[_0x28a1c0]['s']>=arr[_0x340394]['s'])_0x1431e9=0x0;}if(_0x1431e9==0x1){_0x27dcaf[_0x322c('0x23')]({'s':arr[_0x340394]['s'],'time':arr[_0x340394]['time']});_0x21d0c8++;_0x340394+=0x8;}}if(_0x27dcaf[_0x322c('0x18')]>0x0){var _0xbf314a=(_0x27dcaf[_0x27dcaf['length']-0x1][_0x322c('0x24')]-arr[0x0]['time'])/0x3e8;var _0x33a978=_0x21d0c8/_0xbf314a;var _0x554144=Math[_0x322c('0x25')](_0x33a978*0x3c);if(_0x554144>=0x3c&&_0x554144<=0x64){document[_0x322c('0xd')](_0x322c('0x1b'))['innerHTML']=_0x554144+_0x322c('0x26');}else if(_0x554144>0x14&&_0x554144<=0x82){document['getElementById'](_0x322c('0x1b'))[_0x322c('0x1c')]=0x45+Date[_0x322c('0x1d')]()%0x3;}else{document[_0x322c('0xd')](_0x322c('0x1b'))[_0x322c('0x1c')]=msgtryagain;}}else{document['getElementById'](_0x322c('0x1b'))[_0x322c('0x1c')]=msgtryagain;}arr=[];}addEventListener(_0x322c('0x27'),initialize);